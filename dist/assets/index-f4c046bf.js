function IA(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function GE(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var KE={exports:{}},Sd={},QE={exports:{}},me={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ou=Symbol.for("react.element"),kA=Symbol.for("react.portal"),CA=Symbol.for("react.fragment"),RA=Symbol.for("react.strict_mode"),xA=Symbol.for("react.profiler"),AA=Symbol.for("react.provider"),PA=Symbol.for("react.context"),bA=Symbol.for("react.forward_ref"),NA=Symbol.for("react.suspense"),DA=Symbol.for("react.memo"),OA=Symbol.for("react.lazy"),l0=Symbol.iterator;function LA(t){return t===null||typeof t!="object"?null:(t=l0&&t[l0]||t["@@iterator"],typeof t=="function"?t:null)}var XE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},YE=Object.assign,JE={};function Zo(t,e,n){this.props=t,this.context=e,this.refs=JE,this.updater=n||XE}Zo.prototype.isReactComponent={};Zo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Zo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function ZE(){}ZE.prototype=Zo.prototype;function py(t,e,n){this.props=t,this.context=e,this.refs=JE,this.updater=n||XE}var my=py.prototype=new ZE;my.constructor=py;YE(my,Zo.prototype);my.isPureReactComponent=!0;var u0=Array.isArray,eT=Object.prototype.hasOwnProperty,gy={current:null},tT={key:!0,ref:!0,__self:!0,__source:!0};function nT(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)eT.call(e,r)&&!tT.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:ou,type:t,key:s,ref:o,props:i,_owner:gy.current}}function MA(t,e){return{$$typeof:ou,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function yy(t){return typeof t=="object"&&t!==null&&t.$$typeof===ou}function VA(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var c0=/\/+/g;function ip(t,e){return typeof t=="object"&&t!==null&&t.key!=null?VA(""+t.key):e.toString(36)}function Tc(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case ou:case kA:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+ip(o,0):r,u0(i)?(n="",t!=null&&(n=t.replace(c0,"$&/")+"/"),Tc(i,e,n,"",function(u){return u})):i!=null&&(yy(i)&&(i=MA(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(c0,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",u0(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+ip(s,a);o+=Tc(s,e,n,l,i)}else if(l=LA(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+ip(s,a++),o+=Tc(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function qu(t,e,n){if(t==null)return t;var r=[],i=0;return Tc(t,r,"","",function(s){return e.call(n,s,i++)}),r}function jA(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var tn={current:null},Sc={transition:null},FA={ReactCurrentDispatcher:tn,ReactCurrentBatchConfig:Sc,ReactCurrentOwner:gy};me.Children={map:qu,forEach:function(t,e,n){qu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return qu(t,function(){e++}),e},toArray:function(t){return qu(t,function(e){return e})||[]},only:function(t){if(!yy(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};me.Component=Zo;me.Fragment=CA;me.Profiler=xA;me.PureComponent=py;me.StrictMode=RA;me.Suspense=NA;me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=FA;me.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=YE({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=gy.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)eT.call(e,l)&&!tT.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:ou,type:t.type,key:i,ref:s,props:r,_owner:o}};me.createContext=function(t){return t={$$typeof:PA,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:AA,_context:t},t.Consumer=t};me.createElement=nT;me.createFactory=function(t){var e=nT.bind(null,t);return e.type=t,e};me.createRef=function(){return{current:null}};me.forwardRef=function(t){return{$$typeof:bA,render:t}};me.isValidElement=yy;me.lazy=function(t){return{$$typeof:OA,_payload:{_status:-1,_result:t},_init:jA}};me.memo=function(t,e){return{$$typeof:DA,type:t,compare:e===void 0?null:e}};me.startTransition=function(t){var e=Sc.transition;Sc.transition={};try{t()}finally{Sc.transition=e}};me.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};me.useCallback=function(t,e){return tn.current.useCallback(t,e)};me.useContext=function(t){return tn.current.useContext(t)};me.useDebugValue=function(){};me.useDeferredValue=function(t){return tn.current.useDeferredValue(t)};me.useEffect=function(t,e){return tn.current.useEffect(t,e)};me.useId=function(){return tn.current.useId()};me.useImperativeHandle=function(t,e,n){return tn.current.useImperativeHandle(t,e,n)};me.useInsertionEffect=function(t,e){return tn.current.useInsertionEffect(t,e)};me.useLayoutEffect=function(t,e){return tn.current.useLayoutEffect(t,e)};me.useMemo=function(t,e){return tn.current.useMemo(t,e)};me.useReducer=function(t,e,n){return tn.current.useReducer(t,e,n)};me.useRef=function(t){return tn.current.useRef(t)};me.useState=function(t){return tn.current.useState(t)};me.useSyncExternalStore=function(t,e,n){return tn.current.useSyncExternalStore(t,e,n)};me.useTransition=function(){return tn.current.useTransition()};me.version="18.2.0";QE.exports=me;var x=QE.exports;const xr=GE(x),$A=IA({__proto__:null,default:xr},[x]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UA=x,BA=Symbol.for("react.element"),zA=Symbol.for("react.fragment"),WA=Object.prototype.hasOwnProperty,qA=UA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,HA={key:!0,ref:!0,__self:!0,__source:!0};function rT(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)WA.call(e,r)&&!HA.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:BA,type:t,key:s,ref:o,props:i,_owner:qA.current}}Sd.Fragment=zA;Sd.jsx=rT;Sd.jsxs=rT;KE.exports=Sd;var m=KE.exports,wm={},iT={exports:{}},_n={},sT={exports:{}},oT={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(F,X){var ee=F.length;F.push(X);e:for(;0<ee;){var Ee=ee-1>>>1,Ie=F[Ee];if(0<i(Ie,X))F[Ee]=X,F[ee]=Ie,ee=Ee;else break e}}function n(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var X=F[0],ee=F.pop();if(ee!==X){F[0]=ee;e:for(var Ee=0,Ie=F.length,Xn=Ie>>>1;Ee<Xn;){var Tn=2*(Ee+1)-1,Hi=F[Tn],cn=Tn+1,Ne=F[cn];if(0>i(Hi,ee))cn<Ie&&0>i(Ne,Hi)?(F[Ee]=Ne,F[cn]=ee,Ee=cn):(F[Ee]=Hi,F[Tn]=ee,Ee=Tn);else if(cn<Ie&&0>i(Ne,ee))F[Ee]=Ne,F[cn]=ee,Ee=cn;else break e}}return X}function i(F,X){var ee=F.sortIndex-X.sortIndex;return ee!==0?ee:F.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,d=null,h=3,f=!1,g=!1,w=!1,E=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(F){for(var X=n(u);X!==null;){if(X.callback===null)r(u);else if(X.startTime<=F)r(u),X.sortIndex=X.expirationTime,e(l,X);else break;X=n(u)}}function y(F){if(w=!1,_(F),!g)if(n(l)!==null)g=!0,nt(S);else{var X=n(u);X!==null&&ut(y,X.startTime-F)}}function S(F,X){g=!1,w&&(w=!1,v(P),P=-1),f=!0;var ee=h;try{for(_(X),d=n(l);d!==null&&(!(d.expirationTime>X)||F&&!le());){var Ee=d.callback;if(typeof Ee=="function"){d.callback=null,h=d.priorityLevel;var Ie=Ee(d.expirationTime<=X);X=t.unstable_now(),typeof Ie=="function"?d.callback=Ie:d===n(l)&&r(l),_(X)}else r(l);d=n(l)}if(d!==null)var Xn=!0;else{var Tn=n(u);Tn!==null&&ut(y,Tn.startTime-X),Xn=!1}return Xn}finally{d=null,h=ee,f=!1}}var C=!1,A=null,P=-1,O=5,M=-1;function le(){return!(t.unstable_now()-M<O)}function Q(){if(A!==null){var F=t.unstable_now();M=F;var X=!0;try{X=A(!0,F)}finally{X?Z():(C=!1,A=null)}}else C=!1}var Z;if(typeof p=="function")Z=function(){p(Q)};else if(typeof MessageChannel<"u"){var _e=new MessageChannel,he=_e.port2;_e.port1.onmessage=Q,Z=function(){he.postMessage(null)}}else Z=function(){E(Q,0)};function nt(F){A=F,C||(C=!0,Z())}function ut(F,X){P=E(function(){F(t.unstable_now())},X)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_continueExecution=function(){g||f||(g=!0,nt(S))},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(F){switch(h){case 1:case 2:case 3:var X=3;break;default:X=h}var ee=h;h=X;try{return F()}finally{h=ee}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(F,X){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var ee=h;h=F;try{return X()}finally{h=ee}},t.unstable_scheduleCallback=function(F,X,ee){var Ee=t.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?Ee+ee:Ee):ee=Ee,F){case 1:var Ie=-1;break;case 2:Ie=250;break;case 5:Ie=1073741823;break;case 4:Ie=1e4;break;default:Ie=5e3}return Ie=ee+Ie,F={id:c++,callback:X,priorityLevel:F,startTime:ee,expirationTime:Ie,sortIndex:-1},ee>Ee?(F.sortIndex=ee,e(u,F),n(l)===null&&F===n(u)&&(w?(v(P),P=-1):w=!0,ut(y,ee-Ee))):(F.sortIndex=Ie,e(l,F),g||f||(g=!0,nt(S))),F},t.unstable_shouldYield=le,t.unstable_wrapCallback=function(F){var X=h;return function(){var ee=h;h=X;try{return F.apply(this,arguments)}finally{h=ee}}}})(oT);sT.exports=oT;var GA=sT.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aT=x,gn=GA;function V(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var lT=new Set,gl={};function Ns(t,e){Do(t,e),Do(t+"Capture",e)}function Do(t,e){for(gl[t]=e,t=0;t<e.length;t++)lT.add(e[t])}var Vr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Em=Object.prototype.hasOwnProperty,KA=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h0={},d0={};function QA(t){return Em.call(d0,t)?!0:Em.call(h0,t)?!1:KA.test(t)?d0[t]=!0:(h0[t]=!0,!1)}function XA(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function YA(t,e,n,r){if(e===null||typeof e>"u"||XA(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function nn(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Ot={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ot[t]=new nn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ot[e]=new nn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ot[t]=new nn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ot[t]=new nn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ot[t]=new nn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ot[t]=new nn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ot[t]=new nn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ot[t]=new nn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ot[t]=new nn(t,5,!1,t.toLowerCase(),null,!1,!1)});var vy=/[\-:]([a-z])/g;function _y(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(vy,_y);Ot[e]=new nn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(vy,_y);Ot[e]=new nn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(vy,_y);Ot[e]=new nn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ot[t]=new nn(t,1,!1,t.toLowerCase(),null,!1,!1)});Ot.xlinkHref=new nn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ot[t]=new nn(t,1,!1,t.toLowerCase(),null,!0,!0)});function wy(t,e,n,r){var i=Ot.hasOwnProperty(e)?Ot[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(YA(e,n,i,r)&&(n=null),r||i===null?QA(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Kr=aT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Hu=Symbol.for("react.element"),eo=Symbol.for("react.portal"),to=Symbol.for("react.fragment"),Ey=Symbol.for("react.strict_mode"),Tm=Symbol.for("react.profiler"),uT=Symbol.for("react.provider"),cT=Symbol.for("react.context"),Ty=Symbol.for("react.forward_ref"),Sm=Symbol.for("react.suspense"),Im=Symbol.for("react.suspense_list"),Sy=Symbol.for("react.memo"),ni=Symbol.for("react.lazy"),hT=Symbol.for("react.offscreen"),f0=Symbol.iterator;function va(t){return t===null||typeof t!="object"?null:(t=f0&&t[f0]||t["@@iterator"],typeof t=="function"?t:null)}var Qe=Object.assign,sp;function La(t){if(sp===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);sp=e&&e[1]||""}return`
`+sp+t}var op=!1;function ap(t,e){if(!t||op)return"";op=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{op=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?La(t):""}function JA(t){switch(t.tag){case 5:return La(t.type);case 16:return La("Lazy");case 13:return La("Suspense");case 19:return La("SuspenseList");case 0:case 2:case 15:return t=ap(t.type,!1),t;case 11:return t=ap(t.type.render,!1),t;case 1:return t=ap(t.type,!0),t;default:return""}}function km(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case to:return"Fragment";case eo:return"Portal";case Tm:return"Profiler";case Ey:return"StrictMode";case Sm:return"Suspense";case Im:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case cT:return(t.displayName||"Context")+".Consumer";case uT:return(t._context.displayName||"Context")+".Provider";case Ty:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Sy:return e=t.displayName||null,e!==null?e:km(t.type)||"Memo";case ni:e=t._payload,t=t._init;try{return km(t(e))}catch{}}return null}function ZA(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return km(e);case 8:return e===Ey?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Pi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function dT(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function eP(t){var e=dT(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Gu(t){t._valueTracker||(t._valueTracker=eP(t))}function fT(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=dT(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Qc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Cm(t,e){var n=e.checked;return Qe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function p0(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Pi(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function pT(t,e){e=e.checked,e!=null&&wy(t,"checked",e,!1)}function Rm(t,e){pT(t,e);var n=Pi(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?xm(t,e.type,n):e.hasOwnProperty("defaultValue")&&xm(t,e.type,Pi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function m0(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function xm(t,e,n){(e!=="number"||Qc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ma=Array.isArray;function vo(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Pi(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Am(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(V(91));return Qe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function g0(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(V(92));if(Ma(n)){if(1<n.length)throw Error(V(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Pi(n)}}function mT(t,e){var n=Pi(e.value),r=Pi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function y0(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function gT(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Pm(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?gT(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ku,yT=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ku=Ku||document.createElement("div"),Ku.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ku.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function yl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ya={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},tP=["Webkit","ms","Moz","O"];Object.keys(Ya).forEach(function(t){tP.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ya[e]=Ya[t]})});function vT(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ya.hasOwnProperty(t)&&Ya[t]?(""+e).trim():e+"px"}function _T(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=vT(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var nP=Qe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function bm(t,e){if(e){if(nP[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(V(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(V(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(V(61))}if(e.style!=null&&typeof e.style!="object")throw Error(V(62))}}function Nm(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Dm=null;function Iy(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Om=null,_o=null,wo=null;function v0(t){if(t=uu(t)){if(typeof Om!="function")throw Error(V(280));var e=t.stateNode;e&&(e=xd(e),Om(t.stateNode,t.type,e))}}function wT(t){_o?wo?wo.push(t):wo=[t]:_o=t}function ET(){if(_o){var t=_o,e=wo;if(wo=_o=null,v0(t),e)for(t=0;t<e.length;t++)v0(e[t])}}function TT(t,e){return t(e)}function ST(){}var lp=!1;function IT(t,e,n){if(lp)return t(e,n);lp=!0;try{return TT(t,e,n)}finally{lp=!1,(_o!==null||wo!==null)&&(ST(),ET())}}function vl(t,e){var n=t.stateNode;if(n===null)return null;var r=xd(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(V(231,e,typeof n));return n}var Lm=!1;if(Vr)try{var _a={};Object.defineProperty(_a,"passive",{get:function(){Lm=!0}}),window.addEventListener("test",_a,_a),window.removeEventListener("test",_a,_a)}catch{Lm=!1}function rP(t,e,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var Ja=!1,Xc=null,Yc=!1,Mm=null,iP={onError:function(t){Ja=!0,Xc=t}};function sP(t,e,n,r,i,s,o,a,l){Ja=!1,Xc=null,rP.apply(iP,arguments)}function oP(t,e,n,r,i,s,o,a,l){if(sP.apply(this,arguments),Ja){if(Ja){var u=Xc;Ja=!1,Xc=null}else throw Error(V(198));Yc||(Yc=!0,Mm=u)}}function Ds(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function kT(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function _0(t){if(Ds(t)!==t)throw Error(V(188))}function aP(t){var e=t.alternate;if(!e){if(e=Ds(t),e===null)throw Error(V(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return _0(i),t;if(s===r)return _0(i),e;s=s.sibling}throw Error(V(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(V(189))}}if(n.alternate!==r)throw Error(V(190))}if(n.tag!==3)throw Error(V(188));return n.stateNode.current===n?t:e}function CT(t){return t=aP(t),t!==null?RT(t):null}function RT(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=RT(t);if(e!==null)return e;t=t.sibling}return null}var xT=gn.unstable_scheduleCallback,w0=gn.unstable_cancelCallback,lP=gn.unstable_shouldYield,uP=gn.unstable_requestPaint,ot=gn.unstable_now,cP=gn.unstable_getCurrentPriorityLevel,ky=gn.unstable_ImmediatePriority,AT=gn.unstable_UserBlockingPriority,Jc=gn.unstable_NormalPriority,hP=gn.unstable_LowPriority,PT=gn.unstable_IdlePriority,Id=null,or=null;function dP(t){if(or&&typeof or.onCommitFiberRoot=="function")try{or.onCommitFiberRoot(Id,t,void 0,(t.current.flags&128)===128)}catch{}}var Wn=Math.clz32?Math.clz32:mP,fP=Math.log,pP=Math.LN2;function mP(t){return t>>>=0,t===0?32:31-(fP(t)/pP|0)|0}var Qu=64,Xu=4194304;function Va(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Zc(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Va(a):(s&=o,s!==0&&(r=Va(s)))}else o=n&~i,o!==0?r=Va(o):s!==0&&(r=Va(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Wn(e),i=1<<n,r|=t[n],e&=~i;return r}function gP(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yP(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Wn(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=gP(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Vm(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function bT(){var t=Qu;return Qu<<=1,!(Qu&4194240)&&(Qu=64),t}function up(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function au(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Wn(e),t[e]=n}function vP(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Wn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Cy(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Wn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var ke=0;function NT(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var DT,Ry,OT,LT,MT,jm=!1,Yu=[],yi=null,vi=null,_i=null,_l=new Map,wl=new Map,ii=[],_P="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function E0(t,e){switch(t){case"focusin":case"focusout":yi=null;break;case"dragenter":case"dragleave":vi=null;break;case"mouseover":case"mouseout":_i=null;break;case"pointerover":case"pointerout":_l.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":wl.delete(e.pointerId)}}function wa(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=uu(e),e!==null&&Ry(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function wP(t,e,n,r,i){switch(e){case"focusin":return yi=wa(yi,t,e,n,r,i),!0;case"dragenter":return vi=wa(vi,t,e,n,r,i),!0;case"mouseover":return _i=wa(_i,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return _l.set(s,wa(_l.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,wl.set(s,wa(wl.get(s)||null,t,e,n,r,i)),!0}return!1}function VT(t){var e=Zi(t.target);if(e!==null){var n=Ds(e);if(n!==null){if(e=n.tag,e===13){if(e=kT(n),e!==null){t.blockedOn=e,MT(t.priority,function(){OT(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ic(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Fm(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Dm=r,n.target.dispatchEvent(r),Dm=null}else return e=uu(n),e!==null&&Ry(e),t.blockedOn=n,!1;e.shift()}return!0}function T0(t,e,n){Ic(t)&&n.delete(e)}function EP(){jm=!1,yi!==null&&Ic(yi)&&(yi=null),vi!==null&&Ic(vi)&&(vi=null),_i!==null&&Ic(_i)&&(_i=null),_l.forEach(T0),wl.forEach(T0)}function Ea(t,e){t.blockedOn===e&&(t.blockedOn=null,jm||(jm=!0,gn.unstable_scheduleCallback(gn.unstable_NormalPriority,EP)))}function El(t){function e(i){return Ea(i,t)}if(0<Yu.length){Ea(Yu[0],t);for(var n=1;n<Yu.length;n++){var r=Yu[n];r.blockedOn===t&&(r.blockedOn=null)}}for(yi!==null&&Ea(yi,t),vi!==null&&Ea(vi,t),_i!==null&&Ea(_i,t),_l.forEach(e),wl.forEach(e),n=0;n<ii.length;n++)r=ii[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ii.length&&(n=ii[0],n.blockedOn===null);)VT(n),n.blockedOn===null&&ii.shift()}var Eo=Kr.ReactCurrentBatchConfig,eh=!0;function TP(t,e,n,r){var i=ke,s=Eo.transition;Eo.transition=null;try{ke=1,xy(t,e,n,r)}finally{ke=i,Eo.transition=s}}function SP(t,e,n,r){var i=ke,s=Eo.transition;Eo.transition=null;try{ke=4,xy(t,e,n,r)}finally{ke=i,Eo.transition=s}}function xy(t,e,n,r){if(eh){var i=Fm(t,e,n,r);if(i===null)_p(t,e,r,th,n),E0(t,r);else if(wP(i,t,e,n,r))r.stopPropagation();else if(E0(t,r),e&4&&-1<_P.indexOf(t)){for(;i!==null;){var s=uu(i);if(s!==null&&DT(s),s=Fm(t,e,n,r),s===null&&_p(t,e,r,th,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else _p(t,e,r,null,n)}}var th=null;function Fm(t,e,n,r){if(th=null,t=Iy(r),t=Zi(t),t!==null)if(e=Ds(t),e===null)t=null;else if(n=e.tag,n===13){if(t=kT(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return th=t,null}function jT(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(cP()){case ky:return 1;case AT:return 4;case Jc:case hP:return 16;case PT:return 536870912;default:return 16}default:return 16}}var di=null,Ay=null,kc=null;function FT(){if(kc)return kc;var t,e=Ay,n=e.length,r,i="value"in di?di.value:di.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return kc=i.slice(t,1<r?1-r:void 0)}function Cc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ju(){return!0}function S0(){return!1}function wn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Ju:S0,this.isPropagationStopped=S0,this}return Qe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ju)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ju)},persist:function(){},isPersistent:Ju}),e}var ea={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Py=wn(ea),lu=Qe({},ea,{view:0,detail:0}),IP=wn(lu),cp,hp,Ta,kd=Qe({},lu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:by,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ta&&(Ta&&t.type==="mousemove"?(cp=t.screenX-Ta.screenX,hp=t.screenY-Ta.screenY):hp=cp=0,Ta=t),cp)},movementY:function(t){return"movementY"in t?t.movementY:hp}}),I0=wn(kd),kP=Qe({},kd,{dataTransfer:0}),CP=wn(kP),RP=Qe({},lu,{relatedTarget:0}),dp=wn(RP),xP=Qe({},ea,{animationName:0,elapsedTime:0,pseudoElement:0}),AP=wn(xP),PP=Qe({},ea,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),bP=wn(PP),NP=Qe({},ea,{data:0}),k0=wn(NP),DP={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},OP={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},LP={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function MP(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=LP[t])?!!e[t]:!1}function by(){return MP}var VP=Qe({},lu,{key:function(t){if(t.key){var e=DP[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Cc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?OP[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:by,charCode:function(t){return t.type==="keypress"?Cc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Cc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),jP=wn(VP),FP=Qe({},kd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),C0=wn(FP),$P=Qe({},lu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:by}),UP=wn($P),BP=Qe({},ea,{propertyName:0,elapsedTime:0,pseudoElement:0}),zP=wn(BP),WP=Qe({},kd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),qP=wn(WP),HP=[9,13,27,32],Ny=Vr&&"CompositionEvent"in window,Za=null;Vr&&"documentMode"in document&&(Za=document.documentMode);var GP=Vr&&"TextEvent"in window&&!Za,$T=Vr&&(!Ny||Za&&8<Za&&11>=Za),R0=String.fromCharCode(32),x0=!1;function UT(t,e){switch(t){case"keyup":return HP.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function BT(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var no=!1;function KP(t,e){switch(t){case"compositionend":return BT(e);case"keypress":return e.which!==32?null:(x0=!0,R0);case"textInput":return t=e.data,t===R0&&x0?null:t;default:return null}}function QP(t,e){if(no)return t==="compositionend"||!Ny&&UT(t,e)?(t=FT(),kc=Ay=di=null,no=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return $T&&e.locale!=="ko"?null:e.data;default:return null}}var XP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function A0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!XP[t.type]:e==="textarea"}function zT(t,e,n,r){wT(r),e=nh(e,"onChange"),0<e.length&&(n=new Py("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var el=null,Tl=null;function YP(t){eS(t,0)}function Cd(t){var e=so(t);if(fT(e))return t}function JP(t,e){if(t==="change")return e}var WT=!1;if(Vr){var fp;if(Vr){var pp="oninput"in document;if(!pp){var P0=document.createElement("div");P0.setAttribute("oninput","return;"),pp=typeof P0.oninput=="function"}fp=pp}else fp=!1;WT=fp&&(!document.documentMode||9<document.documentMode)}function b0(){el&&(el.detachEvent("onpropertychange",qT),Tl=el=null)}function qT(t){if(t.propertyName==="value"&&Cd(Tl)){var e=[];zT(e,Tl,t,Iy(t)),IT(YP,e)}}function ZP(t,e,n){t==="focusin"?(b0(),el=e,Tl=n,el.attachEvent("onpropertychange",qT)):t==="focusout"&&b0()}function eb(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Cd(Tl)}function tb(t,e){if(t==="click")return Cd(e)}function nb(t,e){if(t==="input"||t==="change")return Cd(e)}function rb(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Hn=typeof Object.is=="function"?Object.is:rb;function Sl(t,e){if(Hn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Em.call(e,i)||!Hn(t[i],e[i]))return!1}return!0}function N0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function D0(t,e){var n=N0(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=N0(n)}}function HT(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?HT(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function GT(){for(var t=window,e=Qc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Qc(t.document)}return e}function Dy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function ib(t){var e=GT(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&HT(n.ownerDocument.documentElement,n)){if(r!==null&&Dy(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=D0(n,s);var o=D0(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var sb=Vr&&"documentMode"in document&&11>=document.documentMode,ro=null,$m=null,tl=null,Um=!1;function O0(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Um||ro==null||ro!==Qc(r)||(r=ro,"selectionStart"in r&&Dy(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),tl&&Sl(tl,r)||(tl=r,r=nh($m,"onSelect"),0<r.length&&(e=new Py("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ro)))}function Zu(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var io={animationend:Zu("Animation","AnimationEnd"),animationiteration:Zu("Animation","AnimationIteration"),animationstart:Zu("Animation","AnimationStart"),transitionend:Zu("Transition","TransitionEnd")},mp={},KT={};Vr&&(KT=document.createElement("div").style,"AnimationEvent"in window||(delete io.animationend.animation,delete io.animationiteration.animation,delete io.animationstart.animation),"TransitionEvent"in window||delete io.transitionend.transition);function Rd(t){if(mp[t])return mp[t];if(!io[t])return t;var e=io[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in KT)return mp[t]=e[n];return t}var QT=Rd("animationend"),XT=Rd("animationiteration"),YT=Rd("animationstart"),JT=Rd("transitionend"),ZT=new Map,L0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Fi(t,e){ZT.set(t,e),Ns(e,[t])}for(var gp=0;gp<L0.length;gp++){var yp=L0[gp],ob=yp.toLowerCase(),ab=yp[0].toUpperCase()+yp.slice(1);Fi(ob,"on"+ab)}Fi(QT,"onAnimationEnd");Fi(XT,"onAnimationIteration");Fi(YT,"onAnimationStart");Fi("dblclick","onDoubleClick");Fi("focusin","onFocus");Fi("focusout","onBlur");Fi(JT,"onTransitionEnd");Do("onMouseEnter",["mouseout","mouseover"]);Do("onMouseLeave",["mouseout","mouseover"]);Do("onPointerEnter",["pointerout","pointerover"]);Do("onPointerLeave",["pointerout","pointerover"]);Ns("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ns("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ns("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ns("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ns("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ns("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ja="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),lb=new Set("cancel close invalid load scroll toggle".split(" ").concat(ja));function M0(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,oP(r,e,void 0,t),t.currentTarget=null}function eS(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;M0(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;M0(i,a,u),s=l}}}if(Yc)throw t=Mm,Yc=!1,Mm=null,t}function Me(t,e){var n=e[Hm];n===void 0&&(n=e[Hm]=new Set);var r=t+"__bubble";n.has(r)||(tS(e,t,2,!1),n.add(r))}function vp(t,e,n){var r=0;e&&(r|=4),tS(n,t,r,e)}var ec="_reactListening"+Math.random().toString(36).slice(2);function Il(t){if(!t[ec]){t[ec]=!0,lT.forEach(function(n){n!=="selectionchange"&&(lb.has(n)||vp(n,!1,t),vp(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ec]||(e[ec]=!0,vp("selectionchange",!1,e))}}function tS(t,e,n,r){switch(jT(e)){case 1:var i=TP;break;case 4:i=SP;break;default:i=xy}n=i.bind(null,e,n,t),i=void 0,!Lm||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function _p(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Zi(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}IT(function(){var u=s,c=Iy(n),d=[];e:{var h=ZT.get(t);if(h!==void 0){var f=Py,g=t;switch(t){case"keypress":if(Cc(n)===0)break e;case"keydown":case"keyup":f=jP;break;case"focusin":g="focus",f=dp;break;case"focusout":g="blur",f=dp;break;case"beforeblur":case"afterblur":f=dp;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=I0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=CP;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=UP;break;case QT:case XT:case YT:f=AP;break;case JT:f=zP;break;case"scroll":f=IP;break;case"wheel":f=qP;break;case"copy":case"cut":case"paste":f=bP;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=C0}var w=(e&4)!==0,E=!w&&t==="scroll",v=w?h!==null?h+"Capture":null:h;w=[];for(var p=u,_;p!==null;){_=p;var y=_.stateNode;if(_.tag===5&&y!==null&&(_=y,v!==null&&(y=vl(p,v),y!=null&&w.push(kl(p,y,_)))),E)break;p=p.return}0<w.length&&(h=new f(h,g,null,n,c),d.push({event:h,listeners:w}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",h&&n!==Dm&&(g=n.relatedTarget||n.fromElement)&&(Zi(g)||g[jr]))break e;if((f||h)&&(h=c.window===c?c:(h=c.ownerDocument)?h.defaultView||h.parentWindow:window,f?(g=n.relatedTarget||n.toElement,f=u,g=g?Zi(g):null,g!==null&&(E=Ds(g),g!==E||g.tag!==5&&g.tag!==6)&&(g=null)):(f=null,g=u),f!==g)){if(w=I0,y="onMouseLeave",v="onMouseEnter",p="mouse",(t==="pointerout"||t==="pointerover")&&(w=C0,y="onPointerLeave",v="onPointerEnter",p="pointer"),E=f==null?h:so(f),_=g==null?h:so(g),h=new w(y,p+"leave",f,n,c),h.target=E,h.relatedTarget=_,y=null,Zi(c)===u&&(w=new w(v,p+"enter",g,n,c),w.target=_,w.relatedTarget=E,y=w),E=y,f&&g)t:{for(w=f,v=g,p=0,_=w;_;_=qs(_))p++;for(_=0,y=v;y;y=qs(y))_++;for(;0<p-_;)w=qs(w),p--;for(;0<_-p;)v=qs(v),_--;for(;p--;){if(w===v||v!==null&&w===v.alternate)break t;w=qs(w),v=qs(v)}w=null}else w=null;f!==null&&V0(d,h,f,w,!1),g!==null&&E!==null&&V0(d,E,g,w,!0)}}e:{if(h=u?so(u):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var S=JP;else if(A0(h))if(WT)S=nb;else{S=eb;var C=ZP}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(S=tb);if(S&&(S=S(t,u))){zT(d,S,n,c);break e}C&&C(t,h,u),t==="focusout"&&(C=h._wrapperState)&&C.controlled&&h.type==="number"&&xm(h,"number",h.value)}switch(C=u?so(u):window,t){case"focusin":(A0(C)||C.contentEditable==="true")&&(ro=C,$m=u,tl=null);break;case"focusout":tl=$m=ro=null;break;case"mousedown":Um=!0;break;case"contextmenu":case"mouseup":case"dragend":Um=!1,O0(d,n,c);break;case"selectionchange":if(sb)break;case"keydown":case"keyup":O0(d,n,c)}var A;if(Ny)e:{switch(t){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else no?UT(t,n)&&(P="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(P="onCompositionStart");P&&($T&&n.locale!=="ko"&&(no||P!=="onCompositionStart"?P==="onCompositionEnd"&&no&&(A=FT()):(di=c,Ay="value"in di?di.value:di.textContent,no=!0)),C=nh(u,P),0<C.length&&(P=new k0(P,t,null,n,c),d.push({event:P,listeners:C}),A?P.data=A:(A=BT(n),A!==null&&(P.data=A)))),(A=GP?KP(t,n):QP(t,n))&&(u=nh(u,"onBeforeInput"),0<u.length&&(c=new k0("onBeforeInput","beforeinput",null,n,c),d.push({event:c,listeners:u}),c.data=A))}eS(d,e)})}function kl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function nh(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=vl(t,n),s!=null&&r.unshift(kl(t,s,i)),s=vl(t,e),s!=null&&r.push(kl(t,s,i))),t=t.return}return r}function qs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function V0(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=vl(n,s),l!=null&&o.unshift(kl(n,l,a))):i||(l=vl(n,s),l!=null&&o.push(kl(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var ub=/\r\n?/g,cb=/\u0000|\uFFFD/g;function j0(t){return(typeof t=="string"?t:""+t).replace(ub,`
`).replace(cb,"")}function tc(t,e,n){if(e=j0(e),j0(t)!==e&&n)throw Error(V(425))}function rh(){}var Bm=null,zm=null;function Wm(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var qm=typeof setTimeout=="function"?setTimeout:void 0,hb=typeof clearTimeout=="function"?clearTimeout:void 0,F0=typeof Promise=="function"?Promise:void 0,db=typeof queueMicrotask=="function"?queueMicrotask:typeof F0<"u"?function(t){return F0.resolve(null).then(t).catch(fb)}:qm;function fb(t){setTimeout(function(){throw t})}function wp(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),El(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);El(e)}function wi(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function $0(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ta=Math.random().toString(36).slice(2),er="__reactFiber$"+ta,Cl="__reactProps$"+ta,jr="__reactContainer$"+ta,Hm="__reactEvents$"+ta,pb="__reactListeners$"+ta,mb="__reactHandles$"+ta;function Zi(t){var e=t[er];if(e)return e;for(var n=t.parentNode;n;){if(e=n[jr]||n[er]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=$0(t);t!==null;){if(n=t[er])return n;t=$0(t)}return e}t=n,n=t.parentNode}return null}function uu(t){return t=t[er]||t[jr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function so(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(V(33))}function xd(t){return t[Cl]||null}var Gm=[],oo=-1;function $i(t){return{current:t}}function Fe(t){0>oo||(t.current=Gm[oo],Gm[oo]=null,oo--)}function De(t,e){oo++,Gm[oo]=t.current,t.current=e}var bi={},Wt=$i(bi),an=$i(!1),fs=bi;function Oo(t,e){var n=t.type.contextTypes;if(!n)return bi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function ln(t){return t=t.childContextTypes,t!=null}function ih(){Fe(an),Fe(Wt)}function U0(t,e,n){if(Wt.current!==bi)throw Error(V(168));De(Wt,e),De(an,n)}function nS(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(V(108,ZA(t)||"Unknown",i));return Qe({},n,r)}function sh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||bi,fs=Wt.current,De(Wt,t),De(an,an.current),!0}function B0(t,e,n){var r=t.stateNode;if(!r)throw Error(V(169));n?(t=nS(t,e,fs),r.__reactInternalMemoizedMergedChildContext=t,Fe(an),Fe(Wt),De(Wt,t)):Fe(an),De(an,n)}var Rr=null,Ad=!1,Ep=!1;function rS(t){Rr===null?Rr=[t]:Rr.push(t)}function gb(t){Ad=!0,rS(t)}function Ui(){if(!Ep&&Rr!==null){Ep=!0;var t=0,e=ke;try{var n=Rr;for(ke=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Rr=null,Ad=!1}catch(i){throw Rr!==null&&(Rr=Rr.slice(t+1)),xT(ky,Ui),i}finally{ke=e,Ep=!1}}return null}var ao=[],lo=0,oh=null,ah=0,kn=[],Cn=0,ps=null,Ar=1,Pr="";function Qi(t,e){ao[lo++]=ah,ao[lo++]=oh,oh=t,ah=e}function iS(t,e,n){kn[Cn++]=Ar,kn[Cn++]=Pr,kn[Cn++]=ps,ps=t;var r=Ar;t=Pr;var i=32-Wn(r)-1;r&=~(1<<i),n+=1;var s=32-Wn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Ar=1<<32-Wn(e)+i|n<<i|r,Pr=s+t}else Ar=1<<s|n<<i|r,Pr=t}function Oy(t){t.return!==null&&(Qi(t,1),iS(t,1,0))}function Ly(t){for(;t===oh;)oh=ao[--lo],ao[lo]=null,ah=ao[--lo],ao[lo]=null;for(;t===ps;)ps=kn[--Cn],kn[Cn]=null,Pr=kn[--Cn],kn[Cn]=null,Ar=kn[--Cn],kn[Cn]=null}var mn=null,dn=null,We=!1,Un=null;function sS(t,e){var n=An(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function z0(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,mn=t,dn=wi(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,mn=t,dn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ps!==null?{id:Ar,overflow:Pr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=An(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,mn=t,dn=null,!0):!1;default:return!1}}function Km(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Qm(t){if(We){var e=dn;if(e){var n=e;if(!z0(t,e)){if(Km(t))throw Error(V(418));e=wi(n.nextSibling);var r=mn;e&&z0(t,e)?sS(r,n):(t.flags=t.flags&-4097|2,We=!1,mn=t)}}else{if(Km(t))throw Error(V(418));t.flags=t.flags&-4097|2,We=!1,mn=t}}}function W0(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;mn=t}function nc(t){if(t!==mn)return!1;if(!We)return W0(t),We=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Wm(t.type,t.memoizedProps)),e&&(e=dn)){if(Km(t))throw oS(),Error(V(418));for(;e;)sS(t,e),e=wi(e.nextSibling)}if(W0(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(V(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){dn=wi(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}dn=null}}else dn=mn?wi(t.stateNode.nextSibling):null;return!0}function oS(){for(var t=dn;t;)t=wi(t.nextSibling)}function Lo(){dn=mn=null,We=!1}function My(t){Un===null?Un=[t]:Un.push(t)}var yb=Kr.ReactCurrentBatchConfig;function jn(t,e){if(t&&t.defaultProps){e=Qe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var lh=$i(null),uh=null,uo=null,Vy=null;function jy(){Vy=uo=uh=null}function Fy(t){var e=lh.current;Fe(lh),t._currentValue=e}function Xm(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function To(t,e){uh=t,Vy=uo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(on=!0),t.firstContext=null)}function bn(t){var e=t._currentValue;if(Vy!==t)if(t={context:t,memoizedValue:e,next:null},uo===null){if(uh===null)throw Error(V(308));uo=t,uh.dependencies={lanes:0,firstContext:t}}else uo=uo.next=t;return e}var es=null;function $y(t){es===null?es=[t]:es.push(t)}function aS(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,$y(e)):(n.next=i.next,i.next=n),e.interleaved=n,Fr(t,r)}function Fr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ri=!1;function Uy(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lS(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Or(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ei(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,we&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Fr(t,n)}return i=r.interleaved,i===null?(e.next=e,$y(r)):(e.next=i.next,i.next=e),r.interleaved=e,Fr(t,n)}function Rc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Cy(t,n)}}function q0(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ch(t,e,n,r){var i=t.updateQueue;ri=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var c=t.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;o=0,c=u=l=null,a=s;do{var h=a.lane,f=a.eventTime;if((r&h)===h){c!==null&&(c=c.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=t,w=a;switch(h=e,f=n,w.tag){case 1:if(g=w.payload,typeof g=="function"){d=g.call(f,d,h);break e}d=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=w.payload,h=typeof g=="function"?g.call(f,d,h):g,h==null)break e;d=Qe({},d,h);break e;case 2:ri=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=i.effects,h===null?i.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=f,l=d):c=c.next=f,o|=h;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;h=a,a=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(1);if(c===null&&(l=d),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);gs|=o,t.lanes=o,t.memoizedState=d}}function H0(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(V(191,i));i.call(r)}}}var uS=new aT.Component().refs;function Ym(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Qe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Pd={isMounted:function(t){return(t=t._reactInternals)?Ds(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Zt(),i=Si(t),s=Or(r,i);s.payload=e,n!=null&&(s.callback=n),e=Ei(t,s,i),e!==null&&(qn(e,t,i,r),Rc(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Zt(),i=Si(t),s=Or(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Ei(t,s,i),e!==null&&(qn(e,t,i,r),Rc(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Zt(),r=Si(t),i=Or(n,r);i.tag=2,e!=null&&(i.callback=e),e=Ei(t,i,r),e!==null&&(qn(e,t,r,n),Rc(e,t,r))}};function G0(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Sl(n,r)||!Sl(i,s):!0}function cS(t,e,n){var r=!1,i=bi,s=e.contextType;return typeof s=="object"&&s!==null?s=bn(s):(i=ln(e)?fs:Wt.current,r=e.contextTypes,s=(r=r!=null)?Oo(t,i):bi),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Pd,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function K0(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Pd.enqueueReplaceState(e,e.state,null)}function Jm(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=uS,Uy(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=bn(s):(s=ln(e)?fs:Wt.current,i.context=Oo(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Ym(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Pd.enqueueReplaceState(i,i.state,null),ch(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Sa(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(V(309));var r=n.stateNode}if(!r)throw Error(V(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;a===uS&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(V(284));if(!n._owner)throw Error(V(290,t))}return t}function rc(t,e){throw t=Object.prototype.toString.call(e),Error(V(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Q0(t){var e=t._init;return e(t._payload)}function hS(t){function e(v,p){if(t){var _=v.deletions;_===null?(v.deletions=[p],v.flags|=16):_.push(p)}}function n(v,p){if(!t)return null;for(;p!==null;)e(v,p),p=p.sibling;return null}function r(v,p){for(v=new Map;p!==null;)p.key!==null?v.set(p.key,p):v.set(p.index,p),p=p.sibling;return v}function i(v,p){return v=Ii(v,p),v.index=0,v.sibling=null,v}function s(v,p,_){return v.index=_,t?(_=v.alternate,_!==null?(_=_.index,_<p?(v.flags|=2,p):_):(v.flags|=2,p)):(v.flags|=1048576,p)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,p,_,y){return p===null||p.tag!==6?(p=xp(_,v.mode,y),p.return=v,p):(p=i(p,_),p.return=v,p)}function l(v,p,_,y){var S=_.type;return S===to?c(v,p,_.props.children,y,_.key):p!==null&&(p.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===ni&&Q0(S)===p.type)?(y=i(p,_.props),y.ref=Sa(v,p,_),y.return=v,y):(y=Dc(_.type,_.key,_.props,null,v.mode,y),y.ref=Sa(v,p,_),y.return=v,y)}function u(v,p,_,y){return p===null||p.tag!==4||p.stateNode.containerInfo!==_.containerInfo||p.stateNode.implementation!==_.implementation?(p=Ap(_,v.mode,y),p.return=v,p):(p=i(p,_.children||[]),p.return=v,p)}function c(v,p,_,y,S){return p===null||p.tag!==7?(p=us(_,v.mode,y,S),p.return=v,p):(p=i(p,_),p.return=v,p)}function d(v,p,_){if(typeof p=="string"&&p!==""||typeof p=="number")return p=xp(""+p,v.mode,_),p.return=v,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case Hu:return _=Dc(p.type,p.key,p.props,null,v.mode,_),_.ref=Sa(v,null,p),_.return=v,_;case eo:return p=Ap(p,v.mode,_),p.return=v,p;case ni:var y=p._init;return d(v,y(p._payload),_)}if(Ma(p)||va(p))return p=us(p,v.mode,_,null),p.return=v,p;rc(v,p)}return null}function h(v,p,_,y){var S=p!==null?p.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return S!==null?null:a(v,p,""+_,y);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Hu:return _.key===S?l(v,p,_,y):null;case eo:return _.key===S?u(v,p,_,y):null;case ni:return S=_._init,h(v,p,S(_._payload),y)}if(Ma(_)||va(_))return S!==null?null:c(v,p,_,y,null);rc(v,_)}return null}function f(v,p,_,y,S){if(typeof y=="string"&&y!==""||typeof y=="number")return v=v.get(_)||null,a(p,v,""+y,S);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Hu:return v=v.get(y.key===null?_:y.key)||null,l(p,v,y,S);case eo:return v=v.get(y.key===null?_:y.key)||null,u(p,v,y,S);case ni:var C=y._init;return f(v,p,_,C(y._payload),S)}if(Ma(y)||va(y))return v=v.get(_)||null,c(p,v,y,S,null);rc(p,y)}return null}function g(v,p,_,y){for(var S=null,C=null,A=p,P=p=0,O=null;A!==null&&P<_.length;P++){A.index>P?(O=A,A=null):O=A.sibling;var M=h(v,A,_[P],y);if(M===null){A===null&&(A=O);break}t&&A&&M.alternate===null&&e(v,A),p=s(M,p,P),C===null?S=M:C.sibling=M,C=M,A=O}if(P===_.length)return n(v,A),We&&Qi(v,P),S;if(A===null){for(;P<_.length;P++)A=d(v,_[P],y),A!==null&&(p=s(A,p,P),C===null?S=A:C.sibling=A,C=A);return We&&Qi(v,P),S}for(A=r(v,A);P<_.length;P++)O=f(A,v,P,_[P],y),O!==null&&(t&&O.alternate!==null&&A.delete(O.key===null?P:O.key),p=s(O,p,P),C===null?S=O:C.sibling=O,C=O);return t&&A.forEach(function(le){return e(v,le)}),We&&Qi(v,P),S}function w(v,p,_,y){var S=va(_);if(typeof S!="function")throw Error(V(150));if(_=S.call(_),_==null)throw Error(V(151));for(var C=S=null,A=p,P=p=0,O=null,M=_.next();A!==null&&!M.done;P++,M=_.next()){A.index>P?(O=A,A=null):O=A.sibling;var le=h(v,A,M.value,y);if(le===null){A===null&&(A=O);break}t&&A&&le.alternate===null&&e(v,A),p=s(le,p,P),C===null?S=le:C.sibling=le,C=le,A=O}if(M.done)return n(v,A),We&&Qi(v,P),S;if(A===null){for(;!M.done;P++,M=_.next())M=d(v,M.value,y),M!==null&&(p=s(M,p,P),C===null?S=M:C.sibling=M,C=M);return We&&Qi(v,P),S}for(A=r(v,A);!M.done;P++,M=_.next())M=f(A,v,P,M.value,y),M!==null&&(t&&M.alternate!==null&&A.delete(M.key===null?P:M.key),p=s(M,p,P),C===null?S=M:C.sibling=M,C=M);return t&&A.forEach(function(Q){return e(v,Q)}),We&&Qi(v,P),S}function E(v,p,_,y){if(typeof _=="object"&&_!==null&&_.type===to&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case Hu:e:{for(var S=_.key,C=p;C!==null;){if(C.key===S){if(S=_.type,S===to){if(C.tag===7){n(v,C.sibling),p=i(C,_.props.children),p.return=v,v=p;break e}}else if(C.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===ni&&Q0(S)===C.type){n(v,C.sibling),p=i(C,_.props),p.ref=Sa(v,C,_),p.return=v,v=p;break e}n(v,C);break}else e(v,C);C=C.sibling}_.type===to?(p=us(_.props.children,v.mode,y,_.key),p.return=v,v=p):(y=Dc(_.type,_.key,_.props,null,v.mode,y),y.ref=Sa(v,p,_),y.return=v,v=y)}return o(v);case eo:e:{for(C=_.key;p!==null;){if(p.key===C)if(p.tag===4&&p.stateNode.containerInfo===_.containerInfo&&p.stateNode.implementation===_.implementation){n(v,p.sibling),p=i(p,_.children||[]),p.return=v,v=p;break e}else{n(v,p);break}else e(v,p);p=p.sibling}p=Ap(_,v.mode,y),p.return=v,v=p}return o(v);case ni:return C=_._init,E(v,p,C(_._payload),y)}if(Ma(_))return g(v,p,_,y);if(va(_))return w(v,p,_,y);rc(v,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,p!==null&&p.tag===6?(n(v,p.sibling),p=i(p,_),p.return=v,v=p):(n(v,p),p=xp(_,v.mode,y),p.return=v,v=p),o(v)):n(v,p)}return E}var Mo=hS(!0),dS=hS(!1),cu={},ar=$i(cu),Rl=$i(cu),xl=$i(cu);function ts(t){if(t===cu)throw Error(V(174));return t}function By(t,e){switch(De(xl,e),De(Rl,t),De(ar,cu),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Pm(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Pm(e,t)}Fe(ar),De(ar,e)}function Vo(){Fe(ar),Fe(Rl),Fe(xl)}function fS(t){ts(xl.current);var e=ts(ar.current),n=Pm(e,t.type);e!==n&&(De(Rl,t),De(ar,n))}function zy(t){Rl.current===t&&(Fe(ar),Fe(Rl))}var Ge=$i(0);function hh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Tp=[];function Wy(){for(var t=0;t<Tp.length;t++)Tp[t]._workInProgressVersionPrimary=null;Tp.length=0}var xc=Kr.ReactCurrentDispatcher,Sp=Kr.ReactCurrentBatchConfig,ms=0,Ke=null,gt=null,wt=null,dh=!1,nl=!1,Al=0,vb=0;function Lt(){throw Error(V(321))}function qy(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Hn(t[n],e[n]))return!1;return!0}function Hy(t,e,n,r,i,s){if(ms=s,Ke=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,xc.current=t===null||t.memoizedState===null?Tb:Sb,t=n(r,i),nl){s=0;do{if(nl=!1,Al=0,25<=s)throw Error(V(301));s+=1,wt=gt=null,e.updateQueue=null,xc.current=Ib,t=n(r,i)}while(nl)}if(xc.current=fh,e=gt!==null&&gt.next!==null,ms=0,wt=gt=Ke=null,dh=!1,e)throw Error(V(300));return t}function Gy(){var t=Al!==0;return Al=0,t}function Zn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wt===null?Ke.memoizedState=wt=t:wt=wt.next=t,wt}function Nn(){if(gt===null){var t=Ke.alternate;t=t!==null?t.memoizedState:null}else t=gt.next;var e=wt===null?Ke.memoizedState:wt.next;if(e!==null)wt=e,gt=t;else{if(t===null)throw Error(V(310));gt=t,t={memoizedState:gt.memoizedState,baseState:gt.baseState,baseQueue:gt.baseQueue,queue:gt.queue,next:null},wt===null?Ke.memoizedState=wt=t:wt=wt.next=t}return wt}function Pl(t,e){return typeof e=="function"?e(t):e}function Ip(t){var e=Nn(),n=e.queue;if(n===null)throw Error(V(311));n.lastRenderedReducer=t;var r=gt,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var c=u.lane;if((ms&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,Ke.lanes|=c,gs|=c}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,Hn(r,e.memoizedState)||(on=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Ke.lanes|=s,gs|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function kp(t){var e=Nn(),n=e.queue;if(n===null)throw Error(V(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Hn(s,e.memoizedState)||(on=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function pS(){}function mS(t,e){var n=Ke,r=Nn(),i=e(),s=!Hn(r.memoizedState,i);if(s&&(r.memoizedState=i,on=!0),r=r.queue,Ky(vS.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||wt!==null&&wt.memoizedState.tag&1){if(n.flags|=2048,bl(9,yS.bind(null,n,r,i,e),void 0,null),Et===null)throw Error(V(349));ms&30||gS(n,e,i)}return i}function gS(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ke.updateQueue,e===null?(e={lastEffect:null,stores:null},Ke.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function yS(t,e,n,r){e.value=n,e.getSnapshot=r,_S(e)&&wS(t)}function vS(t,e,n){return n(function(){_S(e)&&wS(t)})}function _S(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Hn(t,n)}catch{return!0}}function wS(t){var e=Fr(t,1);e!==null&&qn(e,t,1,-1)}function X0(t){var e=Zn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Pl,lastRenderedState:t},e.queue=t,t=t.dispatch=Eb.bind(null,Ke,t),[e.memoizedState,t]}function bl(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ke.updateQueue,e===null?(e={lastEffect:null,stores:null},Ke.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function ES(){return Nn().memoizedState}function Ac(t,e,n,r){var i=Zn();Ke.flags|=t,i.memoizedState=bl(1|e,n,void 0,r===void 0?null:r)}function bd(t,e,n,r){var i=Nn();r=r===void 0?null:r;var s=void 0;if(gt!==null){var o=gt.memoizedState;if(s=o.destroy,r!==null&&qy(r,o.deps)){i.memoizedState=bl(e,n,s,r);return}}Ke.flags|=t,i.memoizedState=bl(1|e,n,s,r)}function Y0(t,e){return Ac(8390656,8,t,e)}function Ky(t,e){return bd(2048,8,t,e)}function TS(t,e){return bd(4,2,t,e)}function SS(t,e){return bd(4,4,t,e)}function IS(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function kS(t,e,n){return n=n!=null?n.concat([t]):null,bd(4,4,IS.bind(null,e,t),n)}function Qy(){}function CS(t,e){var n=Nn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&qy(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function RS(t,e){var n=Nn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&qy(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function xS(t,e,n){return ms&21?(Hn(n,e)||(n=bT(),Ke.lanes|=n,gs|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,on=!0),t.memoizedState=n)}function _b(t,e){var n=ke;ke=n!==0&&4>n?n:4,t(!0);var r=Sp.transition;Sp.transition={};try{t(!1),e()}finally{ke=n,Sp.transition=r}}function AS(){return Nn().memoizedState}function wb(t,e,n){var r=Si(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},PS(t))bS(e,n);else if(n=aS(t,e,n,r),n!==null){var i=Zt();qn(n,t,r,i),NS(n,e,r)}}function Eb(t,e,n){var r=Si(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(PS(t))bS(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Hn(a,o)){var l=e.interleaved;l===null?(i.next=i,$y(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=aS(t,e,i,r),n!==null&&(i=Zt(),qn(n,t,r,i),NS(n,e,r))}}function PS(t){var e=t.alternate;return t===Ke||e!==null&&e===Ke}function bS(t,e){nl=dh=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function NS(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Cy(t,n)}}var fh={readContext:bn,useCallback:Lt,useContext:Lt,useEffect:Lt,useImperativeHandle:Lt,useInsertionEffect:Lt,useLayoutEffect:Lt,useMemo:Lt,useReducer:Lt,useRef:Lt,useState:Lt,useDebugValue:Lt,useDeferredValue:Lt,useTransition:Lt,useMutableSource:Lt,useSyncExternalStore:Lt,useId:Lt,unstable_isNewReconciler:!1},Tb={readContext:bn,useCallback:function(t,e){return Zn().memoizedState=[t,e===void 0?null:e],t},useContext:bn,useEffect:Y0,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ac(4194308,4,IS.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ac(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ac(4,2,t,e)},useMemo:function(t,e){var n=Zn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Zn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=wb.bind(null,Ke,t),[r.memoizedState,t]},useRef:function(t){var e=Zn();return t={current:t},e.memoizedState=t},useState:X0,useDebugValue:Qy,useDeferredValue:function(t){return Zn().memoizedState=t},useTransition:function(){var t=X0(!1),e=t[0];return t=_b.bind(null,t[1]),Zn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ke,i=Zn();if(We){if(n===void 0)throw Error(V(407));n=n()}else{if(n=e(),Et===null)throw Error(V(349));ms&30||gS(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Y0(vS.bind(null,r,s,t),[t]),r.flags|=2048,bl(9,yS.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Zn(),e=Et.identifierPrefix;if(We){var n=Pr,r=Ar;n=(r&~(1<<32-Wn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Al++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=vb++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Sb={readContext:bn,useCallback:CS,useContext:bn,useEffect:Ky,useImperativeHandle:kS,useInsertionEffect:TS,useLayoutEffect:SS,useMemo:RS,useReducer:Ip,useRef:ES,useState:function(){return Ip(Pl)},useDebugValue:Qy,useDeferredValue:function(t){var e=Nn();return xS(e,gt.memoizedState,t)},useTransition:function(){var t=Ip(Pl)[0],e=Nn().memoizedState;return[t,e]},useMutableSource:pS,useSyncExternalStore:mS,useId:AS,unstable_isNewReconciler:!1},Ib={readContext:bn,useCallback:CS,useContext:bn,useEffect:Ky,useImperativeHandle:kS,useInsertionEffect:TS,useLayoutEffect:SS,useMemo:RS,useReducer:kp,useRef:ES,useState:function(){return kp(Pl)},useDebugValue:Qy,useDeferredValue:function(t){var e=Nn();return gt===null?e.memoizedState=t:xS(e,gt.memoizedState,t)},useTransition:function(){var t=kp(Pl)[0],e=Nn().memoizedState;return[t,e]},useMutableSource:pS,useSyncExternalStore:mS,useId:AS,unstable_isNewReconciler:!1};function jo(t,e){try{var n="",r=e;do n+=JA(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Cp(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Zm(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var kb=typeof WeakMap=="function"?WeakMap:Map;function DS(t,e,n){n=Or(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){mh||(mh=!0,ug=r),Zm(t,e)},n}function OS(t,e,n){n=Or(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Zm(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Zm(t,e),typeof r!="function"&&(Ti===null?Ti=new Set([this]):Ti.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function J0(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new kb;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Fb.bind(null,t,e,n),e.then(t,t))}function Z0(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function e1(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Or(-1,1),e.tag=2,Ei(n,e,1))),n.lanes|=1),t)}var Cb=Kr.ReactCurrentOwner,on=!1;function Xt(t,e,n,r){e.child=t===null?dS(e,null,n,r):Mo(e,t.child,n,r)}function t1(t,e,n,r,i){n=n.render;var s=e.ref;return To(e,i),r=Hy(t,e,n,r,s,i),n=Gy(),t!==null&&!on?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,$r(t,e,i)):(We&&n&&Oy(e),e.flags|=1,Xt(t,e,r,i),e.child)}function n1(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!rv(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,LS(t,e,s,r,i)):(t=Dc(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Sl,n(o,r)&&t.ref===e.ref)return $r(t,e,i)}return e.flags|=1,t=Ii(s,r),t.ref=e.ref,t.return=e,e.child=t}function LS(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Sl(s,r)&&t.ref===e.ref)if(on=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(on=!0);else return e.lanes=t.lanes,$r(t,e,i)}return eg(t,e,n,r,i)}function MS(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},De(ho,hn),hn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,De(ho,hn),hn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,De(ho,hn),hn|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,De(ho,hn),hn|=r;return Xt(t,e,i,n),e.child}function VS(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function eg(t,e,n,r,i){var s=ln(n)?fs:Wt.current;return s=Oo(e,s),To(e,i),n=Hy(t,e,n,r,s,i),r=Gy(),t!==null&&!on?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,$r(t,e,i)):(We&&r&&Oy(e),e.flags|=1,Xt(t,e,n,i),e.child)}function r1(t,e,n,r,i){if(ln(n)){var s=!0;sh(e)}else s=!1;if(To(e,i),e.stateNode===null)Pc(t,e),cS(e,n,r),Jm(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=bn(u):(u=ln(n)?fs:Wt.current,u=Oo(e,u));var c=n.getDerivedStateFromProps,d=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&K0(e,o,r,u),ri=!1;var h=e.memoizedState;o.state=h,ch(e,r,o,i),l=e.memoizedState,a!==r||h!==l||an.current||ri?(typeof c=="function"&&(Ym(e,n,c,r),l=e.memoizedState),(a=ri||G0(e,n,a,r,h,l,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,lS(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:jn(e.type,a),o.props=u,d=e.pendingProps,h=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=bn(l):(l=ln(n)?fs:Wt.current,l=Oo(e,l));var f=n.getDerivedStateFromProps;(c=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||h!==l)&&K0(e,o,r,l),ri=!1,h=e.memoizedState,o.state=h,ch(e,r,o,i);var g=e.memoizedState;a!==d||h!==g||an.current||ri?(typeof f=="function"&&(Ym(e,n,f,r),g=e.memoizedState),(u=ri||G0(e,n,u,r,h,g,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,g,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,g,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=g),o.props=r,o.state=g,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return tg(t,e,n,r,s,i)}function tg(t,e,n,r,i,s){VS(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&B0(e,n,!1),$r(t,e,s);r=e.stateNode,Cb.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Mo(e,t.child,null,s),e.child=Mo(e,null,a,s)):Xt(t,e,a,s),e.memoizedState=r.state,i&&B0(e,n,!0),e.child}function jS(t){var e=t.stateNode;e.pendingContext?U0(t,e.pendingContext,e.pendingContext!==e.context):e.context&&U0(t,e.context,!1),By(t,e.containerInfo)}function i1(t,e,n,r,i){return Lo(),My(i),e.flags|=256,Xt(t,e,n,r),e.child}var ng={dehydrated:null,treeContext:null,retryLane:0};function rg(t){return{baseLanes:t,cachePool:null,transitions:null}}function FS(t,e,n){var r=e.pendingProps,i=Ge.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),De(Ge,i&1),t===null)return Qm(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Od(o,r,0,null),t=us(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=rg(n),e.memoizedState=ng,t):Xy(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return Rb(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Ii(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Ii(a,s):(s=us(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?rg(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=ng,r}return s=t.child,t=s.sibling,r=Ii(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Xy(t,e){return e=Od({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ic(t,e,n,r){return r!==null&&My(r),Mo(e,t.child,null,n),t=Xy(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Rb(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Cp(Error(V(422))),ic(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Od({mode:"visible",children:r.children},i,0,null),s=us(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Mo(e,t.child,null,o),e.child.memoizedState=rg(o),e.memoizedState=ng,s);if(!(e.mode&1))return ic(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(V(419)),r=Cp(s,r,void 0),ic(t,e,o,r)}if(a=(o&t.childLanes)!==0,on||a){if(r=Et,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Fr(t,i),qn(r,t,i,-1))}return nv(),r=Cp(Error(V(421))),ic(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=$b.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,dn=wi(i.nextSibling),mn=e,We=!0,Un=null,t!==null&&(kn[Cn++]=Ar,kn[Cn++]=Pr,kn[Cn++]=ps,Ar=t.id,Pr=t.overflow,ps=e),e=Xy(e,r.children),e.flags|=4096,e)}function s1(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Xm(t.return,e,n)}function Rp(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function $S(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Xt(t,e,r.children,n),r=Ge.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&s1(t,n,e);else if(t.tag===19)s1(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(De(Ge,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&hh(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Rp(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&hh(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Rp(e,!0,n,null,s);break;case"together":Rp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Pc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function $r(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),gs|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(V(153));if(e.child!==null){for(t=e.child,n=Ii(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ii(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function xb(t,e,n){switch(e.tag){case 3:jS(e),Lo();break;case 5:fS(e);break;case 1:ln(e.type)&&sh(e);break;case 4:By(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;De(lh,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(De(Ge,Ge.current&1),e.flags|=128,null):n&e.child.childLanes?FS(t,e,n):(De(Ge,Ge.current&1),t=$r(t,e,n),t!==null?t.sibling:null);De(Ge,Ge.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return $S(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),De(Ge,Ge.current),r)break;return null;case 22:case 23:return e.lanes=0,MS(t,e,n)}return $r(t,e,n)}var US,ig,BS,zS;US=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ig=function(){};BS=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,ts(ar.current);var s=null;switch(n){case"input":i=Cm(t,i),r=Cm(t,r),s=[];break;case"select":i=Qe({},i,{value:void 0}),r=Qe({},r,{value:void 0}),s=[];break;case"textarea":i=Am(t,i),r=Am(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=rh)}bm(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(gl.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(gl.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Me("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};zS=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ia(t,e){if(!We)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Mt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Ab(t,e,n){var r=e.pendingProps;switch(Ly(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mt(e),null;case 1:return ln(e.type)&&ih(),Mt(e),null;case 3:return r=e.stateNode,Vo(),Fe(an),Fe(Wt),Wy(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(nc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Un!==null&&(dg(Un),Un=null))),ig(t,e),Mt(e),null;case 5:zy(e);var i=ts(xl.current);if(n=e.type,t!==null&&e.stateNode!=null)BS(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(V(166));return Mt(e),null}if(t=ts(ar.current),nc(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[er]=e,r[Cl]=s,t=(e.mode&1)!==0,n){case"dialog":Me("cancel",r),Me("close",r);break;case"iframe":case"object":case"embed":Me("load",r);break;case"video":case"audio":for(i=0;i<ja.length;i++)Me(ja[i],r);break;case"source":Me("error",r);break;case"img":case"image":case"link":Me("error",r),Me("load",r);break;case"details":Me("toggle",r);break;case"input":p0(r,s),Me("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Me("invalid",r);break;case"textarea":g0(r,s),Me("invalid",r)}bm(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&tc(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&tc(r.textContent,a,t),i=["children",""+a]):gl.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Me("scroll",r)}switch(n){case"input":Gu(r),m0(r,s,!0);break;case"textarea":Gu(r),y0(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=rh)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=gT(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[er]=e,t[Cl]=r,US(t,e,!1,!1),e.stateNode=t;e:{switch(o=Nm(n,r),n){case"dialog":Me("cancel",t),Me("close",t),i=r;break;case"iframe":case"object":case"embed":Me("load",t),i=r;break;case"video":case"audio":for(i=0;i<ja.length;i++)Me(ja[i],t);i=r;break;case"source":Me("error",t),i=r;break;case"img":case"image":case"link":Me("error",t),Me("load",t),i=r;break;case"details":Me("toggle",t),i=r;break;case"input":p0(t,r),i=Cm(t,r),Me("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Qe({},r,{value:void 0}),Me("invalid",t);break;case"textarea":g0(t,r),i=Am(t,r),Me("invalid",t);break;default:i=r}bm(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?_T(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&yT(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&yl(t,l):typeof l=="number"&&yl(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(gl.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Me("scroll",t):l!=null&&wy(t,s,l,o))}switch(n){case"input":Gu(t),m0(t,r,!1);break;case"textarea":Gu(t),y0(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Pi(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?vo(t,!!r.multiple,s,!1):r.defaultValue!=null&&vo(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=rh)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Mt(e),null;case 6:if(t&&e.stateNode!=null)zS(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(V(166));if(n=ts(xl.current),ts(ar.current),nc(e)){if(r=e.stateNode,n=e.memoizedProps,r[er]=e,(s=r.nodeValue!==n)&&(t=mn,t!==null))switch(t.tag){case 3:tc(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&tc(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[er]=e,e.stateNode=r}return Mt(e),null;case 13:if(Fe(Ge),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(We&&dn!==null&&e.mode&1&&!(e.flags&128))oS(),Lo(),e.flags|=98560,s=!1;else if(s=nc(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(V(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(V(317));s[er]=e}else Lo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Mt(e),s=!1}else Un!==null&&(dg(Un),Un=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ge.current&1?yt===0&&(yt=3):nv())),e.updateQueue!==null&&(e.flags|=4),Mt(e),null);case 4:return Vo(),ig(t,e),t===null&&Il(e.stateNode.containerInfo),Mt(e),null;case 10:return Fy(e.type._context),Mt(e),null;case 17:return ln(e.type)&&ih(),Mt(e),null;case 19:if(Fe(Ge),s=e.memoizedState,s===null)return Mt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Ia(s,!1);else{if(yt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=hh(t),o!==null){for(e.flags|=128,Ia(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return De(Ge,Ge.current&1|2),e.child}t=t.sibling}s.tail!==null&&ot()>Fo&&(e.flags|=128,r=!0,Ia(s,!1),e.lanes=4194304)}else{if(!r)if(t=hh(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ia(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!We)return Mt(e),null}else 2*ot()-s.renderingStartTime>Fo&&n!==1073741824&&(e.flags|=128,r=!0,Ia(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=ot(),e.sibling=null,n=Ge.current,De(Ge,r?n&1|2:n&1),e):(Mt(e),null);case 22:case 23:return tv(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?hn&1073741824&&(Mt(e),e.subtreeFlags&6&&(e.flags|=8192)):Mt(e),null;case 24:return null;case 25:return null}throw Error(V(156,e.tag))}function Pb(t,e){switch(Ly(e),e.tag){case 1:return ln(e.type)&&ih(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Vo(),Fe(an),Fe(Wt),Wy(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return zy(e),null;case 13:if(Fe(Ge),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(V(340));Lo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Fe(Ge),null;case 4:return Vo(),null;case 10:return Fy(e.type._context),null;case 22:case 23:return tv(),null;case 24:return null;default:return null}}var sc=!1,$t=!1,bb=typeof WeakSet=="function"?WeakSet:Set,W=null;function co(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ye(t,e,r)}else n.current=null}function sg(t,e,n){try{n()}catch(r){Ye(t,e,r)}}var o1=!1;function Nb(t,e){if(Bm=eh,t=GT(),Dy(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,c=0,d=t,h=null;t:for(;;){for(var f;d!==n||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(f=d.firstChild)!==null;)h=d,d=f;for(;;){if(d===t)break t;if(h===n&&++u===i&&(a=o),h===s&&++c===r&&(l=o),(f=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=f}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(zm={focusedElem:t,selectionRange:n},eh=!1,W=e;W!==null;)if(e=W,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,W=t;else for(;W!==null;){e=W;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var w=g.memoizedProps,E=g.memoizedState,v=e.stateNode,p=v.getSnapshotBeforeUpdate(e.elementType===e.type?w:jn(e.type,w),E);v.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(V(163))}}catch(y){Ye(e,e.return,y)}if(t=e.sibling,t!==null){t.return=e.return,W=t;break}W=e.return}return g=o1,o1=!1,g}function rl(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&sg(e,n,s)}i=i.next}while(i!==r)}}function Nd(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function og(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function WS(t){var e=t.alternate;e!==null&&(t.alternate=null,WS(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[er],delete e[Cl],delete e[Hm],delete e[pb],delete e[mb])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function qS(t){return t.tag===5||t.tag===3||t.tag===4}function a1(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||qS(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ag(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=rh));else if(r!==4&&(t=t.child,t!==null))for(ag(t,e,n),t=t.sibling;t!==null;)ag(t,e,n),t=t.sibling}function lg(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(lg(t,e,n),t=t.sibling;t!==null;)lg(t,e,n),t=t.sibling}var Rt=null,Fn=!1;function Zr(t,e,n){for(n=n.child;n!==null;)HS(t,e,n),n=n.sibling}function HS(t,e,n){if(or&&typeof or.onCommitFiberUnmount=="function")try{or.onCommitFiberUnmount(Id,n)}catch{}switch(n.tag){case 5:$t||co(n,e);case 6:var r=Rt,i=Fn;Rt=null,Zr(t,e,n),Rt=r,Fn=i,Rt!==null&&(Fn?(t=Rt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Rt.removeChild(n.stateNode));break;case 18:Rt!==null&&(Fn?(t=Rt,n=n.stateNode,t.nodeType===8?wp(t.parentNode,n):t.nodeType===1&&wp(t,n),El(t)):wp(Rt,n.stateNode));break;case 4:r=Rt,i=Fn,Rt=n.stateNode.containerInfo,Fn=!0,Zr(t,e,n),Rt=r,Fn=i;break;case 0:case 11:case 14:case 15:if(!$t&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&sg(n,e,o),i=i.next}while(i!==r)}Zr(t,e,n);break;case 1:if(!$t&&(co(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ye(n,e,a)}Zr(t,e,n);break;case 21:Zr(t,e,n);break;case 22:n.mode&1?($t=(r=$t)||n.memoizedState!==null,Zr(t,e,n),$t=r):Zr(t,e,n);break;default:Zr(t,e,n)}}function l1(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new bb),e.forEach(function(r){var i=Ub.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Ln(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Rt=a.stateNode,Fn=!1;break e;case 3:Rt=a.stateNode.containerInfo,Fn=!0;break e;case 4:Rt=a.stateNode.containerInfo,Fn=!0;break e}a=a.return}if(Rt===null)throw Error(V(160));HS(s,o,i),Rt=null,Fn=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){Ye(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)GS(e,t),e=e.sibling}function GS(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ln(e,t),Yn(t),r&4){try{rl(3,t,t.return),Nd(3,t)}catch(w){Ye(t,t.return,w)}try{rl(5,t,t.return)}catch(w){Ye(t,t.return,w)}}break;case 1:Ln(e,t),Yn(t),r&512&&n!==null&&co(n,n.return);break;case 5:if(Ln(e,t),Yn(t),r&512&&n!==null&&co(n,n.return),t.flags&32){var i=t.stateNode;try{yl(i,"")}catch(w){Ye(t,t.return,w)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&pT(i,s),Nm(a,o);var u=Nm(a,s);for(o=0;o<l.length;o+=2){var c=l[o],d=l[o+1];c==="style"?_T(i,d):c==="dangerouslySetInnerHTML"?yT(i,d):c==="children"?yl(i,d):wy(i,c,d,u)}switch(a){case"input":Rm(i,s);break;case"textarea":mT(i,s);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var f=s.value;f!=null?vo(i,!!s.multiple,f,!1):h!==!!s.multiple&&(s.defaultValue!=null?vo(i,!!s.multiple,s.defaultValue,!0):vo(i,!!s.multiple,s.multiple?[]:"",!1))}i[Cl]=s}catch(w){Ye(t,t.return,w)}}break;case 6:if(Ln(e,t),Yn(t),r&4){if(t.stateNode===null)throw Error(V(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(w){Ye(t,t.return,w)}}break;case 3:if(Ln(e,t),Yn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{El(e.containerInfo)}catch(w){Ye(t,t.return,w)}break;case 4:Ln(e,t),Yn(t);break;case 13:Ln(e,t),Yn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Zy=ot())),r&4&&l1(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?($t=(u=$t)||c,Ln(e,t),$t=u):Ln(e,t),Yn(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(W=t,c=t.child;c!==null;){for(d=W=c;W!==null;){switch(h=W,f=h.child,h.tag){case 0:case 11:case 14:case 15:rl(4,h,h.return);break;case 1:co(h,h.return);var g=h.stateNode;if(typeof g.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(w){Ye(r,n,w)}}break;case 5:co(h,h.return);break;case 22:if(h.memoizedState!==null){c1(d);continue}}f!==null?(f.return=h,W=f):c1(d)}c=c.sibling}e:for(c=null,d=t;;){if(d.tag===5){if(c===null){c=d;try{i=d.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=vT("display",o))}catch(w){Ye(t,t.return,w)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(w){Ye(t,t.return,w)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Ln(e,t),Yn(t),r&4&&l1(t);break;case 21:break;default:Ln(e,t),Yn(t)}}function Yn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(qS(n)){var r=n;break e}n=n.return}throw Error(V(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(yl(i,""),r.flags&=-33);var s=a1(t);lg(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=a1(t);ag(t,a,o);break;default:throw Error(V(161))}}catch(l){Ye(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Db(t,e,n){W=t,KS(t)}function KS(t,e,n){for(var r=(t.mode&1)!==0;W!==null;){var i=W,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||sc;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||$t;a=sc;var u=$t;if(sc=o,($t=l)&&!u)for(W=i;W!==null;)o=W,l=o.child,o.tag===22&&o.memoizedState!==null?h1(i):l!==null?(l.return=o,W=l):h1(i);for(;s!==null;)W=s,KS(s),s=s.sibling;W=i,sc=a,$t=u}u1(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,W=s):u1(t)}}function u1(t){for(;W!==null;){var e=W;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:$t||Nd(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!$t)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:jn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&H0(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}H0(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&El(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(V(163))}$t||e.flags&512&&og(e)}catch(h){Ye(e,e.return,h)}}if(e===t){W=null;break}if(n=e.sibling,n!==null){n.return=e.return,W=n;break}W=e.return}}function c1(t){for(;W!==null;){var e=W;if(e===t){W=null;break}var n=e.sibling;if(n!==null){n.return=e.return,W=n;break}W=e.return}}function h1(t){for(;W!==null;){var e=W;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Nd(4,e)}catch(l){Ye(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Ye(e,i,l)}}var s=e.return;try{og(e)}catch(l){Ye(e,s,l)}break;case 5:var o=e.return;try{og(e)}catch(l){Ye(e,o,l)}}}catch(l){Ye(e,e.return,l)}if(e===t){W=null;break}var a=e.sibling;if(a!==null){a.return=e.return,W=a;break}W=e.return}}var Ob=Math.ceil,ph=Kr.ReactCurrentDispatcher,Yy=Kr.ReactCurrentOwner,Pn=Kr.ReactCurrentBatchConfig,we=0,Et=null,ft=null,bt=0,hn=0,ho=$i(0),yt=0,Nl=null,gs=0,Dd=0,Jy=0,il=null,rn=null,Zy=0,Fo=1/0,Cr=null,mh=!1,ug=null,Ti=null,oc=!1,fi=null,gh=0,sl=0,cg=null,bc=-1,Nc=0;function Zt(){return we&6?ot():bc!==-1?bc:bc=ot()}function Si(t){return t.mode&1?we&2&&bt!==0?bt&-bt:yb.transition!==null?(Nc===0&&(Nc=bT()),Nc):(t=ke,t!==0||(t=window.event,t=t===void 0?16:jT(t.type)),t):1}function qn(t,e,n,r){if(50<sl)throw sl=0,cg=null,Error(V(185));au(t,n,r),(!(we&2)||t!==Et)&&(t===Et&&(!(we&2)&&(Dd|=n),yt===4&&si(t,bt)),un(t,r),n===1&&we===0&&!(e.mode&1)&&(Fo=ot()+500,Ad&&Ui()))}function un(t,e){var n=t.callbackNode;yP(t,e);var r=Zc(t,t===Et?bt:0);if(r===0)n!==null&&w0(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&w0(n),e===1)t.tag===0?gb(d1.bind(null,t)):rS(d1.bind(null,t)),db(function(){!(we&6)&&Ui()}),n=null;else{switch(NT(r)){case 1:n=ky;break;case 4:n=AT;break;case 16:n=Jc;break;case 536870912:n=PT;break;default:n=Jc}n=nI(n,QS.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function QS(t,e){if(bc=-1,Nc=0,we&6)throw Error(V(327));var n=t.callbackNode;if(So()&&t.callbackNode!==n)return null;var r=Zc(t,t===Et?bt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=yh(t,r);else{e=r;var i=we;we|=2;var s=YS();(Et!==t||bt!==e)&&(Cr=null,Fo=ot()+500,ls(t,e));do try{Vb();break}catch(a){XS(t,a)}while(1);jy(),ph.current=s,we=i,ft!==null?e=0:(Et=null,bt=0,e=yt)}if(e!==0){if(e===2&&(i=Vm(t),i!==0&&(r=i,e=hg(t,i))),e===1)throw n=Nl,ls(t,0),si(t,r),un(t,ot()),n;if(e===6)si(t,r);else{if(i=t.current.alternate,!(r&30)&&!Lb(i)&&(e=yh(t,r),e===2&&(s=Vm(t),s!==0&&(r=s,e=hg(t,s))),e===1))throw n=Nl,ls(t,0),si(t,r),un(t,ot()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(V(345));case 2:Xi(t,rn,Cr);break;case 3:if(si(t,r),(r&130023424)===r&&(e=Zy+500-ot(),10<e)){if(Zc(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Zt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=qm(Xi.bind(null,t,rn,Cr),e);break}Xi(t,rn,Cr);break;case 4:if(si(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Wn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=ot()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ob(r/1960))-r,10<r){t.timeoutHandle=qm(Xi.bind(null,t,rn,Cr),r);break}Xi(t,rn,Cr);break;case 5:Xi(t,rn,Cr);break;default:throw Error(V(329))}}}return un(t,ot()),t.callbackNode===n?QS.bind(null,t):null}function hg(t,e){var n=il;return t.current.memoizedState.isDehydrated&&(ls(t,e).flags|=256),t=yh(t,e),t!==2&&(e=rn,rn=n,e!==null&&dg(e)),t}function dg(t){rn===null?rn=t:rn.push.apply(rn,t)}function Lb(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Hn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function si(t,e){for(e&=~Jy,e&=~Dd,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Wn(e),r=1<<n;t[n]=-1,e&=~r}}function d1(t){if(we&6)throw Error(V(327));So();var e=Zc(t,0);if(!(e&1))return un(t,ot()),null;var n=yh(t,e);if(t.tag!==0&&n===2){var r=Vm(t);r!==0&&(e=r,n=hg(t,r))}if(n===1)throw n=Nl,ls(t,0),si(t,e),un(t,ot()),n;if(n===6)throw Error(V(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Xi(t,rn,Cr),un(t,ot()),null}function ev(t,e){var n=we;we|=1;try{return t(e)}finally{we=n,we===0&&(Fo=ot()+500,Ad&&Ui())}}function ys(t){fi!==null&&fi.tag===0&&!(we&6)&&So();var e=we;we|=1;var n=Pn.transition,r=ke;try{if(Pn.transition=null,ke=1,t)return t()}finally{ke=r,Pn.transition=n,we=e,!(we&6)&&Ui()}}function tv(){hn=ho.current,Fe(ho)}function ls(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,hb(n)),ft!==null)for(n=ft.return;n!==null;){var r=n;switch(Ly(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ih();break;case 3:Vo(),Fe(an),Fe(Wt),Wy();break;case 5:zy(r);break;case 4:Vo();break;case 13:Fe(Ge);break;case 19:Fe(Ge);break;case 10:Fy(r.type._context);break;case 22:case 23:tv()}n=n.return}if(Et=t,ft=t=Ii(t.current,null),bt=hn=e,yt=0,Nl=null,Jy=Dd=gs=0,rn=il=null,es!==null){for(e=0;e<es.length;e++)if(n=es[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}es=null}return t}function XS(t,e){do{var n=ft;try{if(jy(),xc.current=fh,dh){for(var r=Ke.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}dh=!1}if(ms=0,wt=gt=Ke=null,nl=!1,Al=0,Yy.current=null,n===null||n.return===null){yt=1,Nl=e,ft=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=bt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var h=c.alternate;h?(c.updateQueue=h.updateQueue,c.memoizedState=h.memoizedState,c.lanes=h.lanes):(c.updateQueue=null,c.memoizedState=null)}var f=Z0(o);if(f!==null){f.flags&=-257,e1(f,o,a,s,e),f.mode&1&&J0(s,u,e),e=f,l=u;var g=e.updateQueue;if(g===null){var w=new Set;w.add(l),e.updateQueue=w}else g.add(l);break e}else{if(!(e&1)){J0(s,u,e),nv();break e}l=Error(V(426))}}else if(We&&a.mode&1){var E=Z0(o);if(E!==null){!(E.flags&65536)&&(E.flags|=256),e1(E,o,a,s,e),My(jo(l,a));break e}}s=l=jo(l,a),yt!==4&&(yt=2),il===null?il=[s]:il.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var v=DS(s,l,e);q0(s,v);break e;case 1:a=l;var p=s.type,_=s.stateNode;if(!(s.flags&128)&&(typeof p.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Ti===null||!Ti.has(_)))){s.flags|=65536,e&=-e,s.lanes|=e;var y=OS(s,a,e);q0(s,y);break e}}s=s.return}while(s!==null)}ZS(n)}catch(S){e=S,ft===n&&n!==null&&(ft=n=n.return);continue}break}while(1)}function YS(){var t=ph.current;return ph.current=fh,t===null?fh:t}function nv(){(yt===0||yt===3||yt===2)&&(yt=4),Et===null||!(gs&268435455)&&!(Dd&268435455)||si(Et,bt)}function yh(t,e){var n=we;we|=2;var r=YS();(Et!==t||bt!==e)&&(Cr=null,ls(t,e));do try{Mb();break}catch(i){XS(t,i)}while(1);if(jy(),we=n,ph.current=r,ft!==null)throw Error(V(261));return Et=null,bt=0,yt}function Mb(){for(;ft!==null;)JS(ft)}function Vb(){for(;ft!==null&&!lP();)JS(ft)}function JS(t){var e=tI(t.alternate,t,hn);t.memoizedProps=t.pendingProps,e===null?ZS(t):ft=e,Yy.current=null}function ZS(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Pb(n,e),n!==null){n.flags&=32767,ft=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{yt=6,ft=null;return}}else if(n=Ab(n,e,hn),n!==null){ft=n;return}if(e=e.sibling,e!==null){ft=e;return}ft=e=t}while(e!==null);yt===0&&(yt=5)}function Xi(t,e,n){var r=ke,i=Pn.transition;try{Pn.transition=null,ke=1,jb(t,e,n,r)}finally{Pn.transition=i,ke=r}return null}function jb(t,e,n,r){do So();while(fi!==null);if(we&6)throw Error(V(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(V(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(vP(t,s),t===Et&&(ft=Et=null,bt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||oc||(oc=!0,nI(Jc,function(){return So(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Pn.transition,Pn.transition=null;var o=ke;ke=1;var a=we;we|=4,Yy.current=null,Nb(t,n),GS(n,t),ib(zm),eh=!!Bm,zm=Bm=null,t.current=n,Db(n),uP(),we=a,ke=o,Pn.transition=s}else t.current=n;if(oc&&(oc=!1,fi=t,gh=i),s=t.pendingLanes,s===0&&(Ti=null),dP(n.stateNode),un(t,ot()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(mh)throw mh=!1,t=ug,ug=null,t;return gh&1&&t.tag!==0&&So(),s=t.pendingLanes,s&1?t===cg?sl++:(sl=0,cg=t):sl=0,Ui(),null}function So(){if(fi!==null){var t=NT(gh),e=Pn.transition,n=ke;try{if(Pn.transition=null,ke=16>t?16:t,fi===null)var r=!1;else{if(t=fi,fi=null,gh=0,we&6)throw Error(V(331));var i=we;for(we|=4,W=t.current;W!==null;){var s=W,o=s.child;if(W.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(W=u;W!==null;){var c=W;switch(c.tag){case 0:case 11:case 15:rl(8,c,s)}var d=c.child;if(d!==null)d.return=c,W=d;else for(;W!==null;){c=W;var h=c.sibling,f=c.return;if(WS(c),c===u){W=null;break}if(h!==null){h.return=f,W=h;break}W=f}}}var g=s.alternate;if(g!==null){var w=g.child;if(w!==null){g.child=null;do{var E=w.sibling;w.sibling=null,w=E}while(w!==null)}}W=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,W=o;else e:for(;W!==null;){if(s=W,s.flags&2048)switch(s.tag){case 0:case 11:case 15:rl(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,W=v;break e}W=s.return}}var p=t.current;for(W=p;W!==null;){o=W;var _=o.child;if(o.subtreeFlags&2064&&_!==null)_.return=o,W=_;else e:for(o=p;W!==null;){if(a=W,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Nd(9,a)}}catch(S){Ye(a,a.return,S)}if(a===o){W=null;break e}var y=a.sibling;if(y!==null){y.return=a.return,W=y;break e}W=a.return}}if(we=i,Ui(),or&&typeof or.onPostCommitFiberRoot=="function")try{or.onPostCommitFiberRoot(Id,t)}catch{}r=!0}return r}finally{ke=n,Pn.transition=e}}return!1}function f1(t,e,n){e=jo(n,e),e=DS(t,e,1),t=Ei(t,e,1),e=Zt(),t!==null&&(au(t,1,e),un(t,e))}function Ye(t,e,n){if(t.tag===3)f1(t,t,n);else for(;e!==null;){if(e.tag===3){f1(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ti===null||!Ti.has(r))){t=jo(n,t),t=OS(e,t,1),e=Ei(e,t,1),t=Zt(),e!==null&&(au(e,1,t),un(e,t));break}}e=e.return}}function Fb(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Zt(),t.pingedLanes|=t.suspendedLanes&n,Et===t&&(bt&n)===n&&(yt===4||yt===3&&(bt&130023424)===bt&&500>ot()-Zy?ls(t,0):Jy|=n),un(t,e)}function eI(t,e){e===0&&(t.mode&1?(e=Xu,Xu<<=1,!(Xu&130023424)&&(Xu=4194304)):e=1);var n=Zt();t=Fr(t,e),t!==null&&(au(t,e,n),un(t,n))}function $b(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),eI(t,n)}function Ub(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(V(314))}r!==null&&r.delete(e),eI(t,n)}var tI;tI=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||an.current)on=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return on=!1,xb(t,e,n);on=!!(t.flags&131072)}else on=!1,We&&e.flags&1048576&&iS(e,ah,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Pc(t,e),t=e.pendingProps;var i=Oo(e,Wt.current);To(e,n),i=Hy(null,e,r,t,i,n);var s=Gy();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ln(r)?(s=!0,sh(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Uy(e),i.updater=Pd,e.stateNode=i,i._reactInternals=e,Jm(e,r,t,n),e=tg(null,e,r,!0,s,n)):(e.tag=0,We&&s&&Oy(e),Xt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Pc(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=zb(r),t=jn(r,t),i){case 0:e=eg(null,e,r,t,n);break e;case 1:e=r1(null,e,r,t,n);break e;case 11:e=t1(null,e,r,t,n);break e;case 14:e=n1(null,e,r,jn(r.type,t),n);break e}throw Error(V(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:jn(r,i),eg(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:jn(r,i),r1(t,e,r,i,n);case 3:e:{if(jS(e),t===null)throw Error(V(387));r=e.pendingProps,s=e.memoizedState,i=s.element,lS(t,e),ch(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=jo(Error(V(423)),e),e=i1(t,e,r,n,i);break e}else if(r!==i){i=jo(Error(V(424)),e),e=i1(t,e,r,n,i);break e}else for(dn=wi(e.stateNode.containerInfo.firstChild),mn=e,We=!0,Un=null,n=dS(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Lo(),r===i){e=$r(t,e,n);break e}Xt(t,e,r,n)}e=e.child}return e;case 5:return fS(e),t===null&&Qm(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Wm(r,i)?o=null:s!==null&&Wm(r,s)&&(e.flags|=32),VS(t,e),Xt(t,e,o,n),e.child;case 6:return t===null&&Qm(e),null;case 13:return FS(t,e,n);case 4:return By(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Mo(e,null,r,n):Xt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:jn(r,i),t1(t,e,r,i,n);case 7:return Xt(t,e,e.pendingProps,n),e.child;case 8:return Xt(t,e,e.pendingProps.children,n),e.child;case 12:return Xt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,De(lh,r._currentValue),r._currentValue=o,s!==null)if(Hn(s.value,o)){if(s.children===i.children&&!an.current){e=$r(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Or(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Xm(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(V(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Xm(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Xt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,To(e,n),i=bn(i),r=r(i),e.flags|=1,Xt(t,e,r,n),e.child;case 14:return r=e.type,i=jn(r,e.pendingProps),i=jn(r.type,i),n1(t,e,r,i,n);case 15:return LS(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:jn(r,i),Pc(t,e),e.tag=1,ln(r)?(t=!0,sh(e)):t=!1,To(e,n),cS(e,r,i),Jm(e,r,i,n),tg(null,e,r,!0,t,n);case 19:return $S(t,e,n);case 22:return MS(t,e,n)}throw Error(V(156,e.tag))};function nI(t,e){return xT(t,e)}function Bb(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function An(t,e,n,r){return new Bb(t,e,n,r)}function rv(t){return t=t.prototype,!(!t||!t.isReactComponent)}function zb(t){if(typeof t=="function")return rv(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Ty)return 11;if(t===Sy)return 14}return 2}function Ii(t,e){var n=t.alternate;return n===null?(n=An(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Dc(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")rv(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case to:return us(n.children,i,s,e);case Ey:o=8,i|=8;break;case Tm:return t=An(12,n,e,i|2),t.elementType=Tm,t.lanes=s,t;case Sm:return t=An(13,n,e,i),t.elementType=Sm,t.lanes=s,t;case Im:return t=An(19,n,e,i),t.elementType=Im,t.lanes=s,t;case hT:return Od(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case uT:o=10;break e;case cT:o=9;break e;case Ty:o=11;break e;case Sy:o=14;break e;case ni:o=16,r=null;break e}throw Error(V(130,t==null?t:typeof t,""))}return e=An(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function us(t,e,n,r){return t=An(7,t,r,e),t.lanes=n,t}function Od(t,e,n,r){return t=An(22,t,r,e),t.elementType=hT,t.lanes=n,t.stateNode={isHidden:!1},t}function xp(t,e,n){return t=An(6,t,null,e),t.lanes=n,t}function Ap(t,e,n){return e=An(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Wb(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=up(0),this.expirationTimes=up(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=up(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function iv(t,e,n,r,i,s,o,a,l){return t=new Wb(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=An(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Uy(s),t}function qb(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:eo,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function rI(t){if(!t)return bi;t=t._reactInternals;e:{if(Ds(t)!==t||t.tag!==1)throw Error(V(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ln(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(V(171))}if(t.tag===1){var n=t.type;if(ln(n))return nS(t,n,e)}return e}function iI(t,e,n,r,i,s,o,a,l){return t=iv(n,r,!0,t,i,s,o,a,l),t.context=rI(null),n=t.current,r=Zt(),i=Si(n),s=Or(r,i),s.callback=e??null,Ei(n,s,i),t.current.lanes=i,au(t,i,r),un(t,r),t}function Ld(t,e,n,r){var i=e.current,s=Zt(),o=Si(i);return n=rI(n),e.context===null?e.context=n:e.pendingContext=n,e=Or(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ei(i,e,o),t!==null&&(qn(t,i,o,s),Rc(t,i,o)),o}function vh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function p1(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function sv(t,e){p1(t,e),(t=t.alternate)&&p1(t,e)}function Hb(){return null}var sI=typeof reportError=="function"?reportError:function(t){console.error(t)};function ov(t){this._internalRoot=t}Md.prototype.render=ov.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(V(409));Ld(t,e,null,null)};Md.prototype.unmount=ov.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ys(function(){Ld(null,t,null,null)}),e[jr]=null}};function Md(t){this._internalRoot=t}Md.prototype.unstable_scheduleHydration=function(t){if(t){var e=LT();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ii.length&&e!==0&&e<ii[n].priority;n++);ii.splice(n,0,t),n===0&&VT(t)}};function av(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Vd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function m1(){}function Gb(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=vh(o);s.call(u)}}var o=iI(e,r,t,0,null,!1,!1,"",m1);return t._reactRootContainer=o,t[jr]=o.current,Il(t.nodeType===8?t.parentNode:t),ys(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=vh(l);a.call(u)}}var l=iv(t,0,!1,null,null,!1,!1,"",m1);return t._reactRootContainer=l,t[jr]=l.current,Il(t.nodeType===8?t.parentNode:t),ys(function(){Ld(e,l,n,r)}),l}function jd(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=vh(o);a.call(l)}}Ld(e,o,t,i)}else o=Gb(n,e,t,i,r);return vh(o)}DT=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Va(e.pendingLanes);n!==0&&(Cy(e,n|1),un(e,ot()),!(we&6)&&(Fo=ot()+500,Ui()))}break;case 13:ys(function(){var r=Fr(t,1);if(r!==null){var i=Zt();qn(r,t,1,i)}}),sv(t,1)}};Ry=function(t){if(t.tag===13){var e=Fr(t,134217728);if(e!==null){var n=Zt();qn(e,t,134217728,n)}sv(t,134217728)}};OT=function(t){if(t.tag===13){var e=Si(t),n=Fr(t,e);if(n!==null){var r=Zt();qn(n,t,e,r)}sv(t,e)}};LT=function(){return ke};MT=function(t,e){var n=ke;try{return ke=t,e()}finally{ke=n}};Om=function(t,e,n){switch(e){case"input":if(Rm(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=xd(r);if(!i)throw Error(V(90));fT(r),Rm(r,i)}}}break;case"textarea":mT(t,n);break;case"select":e=n.value,e!=null&&vo(t,!!n.multiple,e,!1)}};TT=ev;ST=ys;var Kb={usingClientEntryPoint:!1,Events:[uu,so,xd,wT,ET,ev]},ka={findFiberByHostInstance:Zi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},Qb={bundleType:ka.bundleType,version:ka.version,rendererPackageName:ka.rendererPackageName,rendererConfig:ka.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Kr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=CT(t),t===null?null:t.stateNode},findFiberByHostInstance:ka.findFiberByHostInstance||Hb,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ac=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ac.isDisabled&&ac.supportsFiber)try{Id=ac.inject(Qb),or=ac}catch{}}_n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Kb;_n.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!av(e))throw Error(V(200));return qb(t,e,null,n)};_n.createRoot=function(t,e){if(!av(t))throw Error(V(299));var n=!1,r="",i=sI;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=iv(t,1,!1,null,null,n,!1,r,i),t[jr]=e.current,Il(t.nodeType===8?t.parentNode:t),new ov(e)};_n.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(V(188)):(t=Object.keys(t).join(","),Error(V(268,t)));return t=CT(e),t=t===null?null:t.stateNode,t};_n.flushSync=function(t){return ys(t)};_n.hydrate=function(t,e,n){if(!Vd(e))throw Error(V(200));return jd(null,t,e,!0,n)};_n.hydrateRoot=function(t,e,n){if(!av(t))throw Error(V(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=sI;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=iI(e,null,t,1,n??null,i,!1,s,o),t[jr]=e.current,Il(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Md(e)};_n.render=function(t,e,n){if(!Vd(e))throw Error(V(200));return jd(null,t,e,!1,n)};_n.unmountComponentAtNode=function(t){if(!Vd(t))throw Error(V(40));return t._reactRootContainer?(ys(function(){jd(null,null,t,!1,function(){t._reactRootContainer=null,t[jr]=null})}),!0):!1};_n.unstable_batchedUpdates=ev;_n.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Vd(n))throw Error(V(200));if(t==null||t._reactInternals===void 0)throw Error(V(38));return jd(t,e,n,!1,r)};_n.version="18.2.0-next-9e3b772b8-20220608";function oI(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(oI)}catch(t){console.error(t)}}oI(),iT.exports=_n;var aI=iT.exports,g1=aI;wm.createRoot=g1.createRoot,wm.hydrateRoot=g1.hydrateRoot;/**
 * @remix-run/router v1.10.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function He(){return He=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},He.apply(this,arguments)}var it;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(it||(it={}));const y1="popstate";function Xb(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return Dl("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:_s(i)}return Jb(e,n,null,t)}function de(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function vs(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Yb(){return Math.random().toString(36).substr(2,8)}function v1(t,e){return{usr:t.state,key:t.key,idx:e}}function Dl(t,e,n,r){return n===void 0&&(n=null),He({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Qr(e):e,{state:n,key:e&&e.key||r||Yb()})}function _s(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Qr(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function Jb(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=it.Pop,l=null,u=c();u==null&&(u=0,o.replaceState(He({},o.state,{idx:u}),""));function c(){return(o.state||{idx:null}).idx}function d(){a=it.Pop;let E=c(),v=E==null?null:E-u;u=E,l&&l({action:a,location:w.location,delta:v})}function h(E,v){a=it.Push;let p=Dl(w.location,E,v);n&&n(p,E),u=c()+1;let _=v1(p,u),y=w.createHref(p);try{o.pushState(_,"",y)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;i.location.assign(y)}s&&l&&l({action:a,location:w.location,delta:1})}function f(E,v){a=it.Replace;let p=Dl(w.location,E,v);n&&n(p,E),u=c();let _=v1(p,u),y=w.createHref(p);o.replaceState(_,"",y),s&&l&&l({action:a,location:w.location,delta:0})}function g(E){let v=i.location.origin!=="null"?i.location.origin:i.location.href,p=typeof E=="string"?E:_s(E);return de(v,"No window.location.(origin|href) available to create URL for href: "+p),new URL(p,v)}let w={get action(){return a},get location(){return t(i,o)},listen(E){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(y1,d),l=E,()=>{i.removeEventListener(y1,d),l=null}},createHref(E){return e(i,E)},createURL:g,encodeLocation(E){let v=g(E);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:h,replace:f,go(E){return o.go(E)}};return w}var st;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(st||(st={}));const Zb=new Set(["lazy","caseSensitive","path","id","index","children"]);function e2(t){return t.index===!0}function fg(t,e,n,r){return n===void 0&&(n=[]),r===void 0&&(r={}),t.map((i,s)=>{let o=[...n,s],a=typeof i.id=="string"?i.id:o.join("-");if(de(i.index!==!0||!i.children,"Cannot specify children on an index route"),de(!r[a],'Found a route id collision on id "'+a+`".  Route id's must be globally unique within Data Router usages`),e2(i)){let l=He({},i,e(i),{id:a});return r[a]=l,l}else{let l=He({},i,e(i),{id:a,children:void 0});return r[a]=l,i.children&&(l.children=fg(i.children,e,o,r)),l}})}function fo(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?Qr(e):e,i=na(r.pathname||"/",n);if(i==null)return null;let s=lI(t);n2(s);let o=null;for(let a=0;o==null&&a<s.length;++a)o=h2(s[a],p2(i));return o}function t2(t,e){let{route:n,pathname:r,params:i}=t;return{id:n.id,pathname:r,params:i,data:e[n.id],handle:n.handle}}function lI(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(de(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let u=Lr([r,l.relativePath]),c=n.concat(l);s.children&&s.children.length>0&&(de(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),lI(s.children,e,c,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:u2(u,s.index),routesMeta:c})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of uI(s.path))i(s,o,l)}),e}function uI(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=uI(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function n2(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:c2(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const r2=/^:\w+$/,i2=3,s2=2,o2=1,a2=10,l2=-2,_1=t=>t==="*";function u2(t,e){let n=t.split("/"),r=n.length;return n.some(_1)&&(r+=l2),e&&(r+=s2),n.filter(i=>!_1(i)).reduce((i,s)=>i+(r2.test(s)?i2:s===""?o2:a2),r)}function c2(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function h2(t,e){let{routesMeta:n}=t,r={},i="/",s=[];for(let o=0;o<n.length;++o){let a=n[o],l=o===n.length-1,u=i==="/"?e:e.slice(i.length)||"/",c=d2({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},u);if(!c)return null;Object.assign(r,c.params);let d=a.route;s.push({params:r,pathname:Lr([i,c.pathname]),pathnameBase:v2(Lr([i,c.pathnameBase])),route:d}),c.pathnameBase!=="/"&&(i=Lr([i,c.pathnameBase]))}return s}function d2(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=f2(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((u,c,d)=>{if(c==="*"){let h=a[d]||"";o=s.slice(0,s.length-h.length).replace(/(.)\/+$/,"$1")}return u[c]=m2(a[d]||"",c),u},{}),pathname:s,pathnameBase:o,pattern:t}}function f2(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),vs(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(o,a)=>(r.push(a),"/([^\\/]+)"));return t.endsWith("*")?(r.push("*"),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function p2(t){try{return decodeURI(t)}catch(e){return vs(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function m2(t,e){try{return decodeURIComponent(t)}catch(n){return vs(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+t+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),t}}function na(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function g2(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Qr(t):t;return{pathname:n?n.startsWith("/")?n:y2(n,e):e,search:_2(r),hash:w2(i)}}function y2(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Pp(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function hu(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Fd(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Qr(t):(i=He({},t),de(!i.pathname||!i.pathname.includes("?"),Pp("?","pathname","search",i)),de(!i.pathname||!i.pathname.includes("#"),Pp("#","pathname","hash",i)),de(!i.search||!i.search.includes("#"),Pp("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(r||o==null)a=n;else{let d=e.length-1;if(o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),d-=1;i.pathname=h.join("/")}a=d>=0?e[d]:"/"}let l=g2(i,a),u=o&&o!=="/"&&o.endsWith("/"),c=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}const Lr=t=>t.join("/").replace(/\/\/+/g,"/"),v2=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),_2=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,w2=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class lv{constructor(e,n,r,i){i===void 0&&(i=!1),this.status=e,this.statusText=n||"",this.internal=i,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function cI(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const hI=["post","put","patch","delete"],E2=new Set(hI),T2=["get",...hI],S2=new Set(T2),I2=new Set([301,302,303,307,308]),k2=new Set([307,308]),bp={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},C2={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Ca={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},dI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,R2=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),fI="remix-router-transitions";function x2(t){const e=t.window?t.window:typeof window<"u"?window:void 0,n=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",r=!n;de(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let i;if(t.mapRouteProperties)i=t.mapRouteProperties;else if(t.detectErrorBoundary){let I=t.detectErrorBoundary;i=R=>({hasErrorBoundary:I(R)})}else i=R2;let s={},o=fg(t.routes,i,void 0,s),a,l=t.basename||"/",u=He({v7_normalizeFormMethod:!1,v7_prependBasename:!1},t.future),c=null,d=new Set,h=null,f=null,g=null,w=t.hydrationData!=null,E=fo(o,t.history.location,l),v=null;if(E==null){let I=Sn(404,{pathname:t.history.location.pathname}),{matches:R,route:D}=R1(o);E=R,v={[D.id]:I}}let p=!E.some(I=>I.route.lazy)&&(!E.some(I=>I.route.loader)||t.hydrationData!=null),_,y={historyAction:t.history.action,location:t.history.location,matches:E,initialized:p,navigation:bp,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||v,fetchers:new Map,blockers:new Map},S=it.Pop,C=!1,A,P=!1,O=new Map,M=null,le=!1,Q=!1,Z=[],_e=[],he=new Map,nt=0,ut=-1,F=new Map,X=new Set,ee=new Map,Ee=new Map,Ie=new Map,Xn=!1;function Tn(){if(c=t.history.listen(I=>{let{action:R,location:D,delta:z}=I;if(Xn){Xn=!1;return}vs(Ie.size===0||z!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let oe=zu({currentLocation:y.location,nextLocation:D,historyAction:R});if(oe&&z!=null){Xn=!0,t.history.go(z*-1),Yr(oe,{state:"blocked",location:D,proceed(){Yr(oe,{state:"proceeding",proceed:void 0,reset:void 0,location:D}),t.history.go(z)},reset(){let ie=new Map(y.blockers);ie.set(oe,Ca),Ne({blockers:ie})}});return}return _r(R,D)}),n){F2(e,O);let I=()=>$2(e,O);e.addEventListener("pagehide",I),M=()=>e.removeEventListener("pagehide",I)}return y.initialized||_r(it.Pop,y.location),_}function Hi(){c&&c(),M&&M(),d.clear(),A&&A.abort(),y.fetchers.forEach((I,R)=>j(R)),y.blockers.forEach((I,R)=>zs(R))}function cn(I){return d.add(I),()=>d.delete(I)}function Ne(I,R){y=He({},y,I),d.forEach(D=>D(y,{unstable_viewTransitionOpts:R}))}function vr(I,R){var D,z;let oe=y.actionData!=null&&y.navigation.formMethod!=null&&$n(y.navigation.formMethod)&&y.navigation.state==="loading"&&((D=I.state)==null?void 0:D._isRedirect)!==!0,ie;R.actionData?Object.keys(R.actionData).length>0?ie=R.actionData:ie=null:oe?ie=y.actionData:ie=null;let ue=R.loaderData?C1(y.loaderData,R.loaderData,R.matches||[],R.errors):y.loaderData,te=y.blockers;te.size>0&&(te=new Map(te),te.forEach((qe,ye)=>te.set(ye,Ca)));let J=C===!0||y.navigation.formMethod!=null&&$n(y.navigation.formMethod)&&((z=I.state)==null?void 0:z._isRedirect)!==!0;a&&(o=a,a=void 0),le||S===it.Pop||(S===it.Push?t.history.push(I,I.state):S===it.Replace&&t.history.replace(I,I.state));let Pe;if(S===it.Pop){let qe=O.get(y.location.pathname);qe&&qe.has(I.pathname)?Pe={currentLocation:y.location,nextLocation:I}:O.has(I.pathname)&&(Pe={currentLocation:I,nextLocation:y.location})}else if(P){let qe=O.get(y.location.pathname);qe?qe.add(I.pathname):(qe=new Set([I.pathname]),O.set(y.location.pathname,qe)),Pe={currentLocation:y.location,nextLocation:I}}Ne(He({},R,{actionData:ie,loaderData:ue,historyAction:S,location:I,initialized:!0,navigation:bp,revalidation:"idle",restoreScrollPosition:o0(I,R.matches||y.matches),preventScrollReset:J,blockers:te}),Pe),S=it.Pop,C=!1,P=!1,le=!1,Q=!1,Z=[],_e=[]}async function pa(I,R){if(typeof I=="number"){t.history.go(I);return}let D=pg(y.location,y.matches,l,u.v7_prependBasename,I,R==null?void 0:R.fromRouteId,R==null?void 0:R.relative),{path:z,submission:oe,error:ie}=w1(u.v7_normalizeFormMethod,!1,D,R),ue=y.location,te=Dl(y.location,z,R&&R.state);te=He({},te,t.history.encodeLocation(te));let J=R&&R.replace!=null?R.replace:void 0,Pe=it.Push;J===!0?Pe=it.Replace:J===!1||oe!=null&&$n(oe.formMethod)&&oe.formAction===y.location.pathname+y.location.search&&(Pe=it.Replace);let qe=R&&"preventScrollReset"in R?R.preventScrollReset===!0:void 0,ye=zu({currentLocation:ue,nextLocation:te,historyAction:Pe});if(ye){Yr(ye,{state:"blocked",location:te,proceed(){Yr(ye,{state:"proceeding",proceed:void 0,reset:void 0,location:te}),pa(I,R)},reset(){let be=new Map(y.blockers);be.set(ye,Ca),Ne({blockers:be})}});return}return await _r(Pe,te,{submission:oe,pendingError:ie,preventScrollReset:qe,replace:R&&R.replace,enableViewTransition:R&&R.unstable_viewTransition})}function $u(){if(q(),Ne({revalidation:"loading"}),y.navigation.state!=="submitting"){if(y.navigation.state==="idle"){_r(y.historyAction,y.location,{startUninterruptedRevalidation:!0});return}_r(S||y.historyAction,y.navigation.location,{overrideNavigation:y.navigation})}}async function _r(I,R,D){A&&A.abort(),A=null,S=I,le=(D&&D.startUninterruptedRevalidation)===!0,EA(y.location,y.matches),C=(D&&D.preventScrollReset)===!0,P=(D&&D.enableViewTransition)===!0;let z=a||o,oe=D&&D.overrideNavigation,ie=fo(z,R,l);if(!ie){let be=Sn(404,{pathname:R.pathname}),{matches:rt,route:Gi}=R1(z);Ws(),vr(R,{matches:rt,loaderData:{},errors:{[Gi.id]:be}});return}if(y.initialized&&!Q&&D2(y.location,R)&&!(D&&D.submission&&$n(D.submission.formMethod))){vr(R,{matches:ie});return}A=new AbortController;let ue=xa(t.history,R,A.signal,D&&D.submission),te,J;if(D&&D.pendingError)J={[po(ie).route.id]:D.pendingError};else if(D&&D.submission&&$n(D.submission.formMethod)){let be=await Uu(ue,R,D.submission,ie,{replace:D.replace});if(be.shortCircuited)return;te=be.pendingActionData,J=be.pendingActionError,oe=Np(R,D.submission),ue=new Request(ue.url,{signal:ue.signal})}let{shortCircuited:Pe,loaderData:qe,errors:ye}=await Bu(ue,R,ie,oe,D&&D.submission,D&&D.fetcherSubmission,D&&D.replace,te,J);Pe||(A=null,vr(R,He({matches:ie},te?{actionData:te}:{},{loaderData:qe,errors:ye})))}async function Uu(I,R,D,z,oe){oe===void 0&&(oe={}),q();let ie=V2(R,D);Ne({navigation:ie});let ue,te=gg(z,R);if(!te.route.action&&!te.route.lazy)ue={type:st.error,error:Sn(405,{method:I.method,pathname:R.pathname,routeId:te.route.id})};else if(ue=await Ra("action",I,te,z,s,i,l),I.signal.aborted)return{shortCircuited:!0};if(Io(ue)){let J;return oe&&oe.replace!=null?J=oe.replace:J=ue.location===y.location.pathname+y.location.search,await k(y,ue,{submission:D,replace:J}),{shortCircuited:!0}}if(ol(ue)){let J=po(z,te.route.id);return(oe&&oe.replace)!==!0&&(S=it.Push),{pendingActionData:{},pendingActionError:{[J.route.id]:ue.error}}}if(ns(ue))throw Sn(400,{type:"defer-action"});return{pendingActionData:{[te.route.id]:ue.data}}}async function Bu(I,R,D,z,oe,ie,ue,te,J){let Pe=z||Np(R,oe),qe=oe||ie||P1(Pe),ye=a||o,[be,rt]=E1(t.history,y,D,qe,R,Q,Z,_e,ee,X,ye,l,te,J);if(Ws(xe=>!(D&&D.some(On=>On.route.id===xe))||be&&be.some(On=>On.route.id===xe)),ut=++nt,be.length===0&&rt.length===0){let xe=Ue();return vr(R,He({matches:D,loaderData:{},errors:J||null},te?{actionData:te}:{},xe?{fetchers:new Map(y.fetchers)}:{})),{shortCircuited:!0}}if(!le){rt.forEach(On=>{let Jr=y.fetchers.get(On.key),rp=Aa(void 0,Jr?Jr.data:void 0);y.fetchers.set(On.key,rp)});let xe=te||y.actionData;Ne(He({navigation:Pe},xe?Object.keys(xe).length===0?{actionData:null}:{actionData:xe}:{},rt.length>0?{fetchers:new Map(y.fetchers)}:{}))}rt.forEach(xe=>{he.has(xe.key)&&G(xe.key),xe.controller&&he.set(xe.key,xe.controller)});let Gi=()=>rt.forEach(xe=>G(xe.key));A&&A.signal.addEventListener("abort",Gi);let{results:Ki,loaderResults:ga,fetcherResults:Zf}=await b(y.matches,D,be,rt,I);if(I.signal.aborted)return{shortCircuited:!0};A&&A.signal.removeEventListener("abort",Gi),rt.forEach(xe=>he.delete(xe.key));let Er=x1(Ki);if(Er){if(Er.idx>=be.length){let xe=rt[Er.idx-be.length].key;X.add(xe)}return await k(y,Er.result,{replace:ue}),{shortCircuited:!0}}let{loaderData:Tr,errors:Wu}=k1(y,D,be,ga,J,rt,Zf,Ee);Ee.forEach((xe,On)=>{xe.subscribe(Jr=>{(Jr||xe.done)&&Ee.delete(On)})});let ep=Ue(),tp=wr(ut),np=ep||tp||rt.length>0;return He({loaderData:Tr,errors:Wu},np?{fetchers:new Map(y.fetchers)}:{})}function Xf(I){return y.fetchers.get(I)||C2}function i0(I,R,D,z){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");he.has(I)&&G(I);let oe=a||o,ie=pg(y.location,y.matches,l,u.v7_prependBasename,D,R,z==null?void 0:z.relative),ue=fo(oe,ie,l);if(!ue){$(I,R,Sn(404,{pathname:ie}));return}let{path:te,submission:J,error:Pe}=w1(u.v7_normalizeFormMethod,!0,ie,z);if(Pe){$(I,R,Pe);return}let qe=gg(ue,te);if(C=(z&&z.preventScrollReset)===!0,J&&$n(J.formMethod)){s0(I,R,te,qe,ue,J);return}ee.set(I,{routeId:R,path:te}),T(I,R,te,qe,ue,J)}async function s0(I,R,D,z,oe,ie){if(q(),ee.delete(I),!z.route.action&&!z.route.lazy){let mt=Sn(405,{method:ie.formMethod,pathname:D,routeId:R});$(I,R,mt);return}let ue=y.fetchers.get(I),te=j2(ie,ue);y.fetchers.set(I,te),Ne({fetchers:new Map(y.fetchers)});let J=new AbortController,Pe=xa(t.history,D,J.signal,ie);he.set(I,J);let qe=nt,ye=await Ra("action",Pe,z,oe,s,i,l);if(Pe.signal.aborted){he.get(I)===J&&he.delete(I);return}if(Io(ye))if(he.delete(I),ut>qe){let mt=Ks(void 0);y.fetchers.set(I,mt),Ne({fetchers:new Map(y.fetchers)});return}else{X.add(I);let mt=Aa(ie);return y.fetchers.set(I,mt),Ne({fetchers:new Map(y.fetchers)}),k(y,ye,{fetcherSubmission:ie})}if(ol(ye)){$(I,R,ye.error);return}if(ns(ye))throw Sn(400,{type:"defer-action"});let be=y.navigation.location||y.location,rt=xa(t.history,be,J.signal),Gi=a||o,Ki=y.navigation.state!=="idle"?fo(Gi,y.navigation.location,l):y.matches;de(Ki,"Didn't find any matches after fetcher action");let ga=++nt;F.set(I,ga);let Zf=Aa(ie,ye.data);y.fetchers.set(I,Zf);let[Er,Tr]=E1(t.history,y,Ki,ie,be,Q,Z,_e,ee,X,Gi,l,{[z.route.id]:ye.data},void 0);Tr.filter(mt=>mt.key!==I).forEach(mt=>{let ya=mt.key,a0=y.fetchers.get(ya),SA=Aa(void 0,a0?a0.data:void 0);y.fetchers.set(ya,SA),he.has(ya)&&G(ya),mt.controller&&he.set(ya,mt.controller)}),Ne({fetchers:new Map(y.fetchers)});let Wu=()=>Tr.forEach(mt=>G(mt.key));J.signal.addEventListener("abort",Wu);let{results:ep,loaderResults:tp,fetcherResults:np}=await b(y.matches,Ki,Er,Tr,rt);if(J.signal.aborted)return;J.signal.removeEventListener("abort",Wu),F.delete(I),he.delete(I),Tr.forEach(mt=>he.delete(mt.key));let xe=x1(ep);if(xe){if(xe.idx>=Er.length){let mt=Tr[xe.idx-Er.length].key;X.add(mt)}return k(y,xe.result)}let{loaderData:On,errors:Jr}=k1(y,y.matches,Er,tp,void 0,Tr,np,Ee);if(y.fetchers.has(I)){let mt=Ks(ye.data);y.fetchers.set(I,mt)}let rp=wr(ga);y.navigation.state==="loading"&&ga>ut?(de(S,"Expected pending action"),A&&A.abort(),vr(y.navigation.location,{matches:Ki,loaderData:On,errors:Jr,fetchers:new Map(y.fetchers)})):(Ne(He({errors:Jr,loaderData:C1(y.loaderData,On,Ki,Jr)},rp||Tr.length>0?{fetchers:new Map(y.fetchers)}:{})),Q=!1)}async function T(I,R,D,z,oe,ie){let ue=y.fetchers.get(I),te=Aa(ie,ue?ue.data:void 0);y.fetchers.set(I,te),Ne({fetchers:new Map(y.fetchers)});let J=new AbortController,Pe=xa(t.history,D,J.signal);he.set(I,J);let qe=nt,ye=await Ra("loader",Pe,z,oe,s,i,l);if(ns(ye)&&(ye=await gI(ye,Pe.signal,!0)||ye),he.get(I)===J&&he.delete(I),Pe.signal.aborted)return;if(Io(ye))if(ut>qe){let rt=Ks(void 0);y.fetchers.set(I,rt),Ne({fetchers:new Map(y.fetchers)});return}else{X.add(I),await k(y,ye);return}if(ol(ye)){let rt=po(y.matches,R);y.fetchers.delete(I),Ne({fetchers:new Map(y.fetchers),errors:{[rt.route.id]:ye.error}});return}de(!ns(ye),"Unhandled fetcher deferred data");let be=Ks(ye.data);y.fetchers.set(I,be),Ne({fetchers:new Map(y.fetchers)})}async function k(I,R,D){let{submission:z,fetcherSubmission:oe,replace:ie}=D===void 0?{}:D;R.revalidate&&(Q=!0);let ue=Dl(I.location,R.location,{_isRedirect:!0});if(de(ue,"Expected a location on the redirect navigation"),n){let be=!1;if(R.reloadDocument)be=!0;else if(dI.test(R.location)){const rt=t.history.createURL(R.location);be=rt.origin!==e.location.origin||na(rt.pathname,l)==null}if(be){ie?e.location.replace(R.location):e.location.assign(R.location);return}}A=null;let te=ie===!0?it.Replace:it.Push,{formMethod:J,formAction:Pe,formEncType:qe}=I.navigation;!z&&!oe&&J&&Pe&&qe&&(z=P1(I.navigation));let ye=z||oe;if(k2.has(R.status)&&ye&&$n(ye.formMethod))await _r(te,ue,{submission:He({},ye,{formAction:R.location}),preventScrollReset:C});else{let be=Np(ue,z);await _r(te,ue,{overrideNavigation:be,fetcherSubmission:oe,preventScrollReset:C})}}async function b(I,R,D,z,oe){let ie=await Promise.all([...D.map(J=>Ra("loader",oe,J,R,s,i,l)),...z.map(J=>J.matches&&J.match&&J.controller?Ra("loader",xa(t.history,J.path,J.controller.signal),J.match,J.matches,s,i,l):{type:st.error,error:Sn(404,{pathname:J.path})})]),ue=ie.slice(0,D.length),te=ie.slice(D.length);return await Promise.all([A1(I,D,ue,ue.map(()=>oe.signal),!1,y.loaderData),A1(I,z.map(J=>J.match),te,z.map(J=>J.controller?J.controller.signal:null),!0)]),{results:ie,loaderResults:ue,fetcherResults:te}}function q(){Q=!0,Z.push(...Ws()),ee.forEach((I,R)=>{he.has(R)&&(_e.push(R),G(R))})}function $(I,R,D){let z=po(y.matches,R);j(I),Ne({errors:{[z.route.id]:D},fetchers:new Map(y.fetchers)})}function j(I){let R=y.fetchers.get(I);he.has(I)&&!(R&&R.state==="loading"&&F.has(I))&&G(I),ee.delete(I),F.delete(I),X.delete(I),y.fetchers.delete(I)}function G(I){let R=he.get(I);de(R,"Expected fetch controller: "+I),R.abort(),he.delete(I)}function Le(I){for(let R of I){let D=Xf(R),z=Ks(D.data);y.fetchers.set(R,z)}}function Ue(){let I=[],R=!1;for(let D of X){let z=y.fetchers.get(D);de(z,"Expected fetcher: "+D),z.state==="loading"&&(X.delete(D),I.push(D),R=!0)}return Le(I),R}function wr(I){let R=[];for(let[D,z]of F)if(z<I){let oe=y.fetchers.get(D);de(oe,"Expected fetcher: "+D),oe.state==="loading"&&(G(D),F.delete(D),R.push(D))}return Le(R),R.length>0}function Yf(I,R){let D=y.blockers.get(I)||Ca;return Ie.get(I)!==R&&Ie.set(I,R),D}function zs(I){y.blockers.delete(I),Ie.delete(I)}function Yr(I,R){let D=y.blockers.get(I)||Ca;de(D.state==="unblocked"&&R.state==="blocked"||D.state==="blocked"&&R.state==="blocked"||D.state==="blocked"&&R.state==="proceeding"||D.state==="blocked"&&R.state==="unblocked"||D.state==="proceeding"&&R.state==="unblocked","Invalid blocker state transition: "+D.state+" -> "+R.state);let z=new Map(y.blockers);z.set(I,R),Ne({blockers:z})}function zu(I){let{currentLocation:R,nextLocation:D,historyAction:z}=I;if(Ie.size===0)return;Ie.size>1&&vs(!1,"A router only supports one blocker at a time");let oe=Array.from(Ie.entries()),[ie,ue]=oe[oe.length-1],te=y.blockers.get(ie);if(!(te&&te.state==="proceeding")&&ue({currentLocation:R,nextLocation:D,historyAction:z}))return ie}function Ws(I){let R=[];return Ee.forEach((D,z)=>{(!I||I(z))&&(D.cancel(),R.push(z),Ee.delete(z))}),R}function Jf(I,R,D){if(h=I,g=R,f=D||null,!w&&y.navigation===bp){w=!0;let z=o0(y.location,y.matches);z!=null&&Ne({restoreScrollPosition:z})}return()=>{h=null,g=null,f=null}}function ma(I,R){return f&&f(I,R.map(z=>t2(z,y.loaderData)))||I.key}function EA(I,R){if(h&&g){let D=ma(I,R);h[D]=g()}}function o0(I,R){if(h){let D=ma(I,R),z=h[D];if(typeof z=="number")return z}return null}function TA(I){s={},a=fg(I,i,void 0,s)}return _={get basename(){return l},get state(){return y},get routes(){return o},get window(){return e},initialize:Tn,subscribe:cn,enableScrollRestoration:Jf,navigate:pa,fetch:i0,revalidate:$u,createHref:I=>t.history.createHref(I),encodeLocation:I=>t.history.encodeLocation(I),getFetcher:Xf,deleteFetcher:j,dispose:Hi,getBlocker:Yf,deleteBlocker:zs,_internalFetchControllers:he,_internalActiveDeferreds:Ee,_internalSetRoutes:TA},_}function A2(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function pg(t,e,n,r,i,s,o){let a,l;if(s!=null&&o!=="path"){a=[];for(let c of e)if(a.push(c),c.route.id===s){l=c;break}}else a=e,l=e[e.length-1];let u=Fd(i||".",hu(a).map(c=>c.pathnameBase),na(t.pathname,n)||t.pathname,o==="path");return i==null&&(u.search=t.search,u.hash=t.hash),(i==null||i===""||i===".")&&l&&l.route.index&&!uv(u.search)&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),r&&n!=="/"&&(u.pathname=u.pathname==="/"?n:Lr([n,u.pathname])),_s(u)}function w1(t,e,n,r){if(!r||!A2(r))return{path:n};if(r.formMethod&&!M2(r.formMethod))return{path:n,error:Sn(405,{method:r.formMethod})};let i=()=>({path:n,error:Sn(400,{type:"invalid-body"})}),s=r.formMethod||"get",o=t?s.toUpperCase():s.toLowerCase(),a=mI(n);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!$n(o))return i();let h=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((f,g)=>{let[w,E]=g;return""+f+w+"="+E+`
`},""):String(r.body);return{path:n,submission:{formMethod:o,formAction:a,formEncType:r.formEncType,formData:void 0,json:void 0,text:h}}}else if(r.formEncType==="application/json"){if(!$n(o))return i();try{let h=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:o,formAction:a,formEncType:r.formEncType,formData:void 0,json:h,text:void 0}}}catch{return i()}}}de(typeof FormData=="function","FormData is not available in this environment");let l,u;if(r.formData)l=mg(r.formData),u=r.formData;else if(r.body instanceof FormData)l=mg(r.body),u=r.body;else if(r.body instanceof URLSearchParams)l=r.body,u=I1(l);else if(r.body==null)l=new URLSearchParams,u=new FormData;else try{l=new URLSearchParams(r.body),u=I1(l)}catch{return i()}let c={formMethod:o,formAction:a,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:u,json:void 0,text:void 0};if($n(c.formMethod))return{path:n,submission:c};let d=Qr(n);return e&&d.search&&uv(d.search)&&l.append("index",""),d.search="?"+l,{path:_s(d),submission:c}}function P2(t,e){let n=t;if(e){let r=t.findIndex(i=>i.route.id===e);r>=0&&(n=t.slice(0,r))}return n}function E1(t,e,n,r,i,s,o,a,l,u,c,d,h,f){let g=f?Object.values(f)[0]:h?Object.values(h)[0]:void 0,w=t.createURL(e.location),E=t.createURL(i),v=f?Object.keys(f)[0]:void 0,_=P2(n,v).filter((S,C)=>{if(S.route.lazy)return!0;if(S.route.loader==null)return!1;if(b2(e.loaderData,e.matches[C],S)||o.some(O=>O===S.route.id))return!0;let A=e.matches[C],P=S;return T1(S,He({currentUrl:w,currentParams:A.params,nextUrl:E,nextParams:P.params},r,{actionResult:g,defaultShouldRevalidate:s||w.pathname+w.search===E.pathname+E.search||w.search!==E.search||pI(A,P)}))}),y=[];return l.forEach((S,C)=>{if(!n.some(le=>le.route.id===S.routeId))return;let A=fo(c,S.path,d);if(!A){y.push({key:C,routeId:S.routeId,path:S.path,matches:null,match:null,controller:null});return}let P=e.fetchers.get(C),O=gg(A,S.path),M=!1;u.has(C)?M=!1:a.includes(C)?M=!0:P&&P.state!=="idle"&&P.data===void 0?M=s:M=T1(O,He({currentUrl:w,currentParams:e.matches[e.matches.length-1].params,nextUrl:E,nextParams:n[n.length-1].params},r,{actionResult:g,defaultShouldRevalidate:s})),M&&y.push({key:C,routeId:S.routeId,path:S.path,matches:A,match:O,controller:new AbortController})}),[_,y]}function b2(t,e,n){let r=!e||n.route.id!==e.route.id,i=t[n.route.id]===void 0;return r||i}function pI(t,e){let n=t.route.path;return t.pathname!==e.pathname||n!=null&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function T1(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}async function S1(t,e,n){if(!t.lazy)return;let r=await t.lazy();if(!t.lazy)return;let i=n[t.id];de(i,"No route found in manifest");let s={};for(let o in r){let l=i[o]!==void 0&&o!=="hasErrorBoundary";vs(!l,'Route "'+i.id+'" has a static property "'+o+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+o+'" will be ignored.')),!l&&!Zb.has(o)&&(s[o]=r[o])}Object.assign(i,s),Object.assign(i,He({},e(i),{lazy:void 0}))}async function Ra(t,e,n,r,i,s,o,a){a===void 0&&(a={});let l,u,c,d=g=>{let w,E=new Promise((v,p)=>w=p);return c=()=>w(),e.signal.addEventListener("abort",c),Promise.race([g({request:e,params:n.params,context:a.requestContext}),E])};try{let g=n.route[t];if(n.route.lazy)if(g){let w,E=await Promise.all([d(g).catch(v=>{w=v}),S1(n.route,s,i)]);if(w)throw w;u=E[0]}else if(await S1(n.route,s,i),g=n.route[t],g)u=await d(g);else if(t==="action"){let w=new URL(e.url),E=w.pathname+w.search;throw Sn(405,{method:e.method,pathname:E,routeId:n.route.id})}else return{type:st.data,data:void 0};else if(g)u=await d(g);else{let w=new URL(e.url),E=w.pathname+w.search;throw Sn(404,{pathname:E})}de(u!==void 0,"You defined "+(t==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+t+"` ")+"function. Please return a value or `null`.")}catch(g){l=st.error,u=g}finally{c&&e.signal.removeEventListener("abort",c)}if(L2(u)){let g=u.status;if(I2.has(g)){let v=u.headers.get("Location");if(de(v,"Redirects returned/thrown from loaders/actions must have a Location header"),!dI.test(v))v=pg(new URL(e.url),r.slice(0,r.indexOf(n)+1),o,!0,v);else if(!a.isStaticRequest){let p=new URL(e.url),_=v.startsWith("//")?new URL(p.protocol+v):new URL(v),y=na(_.pathname,o)!=null;_.origin===p.origin&&y&&(v=_.pathname+_.search+_.hash)}if(a.isStaticRequest)throw u.headers.set("Location",v),u;return{type:st.redirect,status:g,location:v,revalidate:u.headers.get("X-Remix-Revalidate")!==null,reloadDocument:u.headers.get("X-Remix-Reload-Document")!==null}}if(a.isRouteRequest)throw{type:l===st.error?st.error:st.data,response:u};let w,E=u.headers.get("Content-Type");return E&&/\bapplication\/json\b/.test(E)?w=await u.json():w=await u.text(),l===st.error?{type:l,error:new lv(g,u.statusText,w),headers:u.headers}:{type:st.data,data:w,statusCode:u.status,headers:u.headers}}if(l===st.error)return{type:l,error:u};if(O2(u)){var h,f;return{type:st.deferred,deferredData:u,statusCode:(h=u.init)==null?void 0:h.status,headers:((f=u.init)==null?void 0:f.headers)&&new Headers(u.init.headers)}}return{type:st.data,data:u}}function xa(t,e,n,r){let i=t.createURL(mI(e)).toString(),s={signal:n};if(r&&$n(r.formMethod)){let{formMethod:o,formEncType:a}=r;s.method=o.toUpperCase(),a==="application/json"?(s.headers=new Headers({"Content-Type":a}),s.body=JSON.stringify(r.json)):a==="text/plain"?s.body=r.text:a==="application/x-www-form-urlencoded"&&r.formData?s.body=mg(r.formData):s.body=r.formData}return new Request(i,s)}function mg(t){let e=new URLSearchParams;for(let[n,r]of t.entries())e.append(n,typeof r=="string"?r:r.name);return e}function I1(t){let e=new FormData;for(let[n,r]of t.entries())e.append(n,r);return e}function N2(t,e,n,r,i){let s={},o=null,a,l=!1,u={};return n.forEach((c,d)=>{let h=e[d].route.id;if(de(!Io(c),"Cannot handle redirect results in processLoaderData"),ol(c)){let f=po(t,h),g=c.error;r&&(g=Object.values(r)[0],r=void 0),o=o||{},o[f.route.id]==null&&(o[f.route.id]=g),s[h]=void 0,l||(l=!0,a=cI(c.error)?c.error.status:500),c.headers&&(u[h]=c.headers)}else ns(c)?(i.set(h,c.deferredData),s[h]=c.deferredData.data):s[h]=c.data,c.statusCode!=null&&c.statusCode!==200&&!l&&(a=c.statusCode),c.headers&&(u[h]=c.headers)}),r&&(o=r,s[Object.keys(r)[0]]=void 0),{loaderData:s,errors:o,statusCode:a||200,loaderHeaders:u}}function k1(t,e,n,r,i,s,o,a){let{loaderData:l,errors:u}=N2(e,n,r,i,a);for(let c=0;c<s.length;c++){let{key:d,match:h,controller:f}=s[c];de(o!==void 0&&o[c]!==void 0,"Did not find corresponding fetcher result");let g=o[c];if(!(f&&f.signal.aborted))if(ol(g)){let w=po(t.matches,h==null?void 0:h.route.id);u&&u[w.route.id]||(u=He({},u,{[w.route.id]:g.error})),t.fetchers.delete(d)}else if(Io(g))de(!1,"Unhandled fetcher revalidation redirect");else if(ns(g))de(!1,"Unhandled fetcher deferred data");else{let w=Ks(g.data);t.fetchers.set(d,w)}}return{loaderData:l,errors:u}}function C1(t,e,n,r){let i=He({},e);for(let s of n){let o=s.route.id;if(e.hasOwnProperty(o)?e[o]!==void 0&&(i[o]=e[o]):t[o]!==void 0&&s.route.loader&&(i[o]=t[o]),r&&r.hasOwnProperty(o))break}return i}function po(t,e){return(e?t.slice(0,t.findIndex(r=>r.route.id===e)+1):[...t]).reverse().find(r=>r.route.hasErrorBoundary===!0)||t[0]}function R1(t){let e=t.length===1?t[0]:t.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function Sn(t,e){let{pathname:n,routeId:r,method:i,type:s}=e===void 0?{}:e,o="Unknown Server Error",a="Unknown @remix-run/router error";return t===400?(o="Bad Request",i&&n&&r?a="You made a "+i+' request to "'+n+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":s==="defer-action"?a="defer() is not supported in actions":s==="invalid-body"&&(a="Unable to encode submission body")):t===403?(o="Forbidden",a='Route "'+r+'" does not match URL "'+n+'"'):t===404?(o="Not Found",a='No route matches URL "'+n+'"'):t===405&&(o="Method Not Allowed",i&&n&&r?a="You made a "+i.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":i&&(a='Invalid request method "'+i.toUpperCase()+'"')),new lv(t||500,o,new Error(a),!0)}function x1(t){for(let e=t.length-1;e>=0;e--){let n=t[e];if(Io(n))return{result:n,idx:e}}}function mI(t){let e=typeof t=="string"?Qr(t):t;return _s(He({},e,{hash:""}))}function D2(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function ns(t){return t.type===st.deferred}function ol(t){return t.type===st.error}function Io(t){return(t&&t.type)===st.redirect}function O2(t){let e=t;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function L2(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function M2(t){return S2.has(t.toLowerCase())}function $n(t){return E2.has(t.toLowerCase())}async function A1(t,e,n,r,i,s){for(let o=0;o<n.length;o++){let a=n[o],l=e[o];if(!l)continue;let u=t.find(d=>d.route.id===l.route.id),c=u!=null&&!pI(u,l)&&(s&&s[l.route.id])!==void 0;if(ns(a)&&(i||c)){let d=r[o];de(d,"Expected an AbortSignal for revalidating fetcher deferred result"),await gI(a,d,i).then(h=>{h&&(n[o]=h||n[o])})}}}async function gI(t,e,n){if(n===void 0&&(n=!1),!await t.deferredData.resolveData(e)){if(n)try{return{type:st.data,data:t.deferredData.unwrappedData}}catch(i){return{type:st.error,error:i}}return{type:st.data,data:t.deferredData.data}}}function uv(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function gg(t,e){let n=typeof e=="string"?Qr(e).search:e.search;if(t[t.length-1].route.index&&uv(n||""))return t[t.length-1];let r=hu(t);return r[r.length-1]}function P1(t){let{formMethod:e,formAction:n,formEncType:r,text:i,formData:s,json:o}=t;if(!(!e||!n||!r)){if(i!=null)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:void 0,text:i};if(s!=null)return{formMethod:e,formAction:n,formEncType:r,formData:s,json:void 0,text:void 0};if(o!==void 0)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:o,text:void 0}}}function Np(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function V2(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function Aa(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function j2(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function Ks(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function F2(t,e){try{let n=t.sessionStorage.getItem(fI);if(n){let r=JSON.parse(n);for(let[i,s]of Object.entries(r||{}))s&&Array.isArray(s)&&e.set(i,new Set(s||[]))}}catch{}}function $2(t,e){if(e.size>0){let n={};for(let[r,i]of e)n[r]=[...i];try{t.sessionStorage.setItem(fI,JSON.stringify(n))}catch(r){vs(!1,"Failed to save applied view transitions in sessionStorage ("+r+").")}}}/**
 * React Router v6.17.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _h(){return _h=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_h.apply(this,arguments)}const $d=x.createContext(null),yI=x.createContext(null),ra=x.createContext(null),Ud=x.createContext(null),Bi=x.createContext({outlet:null,matches:[],isDataRoute:!1}),vI=x.createContext(null);function U2(t,e){let{relative:n}=e===void 0?{}:e;ia()||de(!1);let{basename:r,navigator:i}=x.useContext(ra),{hash:s,pathname:o,search:a}=wI(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Lr([r,o])),i.createHref({pathname:l,search:a,hash:s})}function ia(){return x.useContext(Ud)!=null}function du(){return ia()||de(!1),x.useContext(Ud).location}function _I(t){x.useContext(ra).static||x.useLayoutEffect(t)}function sa(){let{isDataRoute:t}=x.useContext(Bi);return t?Z2():B2()}function B2(){ia()||de(!1);let t=x.useContext($d),{basename:e,navigator:n}=x.useContext(ra),{matches:r}=x.useContext(Bi),{pathname:i}=du(),s=JSON.stringify(hu(r).map(l=>l.pathnameBase)),o=x.useRef(!1);return _I(()=>{o.current=!0}),x.useCallback(function(l,u){if(u===void 0&&(u={}),!o.current)return;if(typeof l=="number"){n.go(l);return}let c=Fd(l,JSON.parse(s),i,u.relative==="path");t==null&&e!=="/"&&(c.pathname=c.pathname==="/"?e:Lr([e,c.pathname])),(u.replace?n.replace:n.push)(c,u.state,u)},[e,n,s,i,t])}function wI(t,e){let{relative:n}=e===void 0?{}:e,{matches:r}=x.useContext(Bi),{pathname:i}=du(),s=JSON.stringify(hu(r).map(o=>o.pathnameBase));return x.useMemo(()=>Fd(t,JSON.parse(s),i,n==="path"),[t,s,i,n])}function z2(t,e,n){ia()||de(!1);let{navigator:r}=x.useContext(ra),{matches:i}=x.useContext(Bi),s=i[i.length-1],o=s?s.params:{};s&&s.pathname;let a=s?s.pathnameBase:"/";s&&s.route;let l=du(),u;if(e){var c;let w=typeof e=="string"?Qr(e):e;a==="/"||(c=w.pathname)!=null&&c.startsWith(a)||de(!1),u=w}else u=l;let d=u.pathname||"/",h=a==="/"?d:d.slice(a.length)||"/",f=fo(t,{pathname:h}),g=K2(f&&f.map(w=>Object.assign({},w,{params:Object.assign({},o,w.params),pathname:Lr([a,r.encodeLocation?r.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?a:Lr([a,r.encodeLocation?r.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),i,n);return e&&g?x.createElement(Ud.Provider,{value:{location:_h({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:it.Pop}},g):g}function W2(){let t=J2(),e=cI(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},s=null;return x.createElement(x.Fragment,null,x.createElement("h2",null,"Unexpected Application Error!"),x.createElement("h3",{style:{fontStyle:"italic"}},e),n?x.createElement("pre",{style:i},n):null,s)}const q2=x.createElement(W2,null);class H2 extends x.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error?x.createElement(Bi.Provider,{value:this.props.routeContext},x.createElement(vI.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function G2(t){let{routeContext:e,match:n,children:r}=t,i=x.useContext($d);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),x.createElement(Bi.Provider,{value:e},r)}function K2(t,e,n){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),t==null){var i;if((i=n)!=null&&i.errors)t=n.matches;else return null}let s=t,o=(r=n)==null?void 0:r.errors;if(o!=null){let a=s.findIndex(l=>l.route.id&&(o==null?void 0:o[l.route.id]));a>=0||de(!1),s=s.slice(0,Math.min(s.length,a+1))}return s.reduceRight((a,l,u)=>{let c=l.route.id?o==null?void 0:o[l.route.id]:null,d=null;n&&(d=l.route.errorElement||q2);let h=e.concat(s.slice(0,u+1)),f=()=>{let g;return c?g=d:l.route.Component?g=x.createElement(l.route.Component,null):l.route.element?g=l.route.element:g=a,x.createElement(G2,{match:l,routeContext:{outlet:a,matches:h,isDataRoute:n!=null},children:g})};return n&&(l.route.ErrorBoundary||l.route.errorElement||u===0)?x.createElement(H2,{location:n.location,revalidation:n.revalidation,component:d,error:c,children:f(),routeContext:{outlet:null,matches:h,isDataRoute:!0}}):f()},null)}var EI=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(EI||{}),wh=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(wh||{});function Q2(t){let e=x.useContext($d);return e||de(!1),e}function X2(t){let e=x.useContext(yI);return e||de(!1),e}function Y2(t){let e=x.useContext(Bi);return e||de(!1),e}function TI(t){let e=Y2(),n=e.matches[e.matches.length-1];return n.route.id||de(!1),n.route.id}function J2(){var t;let e=x.useContext(vI),n=X2(wh.UseRouteError),r=TI(wh.UseRouteError);return e||((t=n.errors)==null?void 0:t[r])}function Z2(){let{router:t}=Q2(EI.UseNavigateStable),e=TI(wh.UseNavigateStable),n=x.useRef(!1);return _I(()=>{n.current=!0}),x.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,_h({fromRouteId:e},s)))},[t,e])}function SI(t){let{to:e,replace:n,state:r,relative:i}=t;ia()||de(!1);let{matches:s}=x.useContext(Bi),{pathname:o}=du(),a=sa(),l=Fd(e,hu(s).map(c=>c.pathnameBase),o,i==="path"),u=JSON.stringify(l);return x.useEffect(()=>a(JSON.parse(u),{replace:n,state:r,relative:i}),[a,u,i,n,r]),null}function e4(t){let{basename:e="/",children:n=null,location:r,navigationType:i=it.Pop,navigator:s,static:o=!1}=t;ia()&&de(!1);let a=e.replace(/^\/*/,"/"),l=x.useMemo(()=>({basename:a,navigator:s,static:o}),[a,s,o]);typeof r=="string"&&(r=Qr(r));let{pathname:u="/",search:c="",hash:d="",state:h=null,key:f="default"}=r,g=x.useMemo(()=>{let w=na(u,a);return w==null?null:{location:{pathname:w,search:c,hash:d,state:h,key:f},navigationType:i}},[a,u,c,d,h,f,i]);return g==null?null:x.createElement(ra.Provider,{value:l},x.createElement(Ud.Provider,{children:n,value:g}))}new Promise(()=>{});function t4(t){let e={hasErrorBoundary:t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&Object.assign(e,{element:x.createElement(t.Component),Component:void 0}),t.ErrorBoundary&&Object.assign(e,{errorElement:x.createElement(t.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.17.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ol(){return Ol=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ol.apply(this,arguments)}function n4(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function r4(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function i4(t,e){return t.button===0&&(!e||e==="_self")&&!r4(t)}const s4=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"];function o4(t,e){return x2({basename:e==null?void 0:e.basename,future:Ol({},e==null?void 0:e.future,{v7_prependBasename:!0}),history:Xb({window:e==null?void 0:e.window}),hydrationData:(e==null?void 0:e.hydrationData)||a4(),routes:t,mapRouteProperties:t4,window:e==null?void 0:e.window}).initialize()}function a4(){var t;let e=(t=window)==null?void 0:t.__staticRouterHydrationData;return e&&e.errors&&(e=Ol({},e,{errors:l4(e.errors)})),e}function l4(t){if(!t)return null;let e=Object.entries(t),n={};for(let[r,i]of e)if(i&&i.__type==="RouteErrorResponse")n[r]=new lv(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let s=window[i.__subType];if(typeof s=="function")try{let o=new s(i.message);o.stack="",n[r]=o}catch{}}if(n[r]==null){let s=new Error(i.message);s.stack="",n[r]=s}}else n[r]=i;return n}const u4=x.createContext({isTransitioning:!1}),c4="startTransition",b1=$A[c4];function h4(t){b1?b1(t):t()}let d4=class{constructor(){this.status="pending",this.promise=new Promise((e,n)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",n(r))}})}};function f4(t){let{fallbackElement:e,router:n,future:r}=t,[i,s]=x.useState(n.state),[o,a]=x.useState(),[l,u]=x.useState({isTransitioning:!1}),[c,d]=x.useState(),[h,f]=x.useState(),[g,w]=x.useState(),{v7_startTransition:E}=r||{},v=x.useCallback(C=>{E?h4(C):C()},[E]),p=x.useCallback((C,A)=>{let{unstable_viewTransitionOpts:P}=A;!P||n.window==null||typeof n.window.document.startViewTransition!="function"?v(()=>s(C)):h&&c?(c.resolve(),h.skipTransition(),w({state:C,currentLocation:P.currentLocation,nextLocation:P.nextLocation})):(a(C),u({isTransitioning:!0,currentLocation:P.currentLocation,nextLocation:P.nextLocation}))},[v,h,c,n.window]);x.useLayoutEffect(()=>n.subscribe(p),[n,p]),x.useEffect(()=>{l.isTransitioning&&d(new d4)},[l.isTransitioning]),x.useEffect(()=>{if(c&&o&&n.window){let C=o,A=c.promise,P=n.window.document.startViewTransition(async()=>{v(()=>s(C)),await A});P.finished.finally(()=>{d(void 0),f(void 0),a(void 0),u({isTransitioning:!1})}),f(P)}},[v,o,c,n.window]),x.useEffect(()=>{c&&o&&i.location.key===o.location.key&&c.resolve()},[c,h,i.location,o]),x.useEffect(()=>{!l.isTransitioning&&g&&(a(g.state),u({isTransitioning:!0,currentLocation:g.currentLocation,nextLocation:g.nextLocation}),w(void 0))},[l.isTransitioning,g]);let _=x.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:C=>n.navigate(C),push:(C,A,P)=>n.navigate(C,{state:A,preventScrollReset:P==null?void 0:P.preventScrollReset}),replace:(C,A,P)=>n.navigate(C,{replace:!0,state:A,preventScrollReset:P==null?void 0:P.preventScrollReset})}),[n]),y=n.basename||"/",S=x.useMemo(()=>({router:n,navigator:_,static:!1,basename:y}),[n,_,y]);return x.createElement(x.Fragment,null,x.createElement($d.Provider,{value:S},x.createElement(yI.Provider,{value:i},x.createElement(u4.Provider,{value:l},x.createElement(e4,{basename:y,location:i.location,navigationType:i.historyAction,navigator:_},i.initialized?x.createElement(p4,{routes:n.routes,state:i}):e)))),null)}function p4(t){let{routes:e,state:n}=t;return z2(e,void 0,n)}const m4=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",g4=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,$o=x.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:u,preventScrollReset:c,unstable_viewTransition:d}=e,h=n4(e,s4),{basename:f}=x.useContext(ra),g,w=!1;if(typeof u=="string"&&g4.test(u)&&(g=u,m4))try{let _=new URL(window.location.href),y=u.startsWith("//")?new URL(_.protocol+u):new URL(u),S=na(y.pathname,f);y.origin===_.origin&&S!=null?u=S+y.search+y.hash:w=!0}catch{}let E=U2(u,{relative:i}),v=y4(u,{replace:o,state:a,target:l,preventScrollReset:c,relative:i,unstable_viewTransition:d});function p(_){r&&r(_),_.defaultPrevented||v(_)}return x.createElement("a",Ol({},h,{href:g||E,onClick:w||s?r:p,ref:n,target:l}))});var N1;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(N1||(N1={}));var D1;(function(t){t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(D1||(D1={}));function y4(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a}=e===void 0?{}:e,l=sa(),u=du(),c=wI(t,{relative:o});return x.useCallback(d=>{if(i4(d,n)){d.preventDefault();let h=r!==void 0?r:_s(u)===_s(c);l(t,{replace:h,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a})}},[u,l,c,r,i,n,t,s,o,a])}var fu=t=>t.type==="checkbox",mo=t=>t instanceof Date,Yt=t=>t==null;const II=t=>typeof t=="object";var vt=t=>!Yt(t)&&!Array.isArray(t)&&II(t)&&!mo(t),v4=t=>vt(t)&&t.target?fu(t.target)?t.target.checked:t.target.value:t,_4=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,w4=(t,e)=>t.has(_4(e)),E4=t=>{const e=t.constructor&&t.constructor.prototype;return vt(e)&&e.hasOwnProperty("isPrototypeOf")},cv=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Ir(t){let e;const n=Array.isArray(t);if(t instanceof Date)e=new Date(t);else if(t instanceof Set)e=new Set(t);else if(!(cv&&(t instanceof Blob||t instanceof FileList))&&(n||vt(t)))if(e=n?[]:{},!n&&!E4(t))e=t;else for(const r in t)t.hasOwnProperty(r)&&(e[r]=Ir(t[r]));else return t;return e}var pu=t=>Array.isArray(t)?t.filter(Boolean):[],ht=t=>t===void 0,K=(t,e,n)=>{if(!e||!vt(t))return n;const r=pu(e.split(/[,[\].]+?/)).reduce((i,s)=>Yt(i)?i:i[s],t);return ht(r)||r===t?ht(t[e])?n:t[e]:r},rs=t=>typeof t=="boolean";const O1={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Bn={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Sr={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"};xr.createContext(null);var T4=(t,e,n,r=!0)=>{const i={defaultValues:e._defaultValues};for(const s in t)Object.defineProperty(i,s,{get:()=>{const o=s;return e._proxyFormState[o]!==Bn.all&&(e._proxyFormState[o]=!r||Bn.all),n&&(n[o]=!0),t[o]}});return i},In=t=>vt(t)&&!Object.keys(t).length,S4=(t,e,n,r)=>{n(t);const{name:i,...s}=t;return In(s)||Object.keys(s).length>=Object.keys(e).length||Object.keys(s).find(o=>e[o]===(!r||Bn.all))},Dp=t=>Array.isArray(t)?t:[t];function I4(t){const e=xr.useRef(t);e.current=t,xr.useEffect(()=>{const n=!t.disabled&&e.current.subject&&e.current.subject.subscribe({next:e.current.next});return()=>{n&&n.unsubscribe()}},[t.disabled])}var nr=t=>typeof t=="string",k4=(t,e,n,r,i)=>nr(t)?(r&&e.watch.add(t),K(n,t,i)):Array.isArray(t)?t.map(s=>(r&&e.watch.add(s),K(n,s))):(r&&(e.watchAll=!0),n),hv=t=>/^\w*$/.test(t),kI=t=>pu(t.replace(/["|']|\]/g,"").split(/\.|\[/));function Be(t,e,n){let r=-1;const i=hv(e)?[e]:kI(e),s=i.length,o=s-1;for(;++r<s;){const a=i[r];let l=n;if(r!==o){const u=t[a];l=vt(u)||Array.isArray(u)?u:isNaN(+i[r+1])?{}:[]}t[a]=l,t=t[a]}return t}var C4=(t,e,n,r,i)=>e?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[r]:i||!0}}:{};const yg=(t,e,n)=>{for(const r of n||Object.keys(t)){const i=K(t,r);if(i){const{_f:s,...o}=i;if(s&&e(s.name)){if(s.ref.focus){s.ref.focus();break}else if(s.refs&&s.refs[0].focus){s.refs[0].focus();break}}else vt(o)&&yg(o,e)}}};var L1=t=>({isOnSubmit:!t||t===Bn.onSubmit,isOnBlur:t===Bn.onBlur,isOnChange:t===Bn.onChange,isOnAll:t===Bn.all,isOnTouch:t===Bn.onTouched}),M1=(t,e,n)=>!n&&(e.watchAll||e.watch.has(t)||[...e.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length)))),R4=(t,e,n)=>{const r=pu(K(t,n));return Be(r,"root",e[n]),Be(t,n,r),t},dv=t=>t.type==="file",pi=t=>typeof t=="function",Eh=t=>{if(!cv)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},Oc=t=>nr(t),fv=t=>t.type==="radio",Th=t=>t instanceof RegExp;const V1={value:!1,isValid:!1},j1={value:!0,isValid:!0};var CI=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!ht(t[0].attributes.value)?ht(t[0].value)||t[0].value===""?j1:{value:t[0].value,isValid:!0}:j1:V1}return V1};const F1={isValid:!1,value:null};var RI=t=>Array.isArray(t)?t.reduce((e,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:e,F1):F1;function $1(t,e,n="validate"){if(Oc(t)||Array.isArray(t)&&t.every(Oc)||rs(t)&&!t)return{type:n,message:Oc(t)?t:"",ref:e}}var Hs=t=>vt(t)&&!Th(t)?t:{value:t,message:""},U1=async(t,e,n,r,i)=>{const{ref:s,refs:o,required:a,maxLength:l,minLength:u,min:c,max:d,pattern:h,validate:f,name:g,valueAsNumber:w,mount:E,disabled:v}=t._f,p=K(e,g);if(!E||v)return{};const _=o?o[0]:s,y=Q=>{r&&_.reportValidity&&(_.setCustomValidity(rs(Q)?"":Q||""),_.reportValidity())},S={},C=fv(s),A=fu(s),P=C||A,O=(w||dv(s))&&ht(s.value)&&ht(p)||Eh(s)&&s.value===""||p===""||Array.isArray(p)&&!p.length,M=C4.bind(null,g,n,S),le=(Q,Z,_e,he=Sr.maxLength,nt=Sr.minLength)=>{const ut=Q?Z:_e;S[g]={type:Q?he:nt,message:ut,ref:s,...M(Q?he:nt,ut)}};if(i?!Array.isArray(p)||!p.length:a&&(!P&&(O||Yt(p))||rs(p)&&!p||A&&!CI(o).isValid||C&&!RI(o).isValid)){const{value:Q,message:Z}=Oc(a)?{value:!!a,message:a}:Hs(a);if(Q&&(S[g]={type:Sr.required,message:Z,ref:_,...M(Sr.required,Z)},!n))return y(Z),S}if(!O&&(!Yt(c)||!Yt(d))){let Q,Z;const _e=Hs(d),he=Hs(c);if(!Yt(p)&&!isNaN(p)){const nt=s.valueAsNumber||p&&+p;Yt(_e.value)||(Q=nt>_e.value),Yt(he.value)||(Z=nt<he.value)}else{const nt=s.valueAsDate||new Date(p),ut=ee=>new Date(new Date().toDateString()+" "+ee),F=s.type=="time",X=s.type=="week";nr(_e.value)&&p&&(Q=F?ut(p)>ut(_e.value):X?p>_e.value:nt>new Date(_e.value)),nr(he.value)&&p&&(Z=F?ut(p)<ut(he.value):X?p<he.value:nt<new Date(he.value))}if((Q||Z)&&(le(!!Q,_e.message,he.message,Sr.max,Sr.min),!n))return y(S[g].message),S}if((l||u)&&!O&&(nr(p)||i&&Array.isArray(p))){const Q=Hs(l),Z=Hs(u),_e=!Yt(Q.value)&&p.length>+Q.value,he=!Yt(Z.value)&&p.length<+Z.value;if((_e||he)&&(le(_e,Q.message,Z.message),!n))return y(S[g].message),S}if(h&&!O&&nr(p)){const{value:Q,message:Z}=Hs(h);if(Th(Q)&&!p.match(Q)&&(S[g]={type:Sr.pattern,message:Z,ref:s,...M(Sr.pattern,Z)},!n))return y(Z),S}if(f){if(pi(f)){const Q=await f(p,e),Z=$1(Q,_);if(Z&&(S[g]={...Z,...M(Sr.validate,Z.message)},!n))return y(Z.message),S}else if(vt(f)){let Q={};for(const Z in f){if(!In(Q)&&!n)break;const _e=$1(await f[Z](p,e),_,Z);_e&&(Q={..._e,...M(Z,_e.message)},y(_e.message),n&&(S[g]=Q))}if(!In(Q)&&(S[g]={ref:_,...Q},!n))return S}}return y(!0),S};function x4(t,e){const n=e.slice(0,-1).length;let r=0;for(;r<n;)t=ht(t)?r++:t[e[r++]];return t}function A4(t){for(const e in t)if(t.hasOwnProperty(e)&&!ht(t[e]))return!1;return!0}function Ct(t,e){const n=Array.isArray(e)?e:hv(e)?[e]:kI(e),r=n.length===1?t:x4(t,n),i=n.length-1,s=n[i];return r&&delete r[s],i!==0&&(vt(r)&&In(r)||Array.isArray(r)&&A4(r))&&Ct(t,n.slice(0,-1)),t}function Op(){let t=[];return{get observers(){return t},next:i=>{for(const s of t)s.next&&s.next(i)},subscribe:i=>(t.push(i),{unsubscribe:()=>{t=t.filter(s=>s!==i)}}),unsubscribe:()=>{t=[]}}}var Sh=t=>Yt(t)||!II(t);function is(t,e){if(Sh(t)||Sh(e))return t===e;if(mo(t)&&mo(e))return t.getTime()===e.getTime();const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(const i of n){const s=t[i];if(!r.includes(i))return!1;if(i!=="ref"){const o=e[i];if(mo(s)&&mo(o)||vt(s)&&vt(o)||Array.isArray(s)&&Array.isArray(o)?!is(s,o):s!==o)return!1}}return!0}var xI=t=>t.type==="select-multiple",P4=t=>fv(t)||fu(t),Lp=t=>Eh(t)&&t.isConnected,AI=t=>{for(const e in t)if(pi(t[e]))return!0;return!1};function Ih(t,e={}){const n=Array.isArray(t);if(vt(t)||n)for(const r in t)Array.isArray(t[r])||vt(t[r])&&!AI(t[r])?(e[r]=Array.isArray(t[r])?[]:{},Ih(t[r],e[r])):Yt(t[r])||(e[r]=!0);return e}function PI(t,e,n){const r=Array.isArray(t);if(vt(t)||r)for(const i in t)Array.isArray(t[i])||vt(t[i])&&!AI(t[i])?ht(e)||Sh(n[i])?n[i]=Array.isArray(t[i])?Ih(t[i],[]):{...Ih(t[i])}:PI(t[i],Yt(e)?{}:e[i],n[i]):n[i]=!is(t[i],e[i]);return n}var Mp=(t,e)=>PI(t,e,Ih(e)),bI=(t,{valueAsNumber:e,valueAsDate:n,setValueAs:r})=>ht(t)?t:e?t===""?NaN:t&&+t:n&&nr(t)?new Date(t):r?r(t):t;function Vp(t){const e=t.ref;if(!(t.refs?t.refs.every(n=>n.disabled):e.disabled))return dv(e)?e.files:fv(e)?RI(t.refs).value:xI(e)?[...e.selectedOptions].map(({value:n})=>n):fu(e)?CI(t.refs).value:bI(ht(e.value)?t.ref.value:e.value,t)}var b4=(t,e,n,r)=>{const i={};for(const s of t){const o=K(e,s);o&&Be(i,s,o._f)}return{criteriaMode:n,names:[...t],fields:i,shouldUseNativeValidation:r}},Pa=t=>ht(t)?t:Th(t)?t.source:vt(t)?Th(t.value)?t.value.source:t.value:t,N4=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate);function B1(t,e,n){const r=K(t,n);if(r||hv(n))return{error:r,name:n};const i=n.split(".");for(;i.length;){const s=i.join("."),o=K(e,s),a=K(t,s);if(o&&!Array.isArray(o)&&n!==s)return{name:n};if(a&&a.type)return{name:s,error:a};i.pop()}return{name:n}}var D4=(t,e,n,r,i)=>i.isOnAll?!1:!n&&i.isOnTouch?!(e||t):(n?r.isOnBlur:i.isOnBlur)?!t:(n?r.isOnChange:i.isOnChange)?t:!0,O4=(t,e)=>!pu(K(t,e)).length&&Ct(t,e);const L4={mode:Bn.onSubmit,reValidateMode:Bn.onChange,shouldFocusError:!0};function M4(t={},e){let n={...L4,...t},r={submitCount:0,isDirty:!1,isLoading:pi(n.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},errors:{}},i={},s=vt(n.defaultValues)||vt(n.values)?Ir(n.defaultValues||n.values)||{}:{},o=n.shouldUnregister?{}:Ir(s),a={action:!1,mount:!1,watch:!1},l={mount:new Set,unMount:new Set,array:new Set,watch:new Set},u,c=0;const d={isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},h={values:Op(),array:Op(),state:Op()},f=t.resetOptions&&t.resetOptions.keepDirtyValues,g=L1(n.mode),w=L1(n.reValidateMode),E=n.criteriaMode===Bn.all,v=T=>k=>{clearTimeout(c),c=setTimeout(T,k)},p=async T=>{if(d.isValid||T){const k=n.resolver?In((await O()).errors):await le(i,!0);k!==r.isValid&&h.state.next({isValid:k})}},_=T=>d.isValidating&&h.state.next({isValidating:T}),y=(T,k=[],b,q,$=!0,j=!0)=>{if(q&&b){if(a.action=!0,j&&Array.isArray(K(i,T))){const G=b(K(i,T),q.argA,q.argB);$&&Be(i,T,G)}if(j&&Array.isArray(K(r.errors,T))){const G=b(K(r.errors,T),q.argA,q.argB);$&&Be(r.errors,T,G),O4(r.errors,T)}if(d.touchedFields&&j&&Array.isArray(K(r.touchedFields,T))){const G=b(K(r.touchedFields,T),q.argA,q.argB);$&&Be(r.touchedFields,T,G)}d.dirtyFields&&(r.dirtyFields=Mp(s,o)),h.state.next({name:T,isDirty:Z(T,k),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else Be(o,T,k)},S=(T,k)=>{Be(r.errors,T,k),h.state.next({errors:r.errors})},C=(T,k,b,q)=>{const $=K(i,T);if($){const j=K(o,T,ht(b)?K(s,T):b);ht(j)||q&&q.defaultChecked||k?Be(o,T,k?j:Vp($._f)):nt(T,j),a.mount&&p()}},A=(T,k,b,q,$)=>{let j=!1,G=!1;const Le={name:T};if(!b||q){d.isDirty&&(G=r.isDirty,r.isDirty=Le.isDirty=Z(),j=G!==Le.isDirty);const Ue=is(K(s,T),k);G=K(r.dirtyFields,T),Ue?Ct(r.dirtyFields,T):Be(r.dirtyFields,T,!0),Le.dirtyFields=r.dirtyFields,j=j||d.dirtyFields&&G!==!Ue}if(b){const Ue=K(r.touchedFields,T);Ue||(Be(r.touchedFields,T,b),Le.touchedFields=r.touchedFields,j=j||d.touchedFields&&Ue!==b)}return j&&$&&h.state.next(Le),j?Le:{}},P=(T,k,b,q)=>{const $=K(r.errors,T),j=d.isValid&&rs(k)&&r.isValid!==k;if(t.delayError&&b?(u=v(()=>S(T,b)),u(t.delayError)):(clearTimeout(c),u=null,b?Be(r.errors,T,b):Ct(r.errors,T)),(b?!is($,b):$)||!In(q)||j){const G={...q,...j&&rs(k)?{isValid:k}:{},errors:r.errors,name:T};r={...r,...G},h.state.next(G)}_(!1)},O=async T=>n.resolver(o,n.context,b4(T||l.mount,i,n.criteriaMode,n.shouldUseNativeValidation)),M=async T=>{const{errors:k}=await O(T);if(T)for(const b of T){const q=K(k,b);q?Be(r.errors,b,q):Ct(r.errors,b)}else r.errors=k;return k},le=async(T,k,b={valid:!0})=>{for(const q in T){const $=T[q];if($){const{_f:j,...G}=$;if(j){const Le=l.array.has(j.name),Ue=await U1($,o,E,n.shouldUseNativeValidation&&!k,Le);if(Ue[j.name]&&(b.valid=!1,k))break;!k&&(K(Ue,j.name)?Le?R4(r.errors,Ue,j.name):Be(r.errors,j.name,Ue[j.name]):Ct(r.errors,j.name))}G&&await le(G,k,b)}}return b.valid},Q=()=>{for(const T of l.unMount){const k=K(i,T);k&&(k._f.refs?k._f.refs.every(b=>!Lp(b)):!Lp(k._f.ref))&&cn(T)}l.unMount=new Set},Z=(T,k)=>(T&&k&&Be(o,T,k),!is(Ee(),s)),_e=(T,k,b)=>k4(T,l,{...a.mount?o:ht(k)?s:nr(T)?{[T]:k}:k},b,k),he=T=>pu(K(a.mount?o:s,T,t.shouldUnregister?K(s,T,[]):[])),nt=(T,k,b={})=>{const q=K(i,T);let $=k;if(q){const j=q._f;j&&(!j.disabled&&Be(o,T,bI(k,j)),$=Eh(j.ref)&&Yt(k)?"":k,xI(j.ref)?[...j.ref.options].forEach(G=>G.selected=$.includes(G.value)):j.refs?fu(j.ref)?j.refs.length>1?j.refs.forEach(G=>(!G.defaultChecked||!G.disabled)&&(G.checked=Array.isArray($)?!!$.find(Le=>Le===G.value):$===G.value)):j.refs[0]&&(j.refs[0].checked=!!$):j.refs.forEach(G=>G.checked=G.value===$):dv(j.ref)?j.ref.value="":(j.ref.value=$,j.ref.type||h.values.next({name:T,values:{...o}})))}(b.shouldDirty||b.shouldTouch)&&A(T,$,b.shouldTouch,b.shouldDirty,!0),b.shouldValidate&&ee(T)},ut=(T,k,b)=>{for(const q in k){const $=k[q],j=`${T}.${q}`,G=K(i,j);(l.array.has(T)||!Sh($)||G&&!G._f)&&!mo($)?ut(j,$,b):nt(j,$,b)}},F=(T,k,b={})=>{const q=K(i,T),$=l.array.has(T),j=Ir(k);Be(o,T,j),$?(h.array.next({name:T,values:{...o}}),(d.isDirty||d.dirtyFields)&&b.shouldDirty&&h.state.next({name:T,dirtyFields:Mp(s,o),isDirty:Z(T,j)})):q&&!q._f&&!Yt(j)?ut(T,j,b):nt(T,j,b),M1(T,l)&&h.state.next({...r}),h.values.next({name:T,values:{...o}}),!a.mount&&e()},X=async T=>{const k=T.target;let b=k.name,q=!0;const $=K(i,b),j=()=>k.type?Vp($._f):v4(T);if($){let G,Le;const Ue=j(),wr=T.type===O1.BLUR||T.type===O1.FOCUS_OUT,Yf=!N4($._f)&&!n.resolver&&!K(r.errors,b)&&!$._f.deps||D4(wr,K(r.touchedFields,b),r.isSubmitted,w,g),zs=M1(b,l,wr);Be(o,b,Ue),wr?($._f.onBlur&&$._f.onBlur(T),u&&u(0)):$._f.onChange&&$._f.onChange(T);const Yr=A(b,Ue,wr,!1),zu=!In(Yr)||zs;if(!wr&&h.values.next({name:b,type:T.type,values:{...o}}),Yf)return d.isValid&&p(),zu&&h.state.next({name:b,...zs?{}:Yr});if(!wr&&zs&&h.state.next({...r}),_(!0),n.resolver){const{errors:Ws}=await O([b]),Jf=B1(r.errors,i,b),ma=B1(Ws,i,Jf.name||b);G=ma.error,b=ma.name,Le=In(Ws)}else G=(await U1($,o,E,n.shouldUseNativeValidation))[b],q=Number.isNaN(Ue)||Ue===K(o,b,Ue),q&&(G?Le=!1:d.isValid&&(Le=await le(i,!0)));q&&($._f.deps&&ee($._f.deps),P(b,Le,G,Yr))}},ee=async(T,k={})=>{let b,q;const $=Dp(T);if(_(!0),n.resolver){const j=await M(ht(T)?T:$);b=In(j),q=T?!$.some(G=>K(j,G)):b}else T?(q=(await Promise.all($.map(async j=>{const G=K(i,j);return await le(G&&G._f?{[j]:G}:G)}))).every(Boolean),!(!q&&!r.isValid)&&p()):q=b=await le(i);return h.state.next({...!nr(T)||d.isValid&&b!==r.isValid?{}:{name:T},...n.resolver||!T?{isValid:b}:{},errors:r.errors,isValidating:!1}),k.shouldFocus&&!q&&yg(i,j=>j&&K(r.errors,j),T?$:l.mount),q},Ee=T=>{const k={...s,...a.mount?o:{}};return ht(T)?k:nr(T)?K(k,T):T.map(b=>K(k,b))},Ie=(T,k)=>({invalid:!!K((k||r).errors,T),isDirty:!!K((k||r).dirtyFields,T),isTouched:!!K((k||r).touchedFields,T),error:K((k||r).errors,T)}),Xn=T=>{T&&Dp(T).forEach(k=>Ct(r.errors,k)),h.state.next({errors:T?r.errors:{}})},Tn=(T,k,b)=>{const q=(K(i,T,{_f:{}})._f||{}).ref;Be(r.errors,T,{...k,ref:q}),h.state.next({name:T,errors:r.errors,isValid:!1}),b&&b.shouldFocus&&q&&q.focus&&q.focus()},Hi=(T,k)=>pi(T)?h.values.subscribe({next:b=>T(_e(void 0,k),b)}):_e(T,k,!0),cn=(T,k={})=>{for(const b of T?Dp(T):l.mount)l.mount.delete(b),l.array.delete(b),k.keepValue||(Ct(i,b),Ct(o,b)),!k.keepError&&Ct(r.errors,b),!k.keepDirty&&Ct(r.dirtyFields,b),!k.keepTouched&&Ct(r.touchedFields,b),!n.shouldUnregister&&!k.keepDefaultValue&&Ct(s,b);h.values.next({values:{...o}}),h.state.next({...r,...k.keepDirty?{isDirty:Z()}:{}}),!k.keepIsValid&&p()},Ne=({disabled:T,name:k,field:b,fields:q})=>{if(rs(T)){const $=T?void 0:K(o,k,Vp(b?b._f:K(q,k)._f));Be(o,k,$),A(k,$,!1,!1,!0)}},vr=(T,k={})=>{let b=K(i,T);const q=rs(k.disabled);return Be(i,T,{...b||{},_f:{...b&&b._f?b._f:{ref:{name:T}},name:T,mount:!0,...k}}),l.mount.add(T),b?Ne({field:b,disabled:k.disabled,name:T}):C(T,!0,k.value),{...q?{disabled:k.disabled}:{},...n.progressive?{required:!!k.required,min:Pa(k.min),max:Pa(k.max),minLength:Pa(k.minLength),maxLength:Pa(k.maxLength),pattern:Pa(k.pattern)}:{},name:T,onChange:X,onBlur:X,ref:$=>{if($){vr(T,k),b=K(i,T);const j=ht($.value)&&$.querySelectorAll&&$.querySelectorAll("input,select,textarea")[0]||$,G=P4(j),Le=b._f.refs||[];if(G?Le.find(Ue=>Ue===j):j===b._f.ref)return;Be(i,T,{_f:{...b._f,...G?{refs:[...Le.filter(Lp),j,...Array.isArray(K(s,T))?[{}]:[]],ref:{type:j.type,name:T}}:{ref:j}}}),C(T,!1,void 0,j)}else b=K(i,T,{}),b._f&&(b._f.mount=!1),(n.shouldUnregister||k.shouldUnregister)&&!(w4(l.array,T)&&a.action)&&l.unMount.add(T)}}},pa=()=>n.shouldFocusError&&yg(i,T=>T&&K(r.errors,T),l.mount),$u=(T,k)=>async b=>{b&&(b.preventDefault&&b.preventDefault(),b.persist&&b.persist());let q=Ir(o);if(h.state.next({isSubmitting:!0}),n.resolver){const{errors:$,values:j}=await O();r.errors=$,q=j}else await le(i);Ct(r.errors,"root"),In(r.errors)?(h.state.next({errors:{}}),await T(q,b)):(k&&await k({...r.errors},b),pa(),setTimeout(pa)),h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:In(r.errors),submitCount:r.submitCount+1,errors:r.errors})},_r=(T,k={})=>{K(i,T)&&(ht(k.defaultValue)?F(T,K(s,T)):(F(T,k.defaultValue),Be(s,T,k.defaultValue)),k.keepTouched||Ct(r.touchedFields,T),k.keepDirty||(Ct(r.dirtyFields,T),r.isDirty=k.defaultValue?Z(T,K(s,T)):Z()),k.keepError||(Ct(r.errors,T),d.isValid&&p()),h.state.next({...r}))},Uu=(T,k={})=>{const b=T?Ir(T):s,q=Ir(b),$=T&&!In(T)?q:s;if(k.keepDefaultValues||(s=b),!k.keepValues){if(k.keepDirtyValues||f)for(const j of l.mount)K(r.dirtyFields,j)?Be($,j,K(o,j)):F(j,K($,j));else{if(cv&&ht(T))for(const j of l.mount){const G=K(i,j);if(G&&G._f){const Le=Array.isArray(G._f.refs)?G._f.refs[0]:G._f.ref;if(Eh(Le)){const Ue=Le.closest("form");if(Ue){Ue.reset();break}}}}i={}}o=t.shouldUnregister?k.keepDefaultValues?Ir(s):{}:Ir($),h.array.next({values:{...$}}),h.values.next({values:{...$}})}l={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},!a.mount&&e(),a.mount=!d.isValid||!!k.keepIsValid,a.watch=!!t.shouldUnregister,h.state.next({submitCount:k.keepSubmitCount?r.submitCount:0,isDirty:k.keepDirty?r.isDirty:!!(k.keepDefaultValues&&!is(T,s)),isSubmitted:k.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:k.keepDirtyValues?r.dirtyFields:k.keepDefaultValues&&T?Mp(s,T):{},touchedFields:k.keepTouched?r.touchedFields:{},errors:k.keepErrors?r.errors:{},isSubmitSuccessful:k.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1})},Bu=(T,k)=>Uu(pi(T)?T(o):T,k);return{control:{register:vr,unregister:cn,getFieldState:Ie,handleSubmit:$u,setError:Tn,_executeSchema:O,_getWatch:_e,_getDirty:Z,_updateValid:p,_removeUnmounted:Q,_updateFieldArray:y,_updateDisabledField:Ne,_getFieldArray:he,_reset:Uu,_resetDefaultValues:()=>pi(n.defaultValues)&&n.defaultValues().then(T=>{Bu(T,n.resetOptions),h.state.next({isLoading:!1})}),_updateFormState:T=>{r={...r,...T}},_subjects:h,_proxyFormState:d,get _fields(){return i},get _formValues(){return o},get _state(){return a},set _state(T){a=T},get _defaultValues(){return s},get _names(){return l},set _names(T){l=T},get _formState(){return r},set _formState(T){r=T},get _options(){return n},set _options(T){n={...n,...T}}},trigger:ee,register:vr,handleSubmit:$u,watch:Hi,setValue:F,getValues:Ee,reset:Bu,resetField:_r,clearErrors:Xn,unregister:cn,setError:Tn,setFocus:(T,k={})=>{const b=K(i,T),q=b&&b._f;if(q){const $=q.refs?q.refs[0]:q.ref;$.focus&&($.focus(),k.shouldSelect&&$.select())}},getFieldState:Ie}}function mu(t={}){const e=xr.useRef(),n=xr.useRef(),[r,i]=xr.useState({isDirty:!1,isValidating:!1,isLoading:pi(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},errors:{},defaultValues:pi(t.defaultValues)?void 0:t.defaultValues});e.current||(e.current={...M4(t,()=>i(o=>({...o}))),formState:r});const s=e.current.control;return s._options=t,I4({subject:s._subjects.state,next:o=>{S4(o,s._proxyFormState,s._updateFormState,!0)&&i({...s._formState})}}),xr.useEffect(()=>{t.values&&!is(t.values,n.current)?(s._reset(t.values,s._options.resetOptions),n.current=t.values):s._resetDefaultValues()},[t.values,s]),xr.useEffect(()=>{s._state.mount||(s._updateValid(),s._state.mount=!0),s._state.watch&&(s._state.watch=!1,s._subjects.state.next({...s._formState})),s._removeUnmounted()}),e.current.formState=T4(r,s),e.current}var NI={exports:{}},V4="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",j4=V4,F4=j4;function DI(){}function OI(){}OI.resetWarningCache=DI;var $4=function(){function t(r,i,s,o,a,l){if(l!==F4){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:OI,resetWarningCache:DI};return n.PropTypes=n,n};NI.exports=$4();var U4=NI.exports;const Je=GE(U4),Rn=({children:t})=>m.jsxs("p",{className:"text-xs lg:text-sm text-error justify-end mt-3 flex items-center gap-2",children:[t,m.jsxs("svg",{fill:"#ff6b6b",width:"20px",height:"20px",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",children:[m.jsx("g",{id:"SVGRepo_bgCarrier",strokeWidth:"0"}),m.jsx("g",{id:"SVGRepo_tracerCarrier",strokeLinecap:"round",strokeLinejoin:"round"}),m.jsx("g",{id:"SVGRepo_iconCarrier",children:m.jsx("path",{d:"M520.741 163.801a10.234 10.234 0 00-3.406-3.406c-4.827-2.946-11.129-1.421-14.075 3.406L80.258 856.874a10.236 10.236 0 00-1.499 5.335c0 5.655 4.585 10.24 10.24 10.24h846.004c1.882 0 3.728-.519 5.335-1.499 4.827-2.946 6.352-9.248 3.406-14.075L520.742 163.802zm43.703-26.674L987.446 830.2c17.678 28.964 8.528 66.774-20.436 84.452a61.445 61.445 0 01-32.008 8.996H88.998c-33.932 0-61.44-27.508-61.44-61.44a61.445 61.445 0 018.996-32.008l423.002-693.073c17.678-28.964 55.488-38.113 84.452-20.436a61.438 61.438 0 0120.436 20.436zM512 778.24c22.622 0 40.96-18.338 40.96-40.96s-18.338-40.96-40.96-40.96-40.96 18.338-40.96 40.96 18.338 40.96 40.96 40.96zm0-440.32c-22.622 0-40.96 18.338-40.96 40.96v225.28c0 22.622 18.338 40.96 40.96 40.96s40.96-18.338 40.96-40.96V378.88c0-22.622-18.338-40.96-40.96-40.96z"})})]})]});Rn.propTypes={children:Je.any};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LI=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},B4=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},MI={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,u=l?t[i+2]:0,c=s>>2,d=(s&3)<<4|a>>4;let h=(a&15)<<2|u>>6,f=u&63;l||(f=64,o||(h=64)),r.push(n[c],n[d],n[h],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(LI(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):B4(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||u==null||d==null)throw new z4;const h=s<<2|a>>4;if(r.push(h),u!==64){const f=a<<4&240|u>>2;if(r.push(f),d!==64){const g=u<<6&192|d;r.push(g)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class z4 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const W4=function(t){const e=LI(t);return MI.encodeByteArray(e,!0)},kh=function(t){return W4(t).replace(/\./g,"")},VI=function(t){try{return MI.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q4(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H4=()=>q4().__FIREBASE_DEFAULTS__,G4=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},K4=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&VI(t[1]);return e&&JSON.parse(e)},Bd=()=>{try{return H4()||G4()||K4()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},jI=t=>{var e,n;return(n=(e=Bd())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},FI=t=>{const e=jI(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},$I=()=>{var t;return(t=Bd())===null||t===void 0?void 0:t.config},UI=t=>{var e;return(e=Bd())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q4{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BI(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[kh(JSON.stringify(n)),kh(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function X4(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(qt())}function Y4(){var t;const e=(t=Bd())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function J4(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Z4(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function eN(){const t=qt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function tN(){try{return typeof indexedDB=="object"}catch{return!1}}function nN(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rN="FirebaseError";class yr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=rN,Object.setPrototypeOf(this,yr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,gu.prototype.create)}}class gu{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?iN(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new yr(i,a,r)}}function iN(t,e){return t.replace(sN,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const sN=/\{\$([^}]+)}/g;function oN(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ch(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(z1(s)&&z1(o)){if(!Ch(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function z1(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yu(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Fa(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function $a(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function aN(t,e){const n=new lN(t,e);return n.subscribe.bind(n)}class lN{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");uN(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=jp),i.error===void 0&&(i.error=jp),i.complete===void 0&&(i.complete=jp);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function uN(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function jp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lt(t){return t&&t._delegate?t._delegate:t}class Ni{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cN=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Q4;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(dN(e))try{this.getOrInitializeService({instanceIdentifier:Yi})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Yi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Yi){return this.instances.has(e)}getOptions(e=Yi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:hN(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Yi){return this.component?this.component.multipleInstances?e:Yi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function hN(t){return t===Yi?void 0:t}function dN(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fN{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new cN(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ge;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ge||(ge={}));const pN={debug:ge.DEBUG,verbose:ge.VERBOSE,info:ge.INFO,warn:ge.WARN,error:ge.ERROR,silent:ge.SILENT},mN=ge.INFO,gN={[ge.DEBUG]:"log",[ge.VERBOSE]:"log",[ge.INFO]:"info",[ge.WARN]:"warn",[ge.ERROR]:"error"},yN=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=gN[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class pv{constructor(e){this.name=e,this._logLevel=mN,this._logHandler=yN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ge))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?pN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ge.DEBUG,...e),this._logHandler(this,ge.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ge.VERBOSE,...e),this._logHandler(this,ge.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ge.INFO,...e),this._logHandler(this,ge.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ge.WARN,...e),this._logHandler(this,ge.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ge.ERROR,...e),this._logHandler(this,ge.ERROR,...e)}}const vN=(t,e)=>e.some(n=>t instanceof n);let W1,q1;function _N(){return W1||(W1=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function wN(){return q1||(q1=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const zI=new WeakMap,vg=new WeakMap,WI=new WeakMap,Fp=new WeakMap,mv=new WeakMap;function EN(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(ki(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&zI.set(n,t)}).catch(()=>{}),mv.set(e,t),e}function TN(t){if(vg.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});vg.set(t,e)}let _g={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return vg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||WI.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ki(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function SN(t){_g=t(_g)}function IN(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call($p(this),e,...n);return WI.set(r,e.sort?e.sort():[e]),ki(r)}:wN().includes(t)?function(...e){return t.apply($p(this),e),ki(zI.get(this))}:function(...e){return ki(t.apply($p(this),e))}}function kN(t){return typeof t=="function"?IN(t):(t instanceof IDBTransaction&&TN(t),vN(t,_N())?new Proxy(t,_g):t)}function ki(t){if(t instanceof IDBRequest)return EN(t);if(Fp.has(t))return Fp.get(t);const e=kN(t);return e!==t&&(Fp.set(t,e),mv.set(e,t)),e}const $p=t=>mv.get(t);function CN(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=ki(o);return r&&o.addEventListener("upgradeneeded",l=>{r(ki(o.result),l.oldVersion,l.newVersion,ki(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const RN=["get","getKey","getAll","getAllKeys","count"],xN=["put","add","delete","clear"],Up=new Map;function H1(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Up.get(e))return Up.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=xN.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||RN.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&l.done]))[0]};return Up.set(e,s),s}SN(t=>({...t,get:(e,n,r)=>H1(e,n)||t.get(e,n,r),has:(e,n)=>!!H1(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(PN(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function PN(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const wg="@firebase/app",G1="0.9.22";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ws=new pv("@firebase/app"),bN="@firebase/app-compat",NN="@firebase/analytics-compat",DN="@firebase/analytics",ON="@firebase/app-check-compat",LN="@firebase/app-check",MN="@firebase/auth",VN="@firebase/auth-compat",jN="@firebase/database",FN="@firebase/database-compat",$N="@firebase/functions",UN="@firebase/functions-compat",BN="@firebase/installations",zN="@firebase/installations-compat",WN="@firebase/messaging",qN="@firebase/messaging-compat",HN="@firebase/performance",GN="@firebase/performance-compat",KN="@firebase/remote-config",QN="@firebase/remote-config-compat",XN="@firebase/storage",YN="@firebase/storage-compat",JN="@firebase/firestore",ZN="@firebase/firestore-compat",eD="firebase",tD="10.5.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eg="[DEFAULT]",nD={[wg]:"fire-core",[bN]:"fire-core-compat",[DN]:"fire-analytics",[NN]:"fire-analytics-compat",[LN]:"fire-app-check",[ON]:"fire-app-check-compat",[MN]:"fire-auth",[VN]:"fire-auth-compat",[jN]:"fire-rtdb",[FN]:"fire-rtdb-compat",[$N]:"fire-fn",[UN]:"fire-fn-compat",[BN]:"fire-iid",[zN]:"fire-iid-compat",[WN]:"fire-fcm",[qN]:"fire-fcm-compat",[HN]:"fire-perf",[GN]:"fire-perf-compat",[KN]:"fire-rc",[QN]:"fire-rc-compat",[XN]:"fire-gcs",[YN]:"fire-gcs-compat",[JN]:"fire-fst",[ZN]:"fire-fst-compat","fire-js":"fire-js",[eD]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rh=new Map,Tg=new Map;function rD(t,e){try{t.container.addComponent(e)}catch(n){ws.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Es(t){const e=t.name;if(Tg.has(e))return ws.debug(`There were multiple attempts to register component ${e}.`),!1;Tg.set(e,t);for(const n of Rh.values())rD(n,t);return!0}function zd(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iD={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Ci=new gu("app","Firebase",iD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sD{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ni("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ci.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Os=tD;function qI(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Eg,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Ci.create("bad-app-name",{appName:String(i)});if(n||(n=$I()),!n)throw Ci.create("no-options");const s=Rh.get(i);if(s){if(Ch(n,s.options)&&Ch(r,s.config))return s;throw Ci.create("duplicate-app",{appName:i})}const o=new fN(i);for(const l of Tg.values())o.addComponent(l);const a=new sD(n,r,o);return Rh.set(i,a),a}function gv(t=Eg){const e=Rh.get(t);if(!e&&t===Eg&&$I())return qI();if(!e)throw Ci.create("no-app",{appName:t});return e}function lr(t,e,n){var r;let i=(r=nD[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ws.warn(a.join(" "));return}Es(new Ni(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oD="firebase-heartbeat-database",aD=1,Ll="firebase-heartbeat-store";let Bp=null;function HI(){return Bp||(Bp=CN(oD,aD,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Ll)}}}).catch(t=>{throw Ci.create("idb-open",{originalErrorMessage:t.message})})),Bp}async function lD(t){try{return await(await HI()).transaction(Ll).objectStore(Ll).get(GI(t))}catch(e){if(e instanceof yr)ws.warn(e.message);else{const n=Ci.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ws.warn(n.message)}}}async function K1(t,e){try{const r=(await HI()).transaction(Ll,"readwrite");await r.objectStore(Ll).put(e,GI(t)),await r.done}catch(n){if(n instanceof yr)ws.warn(n.message);else{const r=Ci.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ws.warn(r.message)}}}function GI(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uD=1024,cD=30*24*60*60*1e3;class hD{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new fD(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Q1();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(i=>{const s=new Date(i.date).valueOf();return Date.now()-s<=cD}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Q1(),{heartbeatsToSend:n,unsentEntries:r}=dD(this._heartbeatsCache.heartbeats),i=kh(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function Q1(){return new Date().toISOString().substring(0,10)}function dD(t,e=uD){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),X1(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),X1(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class fD{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return tN()?nN().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await lD(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return K1(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return K1(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function X1(t){return kh(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pD(t){Es(new Ni("platform-logger",e=>new AN(e),"PRIVATE")),Es(new Ni("heartbeat",e=>new hD(e),"PRIVATE")),lr(wg,G1,t),lr(wg,G1,"esm2017"),lr("fire-js","")}pD("");var mD=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},U,yv=yv||{},se=mD||self;function Wd(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function vu(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function gD(t){return Object.prototype.hasOwnProperty.call(t,zp)&&t[zp]||(t[zp]=++yD)}var zp="closure_uid_"+(1e9*Math.random()>>>0),yD=0;function vD(t,e,n){return t.call.apply(t.bind,arguments)}function _D(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function Bt(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Bt=vD:Bt=_D,Bt.apply(null,arguments)}function lc(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function It(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function zi(){this.s=this.s,this.o=this.o}var wD=0;zi.prototype.s=!1;zi.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),wD!=0)&&gD(this)};zi.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const KI=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function vv(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function Y1(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(Wd(r)){const i=t.length||0,s=r.length||0;t.length=i+s;for(let o=0;o<s;o++)t[i+o]=r[o]}else t.push(r)}}function zt(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}zt.prototype.h=function(){this.defaultPrevented=!0};var ED=function(){if(!se.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{se.addEventListener("test",()=>{},e),se.removeEventListener("test",()=>{},e)}catch{}return t}();function Ml(t){return/^[\s\xa0]*$/.test(t)}function qd(){var t=se.navigator;return t&&(t=t.userAgent)?t:""}function tr(t){return qd().indexOf(t)!=-1}function _v(t){return _v[" "](t),t}_v[" "]=function(){};function TD(t,e){var n=pO;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var SD=tr("Opera"),Uo=tr("Trident")||tr("MSIE"),QI=tr("Edge"),Sg=QI||Uo,XI=tr("Gecko")&&!(qd().toLowerCase().indexOf("webkit")!=-1&&!tr("Edge"))&&!(tr("Trident")||tr("MSIE"))&&!tr("Edge"),ID=qd().toLowerCase().indexOf("webkit")!=-1&&!tr("Edge");function YI(){var t=se.document;return t?t.documentMode:void 0}var Ig;e:{var Wp="",qp=function(){var t=qd();if(XI)return/rv:([^\);]+)(\)|;)/.exec(t);if(QI)return/Edge\/([\d\.]+)/.exec(t);if(Uo)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(ID)return/WebKit\/(\S+)/.exec(t);if(SD)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(qp&&(Wp=qp?qp[1]:""),Uo){var Hp=YI();if(Hp!=null&&Hp>parseFloat(Wp)){Ig=String(Hp);break e}}Ig=Wp}var kg;if(se.document&&Uo){var J1=YI();kg=J1||parseInt(Ig,10)||void 0}else kg=void 0;var kD=kg;function Vl(t,e){if(zt.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(XI){e:{try{_v(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:CD[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Vl.$.h.call(this)}}It(Vl,zt);var CD={2:"touch",3:"pen",4:"mouse"};Vl.prototype.h=function(){Vl.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var _u="closure_listenable_"+(1e6*Math.random()|0),RD=0;function xD(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++RD,this.fa=this.ia=!1}function Hd(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function wv(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function AD(t,e){for(const n in t)e.call(void 0,t[n],n,t)}function JI(t){const e={};for(const n in t)e[n]=t[n];return e}const Z1="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ZI(t,e){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(let s=0;s<Z1.length;s++)n=Z1[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Gd(t){this.src=t,this.g={},this.h=0}Gd.prototype.add=function(t,e,n,r,i){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var o=Rg(t,e,r,i);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new xD(e,this.src,s,!!r,i),e.ia=n,t.push(e)),e};function Cg(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=KI(r,e),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(Hd(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function Rg(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==r)return i}return-1}var Ev="closure_lm_"+(1e6*Math.random()|0),Gp={};function ek(t,e,n,r,i){if(r&&r.once)return nk(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)ek(t,e[s],n,r,i);return null}return n=Iv(n),t&&t[_u]?t.O(e,n,vu(r)?!!r.capture:!!r,i):tk(t,e,n,!1,r,i)}function tk(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=vu(i)?!!i.capture:!!i,a=Sv(t);if(a||(t[Ev]=a=new Gd(t)),n=a.add(e,n,r,o,s),n.proxy)return n;if(r=PD(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)ED||(i=o),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(ik(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function PD(){function t(n){return e.call(t.src,t.listener,n)}const e=bD;return t}function nk(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)nk(t,e[s],n,r,i);return null}return n=Iv(n),t&&t[_u]?t.P(e,n,vu(r)?!!r.capture:!!r,i):tk(t,e,n,!0,r,i)}function rk(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)rk(t,e[s],n,r,i);else r=vu(r)?!!r.capture:!!r,n=Iv(n),t&&t[_u]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=Rg(s,n,r,i),-1<n&&(Hd(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.g[e],t.h--)))):t&&(t=Sv(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Rg(e,n,r,i)),(n=-1<t?e[t]:null)&&Tv(n))}function Tv(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[_u])Cg(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(ik(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Sv(e))?(Cg(n,t),n.h==0&&(n.src=null,e[Ev]=null)):Hd(t)}}}function ik(t){return t in Gp?Gp[t]:Gp[t]="on"+t}function bD(t,e){if(t.fa)t=!0;else{e=new Vl(e,this);var n=t.listener,r=t.la||t.src;t.ia&&Tv(t),t=n.call(r,e)}return t}function Sv(t){return t=t[Ev],t instanceof Gd?t:null}var Kp="__closure_events_fn_"+(1e9*Math.random()>>>0);function Iv(t){return typeof t=="function"?t:(t[Kp]||(t[Kp]=function(e){return t.handleEvent(e)}),t[Kp])}function Tt(){zi.call(this),this.i=new Gd(this),this.S=this,this.J=null}It(Tt,zi);Tt.prototype[_u]=!0;Tt.prototype.removeEventListener=function(t,e,n,r){rk(this,t,e,n,r)};function Nt(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new zt(e,t);else if(e instanceof zt)e.target=e.target||t;else{var i=e;e=new zt(r,t),ZI(e,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=uc(o,r,!0,e)&&i}if(o=e.g=t,i=uc(o,r,!0,e)&&i,i=uc(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)o=e.g=n[s],i=uc(o,r,!1,e)&&i}Tt.prototype.N=function(){if(Tt.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Hd(n[r]);delete t.g[e],t.h--}}this.J=null};Tt.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};Tt.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function uc(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&Cg(t.i,o),i=a.call(l,r)!==!1&&i}}return i&&!r.defaultPrevented}var kv=se.JSON.stringify;class ND{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function DD(){var t=Cv;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class OD{constructor(){this.h=this.g=null}add(e,n){const r=sk.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var sk=new ND(()=>new LD,t=>t.reset());class LD{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function MD(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function VD(t){se.setTimeout(()=>{throw t},0)}let jl,Fl=!1,Cv=new OD,ok=()=>{const t=se.Promise.resolve(void 0);jl=()=>{t.then(jD)}};var jD=()=>{for(var t;t=DD();){try{t.h.call(t.g)}catch(n){VD(n)}var e=sk;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Fl=!1};function Kd(t,e){Tt.call(this),this.h=t||1,this.g=e||se,this.j=Bt(this.qb,this),this.l=Date.now()}It(Kd,Tt);U=Kd.prototype;U.ga=!1;U.T=null;U.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Nt(this,"tick"),this.ga&&(Rv(this),this.start()))}};U.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function Rv(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}U.N=function(){Kd.$.N.call(this),Rv(this),delete this.g};function xv(t,e,n){if(typeof t=="function")n&&(t=Bt(t,n));else if(t&&typeof t.handleEvent=="function")t=Bt(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:se.setTimeout(t,e||0)}function ak(t){t.g=xv(()=>{t.g=null,t.i&&(t.i=!1,ak(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class FD extends zi{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:ak(this)}N(){super.N(),this.g&&(se.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function $l(t){zi.call(this),this.h=t,this.g={}}It($l,zi);var ew=[];function lk(t,e,n,r){Array.isArray(n)||(n&&(ew[0]=n.toString()),n=ew);for(var i=0;i<n.length;i++){var s=ek(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function uk(t){wv(t.g,function(e,n){this.g.hasOwnProperty(n)&&Tv(e)},t),t.g={}}$l.prototype.N=function(){$l.$.N.call(this),uk(this)};$l.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Qd(){this.g=!0}Qd.prototype.Ea=function(){this.g=!1};function $D(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var u=a[l].split("=");if(1<u.length){var c=u[0];u=u[1];var d=c.split("_");o=2<=d.length&&d[1]=="type"?o+(c+"="+u+"&"):o+(c+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+o})}function UD(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+s+" "+o})}function go(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+zD(t,n)+(r?" "+r:"")})}function BD(t,e){t.info(function(){return"TIMEOUT: "+e})}Qd.prototype.info=function(){};function zD(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<i.length;o++)i[o]=""}}}}return kv(n)}catch{return e}}var Ls={},tw=null;function Xd(){return tw=tw||new Tt}Ls.Ta="serverreachability";function ck(t){zt.call(this,Ls.Ta,t)}It(ck,zt);function Ul(t){const e=Xd();Nt(e,new ck(e))}Ls.STAT_EVENT="statevent";function hk(t,e){zt.call(this,Ls.STAT_EVENT,t),this.stat=e}It(hk,zt);function Jt(t){const e=Xd();Nt(e,new hk(e,t))}Ls.Ua="timingevent";function dk(t,e){zt.call(this,Ls.Ua,t),this.size=e}It(dk,zt);function wu(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return se.setTimeout(function(){t()},e)}var Yd={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},fk={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Av(){}Av.prototype.h=null;function nw(t){return t.h||(t.h=t.i())}function pk(){}var Eu={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Pv(){zt.call(this,"d")}It(Pv,zt);function bv(){zt.call(this,"c")}It(bv,zt);var xg;function Jd(){}It(Jd,Av);Jd.prototype.g=function(){return new XMLHttpRequest};Jd.prototype.i=function(){return{}};xg=new Jd;function Tu(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new $l(this),this.P=WD,t=Sg?125:void 0,this.V=new Kd(t),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new mk}function mk(){this.i=null,this.g="",this.h=!1}var WD=45e3,Ag={},xh={};U=Tu.prototype;U.setTimeout=function(t){this.P=t};function Pg(t,e,n){t.L=1,t.v=ef(Ur(e)),t.s=n,t.S=!0,gk(t,null)}function gk(t,e){t.G=Date.now(),Su(t),t.A=Ur(t.v);var n=t.A,r=t.W;Array.isArray(r)||(r=[String(r)]),Ik(n.i,"t",r),t.C=0,n=t.l.J,t.h=new mk,t.g=qk(t.l,n?e:null,!t.s),0<t.O&&(t.M=new FD(Bt(t.Pa,t,t.g),t.O)),lk(t.U,t.g,"readystatechange",t.nb),e=t.I?JI(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),Ul(),$D(t.j,t.u,t.A,t.m,t.W,t.s)}U.nb=function(t){t=t.target;const e=this.M;e&&rr(t)==3?e.l():this.Pa(t)};U.Pa=function(t){try{if(t==this.g)e:{const c=rr(this.g);var e=this.g.Ia();const d=this.g.da();if(!(3>c)&&(c!=3||Sg||this.g&&(this.h.h||this.g.ja()||ow(this.g)))){this.J||c!=4||e==7||(e==8||0>=d?Ul(3):Ul(2)),Zd(this);var n=this.g.da();this.ca=n;t:if(yk(this)){var r=ow(this.g);t="";var i=r.length,s=rr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ss(this),al(this);var o="";break t}this.h.i=new se.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,UD(this.j,this.u,this.A,this.m,this.W,c,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ml(a)){var u=a;break t}}u=null}if(n=u)go(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,bg(this,n);else{this.i=!1,this.o=3,Jt(12),ss(this),al(this);break e}}this.S?(vk(this,c,o),Sg&&this.i&&c==3&&(lk(this.U,this.V,"tick",this.mb),this.V.start())):(go(this.j,this.m,o,null),bg(this,o)),c==4&&ss(this),this.i&&!this.J&&(c==4?Uk(this.l,this):(this.i=!1,Su(this)))}else hO(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.o=3,Jt(12)):(this.o=0,Jt(13)),ss(this),al(this)}}}catch{}finally{}};function yk(t){return t.g?t.u=="GET"&&t.L!=2&&t.l.Ha:!1}function vk(t,e,n){let r=!0,i;for(;!t.J&&t.C<n.length;)if(i=qD(t,n),i==xh){e==4&&(t.o=4,Jt(14),r=!1),go(t.j,t.m,null,"[Incomplete Response]");break}else if(i==Ag){t.o=4,Jt(15),go(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else go(t.j,t.m,i,null),bg(t,i);yk(t)&&i!=xh&&i!=Ag&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,Jt(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Vv(e),e.M=!0,Jt(11))):(go(t.j,t.m,n,"[Invalid Chunked Response]"),ss(t),al(t))}U.mb=function(){if(this.g){var t=rr(this.g),e=this.g.ja();this.C<e.length&&(Zd(this),vk(this,t,e),this.i&&t!=4&&Su(this))}};function qD(t,e){var n=t.C,r=e.indexOf(`
`,n);return r==-1?xh:(n=Number(e.substring(n,r)),isNaN(n)?Ag:(r+=1,r+n>e.length?xh:(e=e.slice(r,r+n),t.C=r+n,e)))}U.cancel=function(){this.J=!0,ss(this)};function Su(t){t.Y=Date.now()+t.P,_k(t,t.P)}function _k(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=wu(Bt(t.lb,t),e)}function Zd(t){t.B&&(se.clearTimeout(t.B),t.B=null)}U.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(BD(this.j,this.A),this.L!=2&&(Ul(),Jt(17)),ss(this),this.o=2,al(this)):_k(this,this.Y-t)};function al(t){t.l.H==0||t.J||Uk(t.l,t)}function ss(t){Zd(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,Rv(t.V),uk(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function bg(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||Ng(n.i,t))){if(!t.K&&Ng(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)bh(n),rf(n);else break e;Mv(n),Jt(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=wu(Bt(n.ib,n),6e3));if(1>=Rk(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else os(n,11)}else if((t.K||n.g==t)&&bh(n),!Ml(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let u=i[e];if(n.V=u[0],u=u[1],n.H==2)if(u[0]=="c"){n.K=u[1],n.pa=u[2];const c=u[3];c!=null&&(n.ra=c,n.l.info("VER="+n.ra));const d=u[4];d!=null&&(n.Ga=d,n.l.info("SVER="+n.Ga));const h=u[5];h!=null&&typeof h=="number"&&0<h&&(r=1.5*h,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const f=t.g;if(f){const g=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(g){var s=r.i;s.g||g.indexOf("spdy")==-1&&g.indexOf("quic")==-1&&g.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(Nv(s,s.h),s.h=null))}if(r.F){const w=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;w&&(r.Da=w,Ve(r.I,r.F,w))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=t;if(r.wa=Wk(r,r.J?r.pa:null,r.Y),o.K){xk(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.B&&(Zd(a),Su(a)),r.g=o}else Fk(r);0<n.j.length&&sf(n)}else u[0]!="stop"&&u[0]!="close"||os(n,7);else n.H==3&&(u[0]=="stop"||u[0]=="close"?u[0]=="stop"?os(n,7):Lv(n):u[0]!="noop"&&n.h&&n.h.Aa(u),n.A=0)}}Ul(4)}catch{}}function HD(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(Wd(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function GD(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(Wd(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}function wk(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Wd(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=GD(t),r=HD(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}var Ek=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function KD(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function cs(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof cs){this.h=t.h,Ah(this,t.j),this.s=t.s,this.g=t.g,Ph(this,t.m),this.l=t.l;var e=t.i,n=new Bl;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),rw(this,n),this.o=t.o}else t&&(e=String(t).match(Ek))?(this.h=!1,Ah(this,e[1]||"",!0),this.s=Ua(e[2]||""),this.g=Ua(e[3]||"",!0),Ph(this,e[4]),this.l=Ua(e[5]||"",!0),rw(this,e[6]||"",!0),this.o=Ua(e[7]||"")):(this.h=!1,this.i=new Bl(null,this.h))}cs.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Ba(e,iw,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(Ba(e,iw,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(Ba(n,n.charAt(0)=="/"?YD:XD,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Ba(n,ZD)),t.join("")};function Ur(t){return new cs(t)}function Ah(t,e,n){t.j=n?Ua(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Ph(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function rw(t,e,n){e instanceof Bl?(t.i=e,eO(t.i,t.h)):(n||(e=Ba(e,JD)),t.i=new Bl(e,t.h))}function Ve(t,e,n){t.i.set(e,n)}function ef(t){return Ve(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Ua(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Ba(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,QD),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function QD(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var iw=/[#\/\?@]/g,XD=/[#\?:]/g,YD=/[#\?]/g,JD=/[#\?@]/g,ZD=/#/g;function Bl(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Wi(t){t.g||(t.g=new Map,t.h=0,t.i&&KD(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}U=Bl.prototype;U.add=function(t,e){Wi(this),this.i=null,t=oa(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function Tk(t,e){Wi(t),e=oa(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function Sk(t,e){return Wi(t),e=oa(t,e),t.g.has(e)}U.forEach=function(t,e){Wi(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)};U.ta=function(){Wi(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const i=t[r];for(let s=0;s<i.length;s++)n.push(e[r])}return n};U.Z=function(t){Wi(this);let e=[];if(typeof t=="string")Sk(this,t)&&(e=e.concat(this.g.get(oa(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};U.set=function(t,e){return Wi(this),this.i=null,t=oa(this,t),Sk(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};U.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function Ik(t,e,n){Tk(t,e),0<n.length&&(t.i=null,t.g.set(oa(t,e),vv(n)),t.h+=n.length)}U.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;o[r]!==""&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};function oa(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function eO(t,e){e&&!t.j&&(Wi(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(Tk(this,r),Ik(this,i,n))},t)),t.j=e}var tO=class{constructor(t,e){this.g=t,this.map=e}};function kk(t){this.l=t||nO,se.PerformanceNavigationTiming?(t=se.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(se.g&&se.g.Ka&&se.g.Ka()&&se.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var nO=10;function Ck(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function Rk(t){return t.h?1:t.g?t.g.size:0}function Ng(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function Nv(t,e){t.g?t.g.add(e):t.h=e}function xk(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}kk.prototype.cancel=function(){if(this.i=Ak(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function Ak(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return vv(t.i)}var rO=class{stringify(t){return se.JSON.stringify(t,void 0)}parse(t){return se.JSON.parse(t,void 0)}};function iO(){this.g=new rO}function sO(t,e,n){const r=n||"";try{wk(t,function(i,s){let o=i;vu(i)&&(o=kv(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function oO(t,e){const n=new Qd;if(se.Image){const r=new Image;r.onload=lc(cc,n,r,"TestLoadImage: loaded",!0,e),r.onerror=lc(cc,n,r,"TestLoadImage: error",!1,e),r.onabort=lc(cc,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=lc(cc,n,r,"TestLoadImage: timeout",!1,e),se.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function cc(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Iu(t){this.l=t.ec||null,this.j=t.ob||!1}It(Iu,Av);Iu.prototype.g=function(){return new tf(this.l,this.j)};Iu.prototype.i=function(t){return function(){return t}}({});function tf(t,e){Tt.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=Dv,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}It(tf,Tt);var Dv=0;U=tf.prototype;U.open=function(t,e){if(this.readyState!=Dv)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,zl(this)};U.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||se).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};U.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ku(this)),this.readyState=Dv};U.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,zl(this)),this.g&&(this.readyState=3,zl(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof se.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Pk(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function Pk(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}U.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?ku(this):zl(this),this.readyState==3&&Pk(this)}};U.Za=function(t){this.g&&(this.response=this.responseText=t,ku(this))};U.Ya=function(t){this.g&&(this.response=t,ku(this))};U.ka=function(){this.g&&ku(this)};function ku(t){t.readyState=4,t.l=null,t.j=null,t.A=null,zl(t)}U.setRequestHeader=function(t,e){this.v.append(t,e)};U.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};U.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function zl(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(tf.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var aO=se.JSON.parse;function Ze(t){Tt.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=bk,this.L=this.M=!1}It(Ze,Tt);var bk="",lO=/^https?$/i,uO=["POST","PUT"];U=Ze.prototype;U.Oa=function(t){this.M=t};U.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():xg.g(),this.C=this.u?nw(this.u):nw(xg),this.g.onreadystatechange=Bt(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){sw(this,s);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const s of r.keys())n.set(s,r.get(s));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(s=>s.toLowerCase()=="content-type"),i=se.FormData&&t instanceof se.FormData,!(0<=KI(uO,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Ok(this),0<this.B&&((this.L=cO(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Bt(this.ua,this)):this.A=xv(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){sw(this,s)}};function cO(t){return Uo&&typeof t.timeout=="number"&&t.ontimeout!==void 0}U.ua=function(){typeof yv<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Nt(this,"timeout"),this.abort(8))};function sw(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,Nk(t),nf(t)}function Nk(t){t.F||(t.F=!0,Nt(t,"complete"),Nt(t,"error"))}U.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Nt(this,"complete"),Nt(this,"abort"),nf(this))};U.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),nf(this,!0)),Ze.$.N.call(this)};U.La=function(){this.s||(this.G||this.v||this.l?Dk(this):this.kb())};U.kb=function(){Dk(this)};function Dk(t){if(t.h&&typeof yv<"u"&&(!t.C[1]||rr(t)!=4||t.da()!=2)){if(t.v&&rr(t)==4)xv(t.La,0,t);else if(Nt(t,"readystatechange"),rr(t)==4){t.h=!1;try{const o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=o===0){var i=String(t.I).match(Ek)[1]||null;!i&&se.self&&se.self.location&&(i=se.self.location.protocol.slice(0,-1)),r=!lO.test(i?i.toLowerCase():"")}n=r}if(n)Nt(t,"complete"),Nt(t,"success");else{t.m=6;try{var s=2<rr(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",Nk(t)}}finally{nf(t)}}}}function nf(t,e){if(t.g){Ok(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||Nt(t,"ready");try{n.onreadystatechange=r}catch{}}}function Ok(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(se.clearTimeout(t.A),t.A=null)}U.isActive=function(){return!!this.g};function rr(t){return t.g?t.g.readyState:0}U.da=function(){try{return 2<rr(this)?this.g.status:-1}catch{return-1}};U.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};U.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),aO(e)}};function ow(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case bk:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function hO(t){const e={};t=(t.g&&2<=rr(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(Ml(t[r]))continue;var n=MD(t[r]);const i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const s=e[i]||[];e[i]=s,s.push(n)}AD(e,function(r){return r.join(", ")})}U.Ia=function(){return this.m};U.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function Lk(t){let e="";return wv(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function Ov(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Lk(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):Ve(t,e,n))}function ba(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Mk(t){this.Ga=0,this.j=[],this.l=new Qd,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=ba("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=ba("baseRetryDelayMs",5e3,t),this.hb=ba("retryDelaySeedMs",1e4,t),this.eb=ba("forwardChannelMaxRetries",2,t),this.xa=ba("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new kk(t&&t.concurrentRequestLimit),this.Ja=new iO,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}U=Mk.prototype;U.ra=8;U.H=1;function Lv(t){if(Vk(t),t.H==3){var e=t.W++,n=Ur(t.I);if(Ve(n,"SID",t.K),Ve(n,"RID",e),Ve(n,"TYPE","terminate"),Cu(t,n),e=new Tu(t,t.l,e),e.L=2,e.v=ef(Ur(n)),n=!1,se.navigator&&se.navigator.sendBeacon)try{n=se.navigator.sendBeacon(e.v.toString(),"")}catch{}!n&&se.Image&&(new Image().src=e.v,n=!0),n||(e.g=qk(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Su(e)}zk(t)}function rf(t){t.g&&(Vv(t),t.g.cancel(),t.g=null)}function Vk(t){rf(t),t.u&&(se.clearTimeout(t.u),t.u=null),bh(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&se.clearTimeout(t.m),t.m=null)}function sf(t){if(!Ck(t.i)&&!t.m){t.m=!0;var e=t.Na;jl||ok(),Fl||(jl(),Fl=!0),Cv.add(e,t),t.C=0}}function dO(t,e){return Rk(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=wu(Bt(t.Na,t,e),Bk(t,t.C)),t.C++,!0)}U.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const i=new Tu(this,this.l,t);let s=this.s;if(this.U&&(s?(s=JI(s),ZI(s,this.U)):s=this.U),this.o!==null||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=jk(this,i,e),n=Ur(this.I),Ve(n,"RID",t),Ve(n,"CVER",22),this.F&&Ve(n,"X-HTTP-Session-Id",this.F),Cu(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(Lk(s)))+"&"+e:this.o&&Ov(n,this.o,s)),Nv(this.i,i),this.bb&&Ve(n,"TYPE","init"),this.P?(Ve(n,"$req",e),Ve(n,"SID","null"),i.aa=!0,Pg(i,n,null)):Pg(i,n,e),this.H=2}}else this.H==3&&(t?aw(this,t):this.j.length==0||Ck(this.i)||aw(this))};function aw(t,e){var n;e?n=e.m:n=t.W++;const r=Ur(t.I);Ve(r,"SID",t.K),Ve(r,"RID",n),Ve(r,"AID",t.V),Cu(t,r),t.o&&t.s&&Ov(r,t.o,t.s),n=new Tu(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=jk(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),Nv(t.i,n),Pg(n,r,e)}function Cu(t,e){t.na&&wv(t.na,function(n,r){Ve(e,r,n)}),t.h&&wk({},function(n,r){Ve(e,r,n)})}function jk(t,e,n){n=Math.min(t.j.length,n);var r=t.h?Bt(t.h.Va,t.h,t):null;e:{var i=t.j;let s=-1;for(;;){const o=["count="+n];s==-1?0<n?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let l=0;l<n;l++){let u=i[l].g;const c=i[l].map;if(u-=s,0>u)s=Math.max(0,i[l].g-100),a=!1;else try{sO(c,o,"req"+u+"_")}catch{r&&r(c)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function Fk(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;jl||ok(),Fl||(jl(),Fl=!0),Cv.add(e,t),t.A=0}}function Mv(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=wu(Bt(t.Ma,t),Bk(t,t.A)),t.A++,!0)}U.Ma=function(){if(this.u=null,$k(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=wu(Bt(this.jb,this),t)}};U.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Jt(10),rf(this),$k(this))};function Vv(t){t.B!=null&&(se.clearTimeout(t.B),t.B=null)}function $k(t){t.g=new Tu(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=Ur(t.wa);Ve(e,"RID","rpc"),Ve(e,"SID",t.K),Ve(e,"AID",t.V),Ve(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Ve(e,"TO",t.qa),Ve(e,"TYPE","xmlhttp"),Cu(t,e),t.o&&t.s&&Ov(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.v=ef(Ur(e)),n.s=null,n.S=!0,gk(n,t)}U.ib=function(){this.v!=null&&(this.v=null,rf(this),Mv(this),Jt(19))};function bh(t){t.v!=null&&(se.clearTimeout(t.v),t.v=null)}function Uk(t,e){var n=null;if(t.g==e){bh(t),Vv(t),t.g=null;var r=2}else if(Ng(t.i,e))n=e.F,xk(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.s?e.s.length:0,e=Date.now()-e.G;var i=t.C;r=Xd(),Nt(r,new dk(r,n)),sf(t)}else Fk(t);else if(i=e.o,i==3||i==0&&0<e.ca||!(r==1&&dO(t,e)||r==2&&Mv(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:os(t,5);break;case 4:os(t,10);break;case 3:os(t,6);break;default:os(t,2)}}}function Bk(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function os(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=Bt(t.pb,t);n||(n=new cs("//www.google.com/images/cleardot.gif"),se.location&&se.location.protocol=="http"||Ah(n,"https"),ef(n)),oO(n.toString(),r)}else Jt(2);t.H=0,t.h&&t.h.za(e),zk(t),Vk(t)}U.pb=function(t){t?(this.l.info("Successfully pinged google.com"),Jt(2)):(this.l.info("Failed to ping google.com"),Jt(1))};function zk(t){if(t.H=0,t.ma=[],t.h){const e=Ak(t.i);(e.length!=0||t.j.length!=0)&&(Y1(t.ma,e),Y1(t.ma,t.j),t.i.i.length=0,vv(t.j),t.j.length=0),t.h.ya()}}function Wk(t,e,n){var r=n instanceof cs?Ur(n):new cs(n);if(r.g!="")e&&(r.g=e+"."+r.g),Ph(r,r.m);else{var i=se.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new cs(null);r&&Ah(s,r),e&&(s.g=e),i&&Ph(s,i),n&&(s.l=n),r=s}return n=t.F,e=t.Da,n&&e&&Ve(r,n,e),Ve(r,"VER",t.ra),Cu(t,r),r}function qk(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Ha&&!t.va?new Ze(new Iu({ob:!0})):new Ze(t.va),e.Oa(t.J),e}U.isActive=function(){return!!this.h&&this.h.isActive(this)};function Hk(){}U=Hk.prototype;U.Ba=function(){};U.Aa=function(){};U.za=function(){};U.ya=function(){};U.isActive=function(){return!0};U.Va=function(){};function Nh(){if(Uo&&!(10<=Number(kD)))throw Error("Environmental error: no available transport.")}Nh.prototype.g=function(t,e){return new yn(t,e)};function yn(t,e){Tt.call(this),this.g=new Mk(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Ml(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Ml(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new aa(this)}It(yn,Tt);yn.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;Jt(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=Wk(t,null,t.Y),sf(t)};yn.prototype.close=function(){Lv(this.g)};yn.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=kv(t),t=n);e.j.push(new tO(e.fb++,t)),e.H==3&&sf(e)};yn.prototype.N=function(){this.g.h=null,delete this.j,Lv(this.g),delete this.g,yn.$.N.call(this)};function Gk(t){Pv.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}It(Gk,Pv);function Kk(){bv.call(this),this.status=1}It(Kk,bv);function aa(t){this.g=t}It(aa,Hk);aa.prototype.Ba=function(){Nt(this.g,"a")};aa.prototype.Aa=function(t){Nt(this.g,new Gk(t))};aa.prototype.za=function(t){Nt(this.g,new Kk)};aa.prototype.ya=function(){Nt(this.g,"b")};function fO(){this.blockSize=-1}function Gn(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}It(Gn,fO);Gn.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function Qp(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var s=t.g[3],o=e+(s^n&(i^s))+r[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[1]+3905402710&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[2]+606105819&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[3]+3250441966&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[5]+1200080426&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[6]+2821735955&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[7]+4249261313&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[9]+2336552879&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[10]+4294925233&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[11]+2304563134&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[13]+4254626195&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[14]+2792965006&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[15]+1236535329&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(i^s&(n^i))+r[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[6]+3225465664&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[11]+643717713&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[0]+3921069994&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[10]+38016083&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[15]+3634488961&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[4]+3889429448&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[14]+3275163606&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[3]+4107603335&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[8]+1163531501&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[2]+4243563512&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[7]+1735328473&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[12]+2368359562&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(n^i^s)+r[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[8]+2272392833&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[11]+1839030562&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[14]+4259657740&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[4]+1272893353&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[7]+4139469664&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[10]+3200236656&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[0]+3936430074&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[3]+3572445317&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[6]+76029189&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[12]+3873151461&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[15]+530742520&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[2]+3299628645&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(i^(n|~s))+r[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[7]+1126891415&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[14]+2878612391&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[5]+4237533241&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[3]+2399980690&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[10]+4293915773&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[1]+2240044497&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[15]+4264355552&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[6]+2734768916&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[13]+1309151649&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[11]+3174756917&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[2]+718787259&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+s&4294967295}Gn.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(i==0)for(;s<=n;)Qp(this,t,s),s+=this.blockSize;if(typeof t=="string"){for(;s<e;)if(r[i++]=t.charCodeAt(s++),i==this.blockSize){Qp(this,r),i=0;break}}else for(;s<e;)if(r[i++]=t[s++],i==this.blockSize){Qp(this,r),i=0;break}}this.h=i,this.i+=e};Gn.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function Ce(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var s=t[i]|0;r&&s==e||(n[i]=s,r=!1)}this.g=n}var pO={};function jv(t){return-128<=t&&128>t?TD(t,function(e){return new Ce([e|0],0>e?-1:0)}):new Ce([t|0],0>t?-1:0)}function ir(t){if(isNaN(t)||!isFinite(t))return ko;if(0>t)return At(ir(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=Dg;return new Ce(e,0)}function Qk(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return At(Qk(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=ir(Math.pow(e,8)),r=ko,i=0;i<t.length;i+=8){var s=Math.min(8,t.length-i),o=parseInt(t.substring(i,i+s),e);8>s?(s=ir(Math.pow(e,s)),r=r.R(s).add(ir(o))):(r=r.R(n),r=r.add(ir(o)))}return r}var Dg=4294967296,ko=jv(0),Og=jv(1),lw=jv(16777216);U=Ce.prototype;U.ea=function(){if(xn(this))return-At(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:Dg+r)*e,e*=Dg}return t};U.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(br(this))return"0";if(xn(this))return"-"+At(this).toString(t);for(var e=ir(Math.pow(t,6)),n=this,r="";;){var i=Oh(n,e).g;n=Dh(n,i.R(e));var s=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=i,br(n))return s+r;for(;6>s.length;)s="0"+s;r=s+r}};U.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function br(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function xn(t){return t.h==-1}U.X=function(t){return t=Dh(this,t),xn(t)?-1:br(t)?0:1};function At(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new Ce(n,~t.h).add(Og)}U.abs=function(){return xn(this)?At(this):this};U.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var s=r+(this.D(i)&65535)+(t.D(i)&65535),o=(s>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new Ce(n,n[n.length-1]&-2147483648?-1:0)};function Dh(t,e){return t.add(At(e))}U.R=function(t){if(br(this)||br(t))return ko;if(xn(this))return xn(t)?At(this).R(At(t)):At(At(this).R(t));if(xn(t))return At(this.R(At(t)));if(0>this.X(lw)&&0>t.X(lw))return ir(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var s=this.D(r)>>>16,o=this.D(r)&65535,a=t.D(i)>>>16,l=t.D(i)&65535;n[2*r+2*i]+=o*l,hc(n,2*r+2*i),n[2*r+2*i+1]+=s*l,hc(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,hc(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,hc(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new Ce(n,0)};function hc(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Na(t,e){this.g=t,this.h=e}function Oh(t,e){if(br(e))throw Error("division by zero");if(br(t))return new Na(ko,ko);if(xn(t))return e=Oh(At(t),e),new Na(At(e.g),At(e.h));if(xn(e))return e=Oh(t,At(e)),new Na(At(e.g),e.h);if(30<t.g.length){if(xn(t)||xn(e))throw Error("slowDivide_ only works with positive integers.");for(var n=Og,r=e;0>=r.X(t);)n=uw(n),r=uw(r);var i=Gs(n,1),s=Gs(r,1);for(r=Gs(r,2),n=Gs(n,2);!br(r);){var o=s.add(r);0>=o.X(t)&&(i=i.add(n),s=o),r=Gs(r,1),n=Gs(n,1)}return e=Dh(t,i.R(e)),new Na(i,e)}for(i=ko;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),s=ir(n),o=s.R(e);xn(o)||0<o.X(t);)n-=r,s=ir(n),o=s.R(e);br(s)&&(s=Og),i=i.add(s),t=Dh(t,o)}return new Na(i,t)}U.gb=function(t){return Oh(this,t).h};U.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new Ce(n,this.h&t.h)};U.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new Ce(n,this.h|t.h)};U.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new Ce(n,this.h^t.h)};function uw(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new Ce(n,t.h)}function Gs(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],s=0;s<r;s++)i[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new Ce(i,t.h)}Nh.prototype.createWebChannel=Nh.prototype.g;yn.prototype.send=yn.prototype.u;yn.prototype.open=yn.prototype.m;yn.prototype.close=yn.prototype.close;Yd.NO_ERROR=0;Yd.TIMEOUT=8;Yd.HTTP_ERROR=6;fk.COMPLETE="complete";pk.EventType=Eu;Eu.OPEN="a";Eu.CLOSE="b";Eu.ERROR="c";Eu.MESSAGE="d";Tt.prototype.listen=Tt.prototype.O;Ze.prototype.listenOnce=Ze.prototype.P;Ze.prototype.getLastError=Ze.prototype.Sa;Ze.prototype.getLastErrorCode=Ze.prototype.Ia;Ze.prototype.getStatus=Ze.prototype.da;Ze.prototype.getResponseJson=Ze.prototype.Wa;Ze.prototype.getResponseText=Ze.prototype.ja;Ze.prototype.send=Ze.prototype.ha;Ze.prototype.setWithCredentials=Ze.prototype.Oa;Gn.prototype.digest=Gn.prototype.l;Gn.prototype.reset=Gn.prototype.reset;Gn.prototype.update=Gn.prototype.j;Ce.prototype.add=Ce.prototype.add;Ce.prototype.multiply=Ce.prototype.R;Ce.prototype.modulo=Ce.prototype.gb;Ce.prototype.compare=Ce.prototype.X;Ce.prototype.toNumber=Ce.prototype.ea;Ce.prototype.toString=Ce.prototype.toString;Ce.prototype.getBits=Ce.prototype.D;Ce.fromNumber=ir;Ce.fromString=Qk;var mO=function(){return new Nh},gO=function(){return Xd()},Xp=Yd,yO=fk,vO=Ls,cw={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},_O=Iu,dc=pk,wO=Ze,EO=Gn,Co=Ce;const hw="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ft.UNAUTHENTICATED=new Ft(null),Ft.GOOGLE_CREDENTIALS=new Ft("google-credentials-uid"),Ft.FIRST_PARTY=new Ft("first-party-uid"),Ft.MOCK_USER=new Ft("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let la="10.5.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ts=new pv("@firebase/firestore");function Da(){return Ts.logLevel}function H(t,...e){if(Ts.logLevel<=ge.DEBUG){const n=e.map(Fv);Ts.debug(`Firestore (${la}): ${t}`,...n)}}function Br(t,...e){if(Ts.logLevel<=ge.ERROR){const n=e.map(Fv);Ts.error(`Firestore (${la}): ${t}`,...n)}}function Bo(t,...e){if(Ts.logLevel<=ge.WARN){const n=e.map(Fv);Ts.warn(`Firestore (${la}): ${t}`,...n)}}function Fv(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function re(t="Unexpected state"){const e=`FIRESTORE (${la}) INTERNAL ASSERTION FAILED: `+t;throw Br(e),new Error(e)}function $e(t,e){t||re()}function ce(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class B extends yr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xk{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class TO{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ft.UNAUTHENTICATED))}shutdown(){}}class SO{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class IO{constructor(e){this.t=e,this.currentUser=Ft.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new Mr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Mr,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{H("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(H("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Mr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(H("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?($e(typeof r.accessToken=="string"),new Xk(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return $e(e===null||typeof e=="string"),new Ft(e)}}class kO{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Ft.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class CO{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new kO(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Ft.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class RO{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class xO{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=s=>{s.error!=null&&H("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,H("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{H("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):H("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?($e(typeof n.token=="string"),this.R=n.token,new RO(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AO(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yk{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=AO(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function Te(t,e){return t<e?-1:t>e?1:0}function zo(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new B(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new B(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new B(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new B(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return at.fromMillis(Date.now())}static fromDate(e){return at.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new at(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Te(this.nanoseconds,e.nanoseconds):Te(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ae(e)}static min(){return new ae(new at(0,0))}static max(){return new ae(new at(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl{constructor(e,n,r){n===void 0?n=0:n>e.length&&re(),r===void 0?r=e.length-n:r>e.length-n&&re(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Wl.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Wl?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class je extends Wl{construct(e,n,r){return new je(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new B(N.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new je(n)}static emptyPath(){return new je([])}}const PO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Pt extends Wl{construct(e,n,r){return new Pt(e,n,r)}static isValidIdentifier(e){return PO.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Pt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Pt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new B(N.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new B(N.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new B(N.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new B(N.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Pt(n)}static emptyPath(){return new Pt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(e){this.path=e}static fromPath(e){return new Y(je.fromString(e))}static fromName(e){return new Y(je.fromString(e).popFirst(5))}static empty(){return new Y(je.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&je.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return je.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Y(new je(e.slice()))}}function bO(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ae.fromTimestamp(r===1e9?new at(n+1,0):new at(n,r));return new Di(i,Y.empty(),e)}function NO(t){return new Di(t.readTime,t.key,-1)}class Di{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Di(ae.min(),Y.empty(),-1)}static max(){return new Di(ae.max(),Y.empty(),-1)}}function DO(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Y.comparator(t.documentKey,e.documentKey),n!==0?n:Te(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OO="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class LO{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ru(t){if(t.code!==N.FAILED_PRECONDITION||t.message!==OO)throw t;H("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&re(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new L((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof L?n:L.resolve(n)}catch(n){return L.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):L.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):L.reject(n)}static resolve(e){return new L((n,r)=>{n(e)})}static reject(e){return new L((n,r)=>{r(e)})}static waitFor(e){return new L((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=L.resolve(!1);for(const r of e)n=n.next(i=>i?L.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new L((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const u=l;n(e[u]).next(c=>{o[u]=c,++a,a===s&&r(o)},c=>i(c))}})}static doWhile(e,n){return new L((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function xu(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $v{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.se(r),this.oe=r=>n.writeSequenceNumber(r))}se(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.oe&&this.oe(e),e}}$v._e=-1;function of(t){return t==null}function Lh(t){return t===0&&1/t==-1/0}function MO(t){return typeof t=="number"&&Number.isInteger(t)&&!Lh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dw(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ms(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Jk(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e,n){this.comparator=e,this.root=n||xt.EMPTY}insert(e,n){return new Xe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,xt.BLACK,null,null))}remove(e){return new Xe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,xt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new fc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new fc(this.root,e,this.comparator,!1)}getReverseIterator(){return new fc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new fc(this.root,e,this.comparator,!0)}}class fc{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class xt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??xt.RED,this.left=i??xt.EMPTY,this.right=s??xt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new xt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return xt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return xt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,xt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,xt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw re();const e=this.left.check();if(e!==this.right.check())throw re();return e+(this.isRed()?0:1)}}xt.EMPTY=null,xt.RED=!0,xt.BLACK=!1;xt.EMPTY=new class{constructor(){this.size=0}get key(){throw re()}get value(){throw re()}get color(){throw re()}get left(){throw re()}get right(){throw re()}copy(e,n,r,i,s){return this}insert(e,n,r){return new xt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e){this.comparator=e,this.data=new Xe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new fw(this.data.getIterator())}getIteratorFrom(e){return new fw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Dt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Dt(this.comparator);return n.data=e,n}}class fw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e){this.fields=e,e.sort(Pt.comparator)}static empty(){return new fn([])}unionWith(e){let n=new Dt(Pt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new fn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return zo(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zk extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Zk("Invalid base64 string: "+s):s}}(e);return new Ht(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Ht(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Te(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ht.EMPTY_BYTE_STRING=new Ht("");const VO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Oi(t){if($e(!!t),typeof t=="string"){let e=0;const n=VO.exec(t);if($e(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:dt(t.seconds),nanos:dt(t.nanos)}}function dt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ss(t){return typeof t=="string"?Ht.fromBase64String(t):Ht.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uv(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Bv(t){const e=t.mapValue.fields.__previous_value__;return Uv(e)?Bv(e):e}function ql(t){const e=Oi(t.mapValue.fields.__local_write_time__.timestampValue);return new at(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jO{constructor(e,n,r,i,s,o,a,l,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u}}class Hl{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Hl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Hl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Is(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Uv(t)?4:FO(t)?9007199254740991:10:re()}function mr(t,e){if(t===e)return!0;const n=Is(t);if(n!==Is(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ql(t).isEqual(ql(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Oi(i.timestampValue),a=Oi(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Ss(i.bytesValue).isEqual(Ss(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return dt(i.geoPointValue.latitude)===dt(s.geoPointValue.latitude)&&dt(i.geoPointValue.longitude)===dt(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return dt(i.integerValue)===dt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=dt(i.doubleValue),a=dt(s.doubleValue);return o===a?Lh(o)===Lh(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return zo(t.arrayValue.values||[],e.arrayValue.values||[],mr);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(dw(o)!==dw(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!mr(o[l],a[l])))return!1;return!0}(t,e);default:return re()}}function Gl(t,e){return(t.values||[]).find(n=>mr(n,e))!==void 0}function Wo(t,e){if(t===e)return 0;const n=Is(t),r=Is(e);if(n!==r)return Te(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Te(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=dt(s.integerValue||s.doubleValue),l=dt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return pw(t.timestampValue,e.timestampValue);case 4:return pw(ql(t),ql(e));case 5:return Te(t.stringValue,e.stringValue);case 6:return function(s,o){const a=Ss(s),l=Ss(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const c=Te(a[u],l[u]);if(c!==0)return c}return Te(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=Te(dt(s.latitude),dt(o.latitude));return a!==0?a:Te(dt(s.longitude),dt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){const a=s.values||[],l=o.values||[];for(let u=0;u<a.length&&u<l.length;++u){const c=Wo(a[u],l[u]);if(c)return c}return Te(a.length,l.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===pc.mapValue&&o===pc.mapValue)return 0;if(s===pc.mapValue)return 1;if(o===pc.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),u=o.fields||{},c=Object.keys(u);l.sort(),c.sort();for(let d=0;d<l.length&&d<c.length;++d){const h=Te(l[d],c[d]);if(h!==0)return h;const f=Wo(a[l[d]],u[c[d]]);if(f!==0)return f}return Te(l.length,c.length)}(t.mapValue,e.mapValue);default:throw re()}}function pw(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Te(t,e);const n=Oi(t),r=Oi(e),i=Te(n.seconds,r.seconds);return i!==0?i:Te(n.nanos,r.nanos)}function qo(t){return Lg(t)}function Lg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Oi(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ss(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Y.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Lg(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${Lg(n.fields[o])}`;return i+"}"}(t.mapValue):re()}function mw(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Mg(t){return!!t&&"integerValue"in t}function zv(t){return!!t&&"arrayValue"in t}function gw(t){return!!t&&"nullValue"in t}function yw(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Lc(t){return!!t&&"mapValue"in t}function ll(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ms(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ll(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ll(t.arrayValue.values[n]);return e}return Object.assign({},t)}function FO(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e){this.value=e}static empty(){return new sn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Lc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ll(n)}setAll(e){let n=Pt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=ll(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Lc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return mr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Lc(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Ms(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new sn(ll(this.value))}}function eC(t){const e=[];return Ms(t.fields,(n,r)=>{const i=new Pt([n]);if(Lc(r)){const s=eC(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new fn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Ut(e,0,ae.min(),ae.min(),ae.min(),sn.empty(),0)}static newFoundDocument(e,n,r,i){return new Ut(e,1,n,ae.min(),r,i,0)}static newNoDocument(e,n){return new Ut(e,2,n,ae.min(),ae.min(),sn.empty(),0)}static newUnknownDocument(e,n){return new Ut(e,3,n,ae.min(),ae.min(),sn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=sn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=sn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ut&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ut(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mh{constructor(e,n){this.position=e,this.inclusive=n}}function vw(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=Y.comparator(Y.fromName(o.referenceValue),n.key):r=Wo(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function _w(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!mr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{constructor(e,n="asc"){this.field=e,this.dir=n}}function $O(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{}class pt extends tC{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new BO(e,n,r):n==="array-contains"?new qO(e,r):n==="in"?new HO(e,r):n==="not-in"?new GO(e,r):n==="array-contains-any"?new KO(e,r):new pt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new zO(e,r):new WO(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Wo(n,this.value)):n!==null&&Is(this.value)===Is(n)&&this.matchesComparison(Wo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return re()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Kn extends tC{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new Kn(e,n)}matches(e){return nC(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function nC(t){return t.op==="and"}function rC(t){return UO(t)&&nC(t)}function UO(t){for(const e of t.filters)if(e instanceof Kn)return!1;return!0}function Vg(t){if(t instanceof pt)return t.field.canonicalString()+t.op.toString()+qo(t.value);if(rC(t))return t.filters.map(e=>Vg(e)).join(",");{const e=t.filters.map(n=>Vg(n)).join(",");return`${t.op}(${e})`}}function iC(t,e){return t instanceof pt?function(r,i){return i instanceof pt&&r.op===i.op&&r.field.isEqual(i.field)&&mr(r.value,i.value)}(t,e):t instanceof Kn?function(r,i){return i instanceof Kn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&iC(o,i.filters[a]),!0):!1}(t,e):void re()}function sC(t){return t instanceof pt?function(n){return`${n.field.canonicalString()} ${n.op} ${qo(n.value)}`}(t):t instanceof Kn?function(n){return n.op.toString()+" {"+n.getFilters().map(sC).join(" ,")+"}"}(t):"Filter"}class BO extends pt{constructor(e,n,r){super(e,n,r),this.key=Y.fromName(r.referenceValue)}matches(e){const n=Y.comparator(e.key,this.key);return this.matchesComparison(n)}}class zO extends pt{constructor(e,n){super(e,"in",n),this.keys=oC("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class WO extends pt{constructor(e,n){super(e,"not-in",n),this.keys=oC("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function oC(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Y.fromName(r.referenceValue))}class qO extends pt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return zv(n)&&Gl(n.arrayValue,this.value)}}class HO extends pt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Gl(this.value.arrayValue,n)}}class GO extends pt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Gl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Gl(this.value.arrayValue,n)}}class KO extends pt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!zv(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Gl(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QO{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ce=null}}function ww(t,e=null,n=[],r=[],i=null,s=null,o=null){return new QO(t,e,n,r,i,s,o)}function Wv(t){const e=ce(t);if(e.ce===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Vg(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),of(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>qo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>qo(r)).join(",")),e.ce=n}return e.ce}function qv(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!$O(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!iC(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!_w(t.startAt,e.startAt)&&_w(t.endAt,e.endAt)}function jg(t){return Y.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function XO(t,e,n,r,i,s,o,a){return new ua(t,e,n,r,i,s,o,a)}function Hv(t){return new ua(t)}function Ew(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function aC(t){return t.collectionGroup!==null}function ul(t){const e=ce(t);if(e.le===null){e.le=[];const n=new Set;for(const s of e.explicitOrderBy)e.le.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Dt(Pt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.le.push(new Kl(s,r))}),n.has(Pt.keyField().canonicalString())||e.le.push(new Kl(Pt.keyField(),r))}return e.le}function ur(t){const e=ce(t);return e.he||(e.he=YO(e,ul(t))),e.he}function YO(t,e){if(t.limitType==="F")return ww(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Kl(i.field,s)});const n=t.endAt?new Mh(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Mh(t.startAt.position,t.startAt.inclusive):null;return ww(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Fg(t,e){const n=t.filters.concat([e]);return new ua(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function $g(t,e,n){return new ua(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function af(t,e){return qv(ur(t),ur(e))&&t.limitType===e.limitType}function lC(t){return`${Wv(ur(t))}|lt:${t.limitType}`}function Qs(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>sC(i)).join(", ")}]`),of(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>qo(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>qo(i)).join(",")),`Target(${r})`}(ur(t))}; limitType=${t.limitType})`}function lf(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Y.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of ul(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const u=vw(o,a,l);return o.inclusive?u<=0:u<0}(r.startAt,ul(r),i)||r.endAt&&!function(o,a,l){const u=vw(o,a,l);return o.inclusive?u>=0:u>0}(r.endAt,ul(r),i))}(t,e)}function JO(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function uC(t){return(e,n)=>{let r=!1;for(const i of ul(t)){const s=ZO(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function ZO(t,e,n){const r=t.field.isKeyField()?Y.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),u=a.data.field(s);return l!==null&&u!==null?Wo(l,u):re()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return re()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ms(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return Jk(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e9=new Xe(Y.comparator);function zr(){return e9}const cC=new Xe(Y.comparator);function za(...t){let e=cC;for(const n of t)e=e.insert(n.key,n);return e}function hC(t){let e=cC;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function as(){return cl()}function dC(){return cl()}function cl(){return new ca(t=>t.toString(),(t,e)=>t.isEqual(e))}const t9=new Xe(Y.comparator),n9=new Dt(Y.comparator);function pe(...t){let e=n9;for(const n of t)e=e.add(n);return e}const r9=new Dt(Te);function i9(){return r9}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fC(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Lh(e)?"-0":e}}function pC(t){return{integerValue:""+t}}function s9(t,e){return MO(e)?pC(e):fC(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uf{constructor(){this._=void 0}}function o9(t,e,n){return t instanceof Vh?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Uv(s)&&(s=Bv(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Ho?gC(t,e):t instanceof Go?yC(t,e):function(i,s){const o=mC(i,s),a=Tw(o)+Tw(i.Ie);return Mg(o)&&Mg(i.Ie)?pC(a):fC(i.serializer,a)}(t,e)}function a9(t,e,n){return t instanceof Ho?gC(t,e):t instanceof Go?yC(t,e):n}function mC(t,e){return t instanceof jh?function(r){return Mg(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Vh extends uf{}class Ho extends uf{constructor(e){super(),this.elements=e}}function gC(t,e){const n=vC(e);for(const r of t.elements)n.some(i=>mr(i,r))||n.push(r);return{arrayValue:{values:n}}}class Go extends uf{constructor(e){super(),this.elements=e}}function yC(t,e){let n=vC(e);for(const r of t.elements)n=n.filter(i=>!mr(i,r));return{arrayValue:{values:n}}}class jh extends uf{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function Tw(t){return dt(t.integerValue||t.doubleValue)}function vC(t){return zv(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _C{constructor(e,n){this.field=e,this.transform=n}}function l9(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Ho&&i instanceof Ho||r instanceof Go&&i instanceof Go?zo(r.elements,i.elements,mr):r instanceof jh&&i instanceof jh?mr(r.Ie,i.Ie):r instanceof Vh&&i instanceof Vh}(t.transform,e.transform)}class u9{constructor(e,n){this.version=e,this.transformResults=n}}class cr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new cr}static exists(e){return new cr(void 0,e)}static updateTime(e){return new cr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Mc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class cf{}function wC(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new TC(t.key,cr.none()):new Au(t.key,t.data,cr.none());{const n=t.data,r=sn.empty();let i=new Dt(Pt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new qi(t.key,r,new fn(i.toArray()),cr.none())}}function c9(t,e,n){t instanceof Au?function(i,s,o){const a=i.value.clone(),l=Iw(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof qi?function(i,s,o){if(!Mc(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=Iw(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(EC(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function hl(t,e,n,r){return t instanceof Au?function(s,o,a,l){if(!Mc(s.precondition,o))return a;const u=s.value.clone(),c=kw(s.fieldTransforms,l,o);return u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof qi?function(s,o,a,l){if(!Mc(s.precondition,o))return a;const u=kw(s.fieldTransforms,l,o),c=o.data;return c.setAll(EC(s)),c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(s,o,a){return Mc(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function h9(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=mC(r.transform,i||null);s!=null&&(n===null&&(n=sn.empty()),n.set(r.field,s))}return n||null}function Sw(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&zo(r,i,(s,o)=>l9(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Au extends cf{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class qi extends cf{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function EC(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Iw(t,e,n){const r=new Map;$e(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,a9(o,a,n[i]))}return r}function kw(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,o9(s,o,e))}return r}class TC extends cf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class d9 extends cf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f9{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&c9(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=hl(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=hl(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=dC();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=wC(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(ae.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),pe())}isEqual(e){return this.batchId===e.batchId&&zo(this.mutations,e.mutations,(n,r)=>Sw(n,r))&&zo(this.baseMutations,e.baseMutations,(n,r)=>Sw(n,r))}}class Gv{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){$e(e.mutations.length===r.length);let i=function(){return t9}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new Gv(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p9{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m9{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ct,ve;function g9(t){switch(t){default:return re();case N.CANCELLED:case N.UNKNOWN:case N.DEADLINE_EXCEEDED:case N.RESOURCE_EXHAUSTED:case N.INTERNAL:case N.UNAVAILABLE:case N.UNAUTHENTICATED:return!1;case N.INVALID_ARGUMENT:case N.NOT_FOUND:case N.ALREADY_EXISTS:case N.PERMISSION_DENIED:case N.FAILED_PRECONDITION:case N.ABORTED:case N.OUT_OF_RANGE:case N.UNIMPLEMENTED:case N.DATA_LOSS:return!0}}function SC(t){if(t===void 0)return Br("GRPC error has no .code"),N.UNKNOWN;switch(t){case ct.OK:return N.OK;case ct.CANCELLED:return N.CANCELLED;case ct.UNKNOWN:return N.UNKNOWN;case ct.DEADLINE_EXCEEDED:return N.DEADLINE_EXCEEDED;case ct.RESOURCE_EXHAUSTED:return N.RESOURCE_EXHAUSTED;case ct.INTERNAL:return N.INTERNAL;case ct.UNAVAILABLE:return N.UNAVAILABLE;case ct.UNAUTHENTICATED:return N.UNAUTHENTICATED;case ct.INVALID_ARGUMENT:return N.INVALID_ARGUMENT;case ct.NOT_FOUND:return N.NOT_FOUND;case ct.ALREADY_EXISTS:return N.ALREADY_EXISTS;case ct.PERMISSION_DENIED:return N.PERMISSION_DENIED;case ct.FAILED_PRECONDITION:return N.FAILED_PRECONDITION;case ct.ABORTED:return N.ABORTED;case ct.OUT_OF_RANGE:return N.OUT_OF_RANGE;case ct.UNIMPLEMENTED:return N.UNIMPLEMENTED;case ct.DATA_LOSS:return N.DATA_LOSS;default:return re()}}(ve=ct||(ct={}))[ve.OK=0]="OK",ve[ve.CANCELLED=1]="CANCELLED",ve[ve.UNKNOWN=2]="UNKNOWN",ve[ve.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ve[ve.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ve[ve.NOT_FOUND=5]="NOT_FOUND",ve[ve.ALREADY_EXISTS=6]="ALREADY_EXISTS",ve[ve.PERMISSION_DENIED=7]="PERMISSION_DENIED",ve[ve.UNAUTHENTICATED=16]="UNAUTHENTICATED",ve[ve.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ve[ve.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ve[ve.ABORTED=10]="ABORTED",ve[ve.OUT_OF_RANGE=11]="OUT_OF_RANGE",ve[ve.UNIMPLEMENTED=12]="UNIMPLEMENTED",ve[ve.INTERNAL=13]="INTERNAL",ve[ve.UNAVAILABLE=14]="UNAVAILABLE",ve[ve.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y9(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v9=new Co([4294967295,4294967295],0);function Cw(t){const e=y9().encode(t),n=new EO;return n.update(e),new Uint8Array(n.digest())}function Rw(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Co([n,r],0),new Co([i,s],0)]}class Kv{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Wa(`Invalid padding: ${n}`);if(r<0)throw new Wa(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Wa(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Wa(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=Co.fromNumber(this.Te)}de(e,n,r){let i=e.add(n.multiply(Co.fromNumber(r)));return i.compare(v9)===1&&(i=new Co([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const n=Cw(e),[r,i]=Rw(n);for(let s=0;s<this.hashCount;s++){const o=this.de(r,i,s);if(!this.Ae(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new Kv(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Te===0)return;const n=Cw(e),[r,i]=Rw(n);for(let s=0;s<this.hashCount;s++){const o=this.de(r,i,s);this.Re(o)}}Re(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Wa extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hf{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Pu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new hf(ae.min(),i,new Xe(Te),zr(),pe())}}class Pu{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Pu(r,n,pe(),pe(),pe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(e,n,r,i){this.Ve=e,this.removedTargetIds=n,this.key=r,this.me=i}}class IC{constructor(e,n){this.targetId=e,this.fe=n}}class kC{constructor(e,n,r=Ht.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class xw{constructor(){this.ge=0,this.pe=Pw(),this.ye=Ht.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=pe(),n=pe(),r=pe();return this.pe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:re()}}),new Pu(this.ye,this.we,e,n,r)}Fe(){this.Se=!1,this.pe=Pw()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1}Be(){this.Se=!0,this.we=!0}}class _9{constructor(e){this.Le=e,this.ke=new Map,this.qe=zr(),this.Qe=Aw(),this.Ke=new Xe(Te)}$e(e){for(const n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(const n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{const r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(n);break;case 3:this.je(n)&&(r.Be(),r.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.Ce(e.resumeToken));break;default:re()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((r,i)=>{this.je(i)&&n(i)})}Je(e){const n=e.targetId,r=e.fe.count,i=this.Ye(n);if(i){const s=i.target;if(jg(s))if(r===0){const o=new Y(s.path);this.We(n,o,Ut.newNoDocument(o,ae.min()))}else $e(r===1);else{const o=this.Ze(n);if(o!==r){const a=this.Xe(e),l=a?this.et(a,e,o):1;if(l!==0){this.He(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,u)}}}}}Xe(e){const n=e.fe.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=Ss(r).toUint8Array()}catch(l){if(l instanceof Zk)return Bo("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Kv(o,i,s)}catch(l){return Bo(l instanceof Wa?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Te===0?null:a}et(e,n,r){return n.fe.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.We(n,s,null),i++)}),i}it(e){const n=new Map;this.ke.forEach((s,o)=>{const a=this.Ye(o);if(a){if(s.current&&jg(a.target)){const l=new Y(a.target.path);this.qe.get(l)!==null||this.st(o,l)||this.We(o,l,Ut.newNoDocument(l,e))}s.De&&(n.set(o,s.ve()),s.Fe())}});let r=pe();this.Qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.Ye(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.qe.forEach((s,o)=>o.setReadTime(e));const i=new hf(e,n,this.Ke,this.qe,r);return this.qe=zr(),this.Qe=Aw(),this.Ke=new Xe(Te),i}Ue(e,n){if(!this.je(e))return;const r=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,r),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,r){if(!this.je(e))return;const i=this.ze(e);this.st(e,n)?i.Me(n,1):i.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),r&&(this.qe=this.qe.insert(n,r))}removeTarget(e){this.ke.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new xw,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new Dt(Te),this.Qe=this.Qe.insert(e,n)),n}je(e){const n=this.Ye(e)!==null;return n||H("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.ke.get(e);return n&&n.be?null:this.Le._t(e)}He(e){this.ke.set(e,new xw),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Aw(){return new Xe(Y.comparator)}function Pw(){return new Xe(Y.comparator)}const w9=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),E9=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),T9=(()=>({and:"AND",or:"OR"}))();class S9{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Ug(t,e){return t.useProto3Json||of(e)?e:{value:e}}function Fh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function CC(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function I9(t,e){return Fh(t,e.toTimestamp())}function hr(t){return $e(!!t),ae.fromTimestamp(function(n){const r=Oi(n);return new at(r.seconds,r.nanos)}(t))}function Qv(t,e){return function(r){return new je(["projects",r.projectId,"databases",r.database])}(t).child("documents").child(e).canonicalString()}function RC(t){const e=je.fromString(t);return $e(bC(e)),e}function Bg(t,e){return Qv(t.databaseId,e.path)}function Yp(t,e){const n=RC(e);if(n.get(1)!==t.databaseId.projectId)throw new B(N.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new B(N.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Y(xC(n))}function zg(t,e){return Qv(t.databaseId,e)}function k9(t){const e=RC(t);return e.length===4?je.emptyPath():xC(e)}function Wg(t){return new je(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function xC(t){return $e(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function bw(t,e,n){return{name:Bg(t,e),fields:n.value.mapValue.fields}}function C9(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:re()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,c){return u.useProto3Json?($e(c===void 0||typeof c=="string"),Ht.fromBase64String(c||"")):($e(c===void 0||c instanceof Uint8Array),Ht.fromUint8Array(c||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const c=u.code===void 0?N.UNKNOWN:SC(u.code);return new B(c,u.message||"")}(o);n=new kC(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Yp(t,r.document.name),s=hr(r.document.updateTime),o=r.document.createTime?hr(r.document.createTime):ae.min(),a=new sn({mapValue:{fields:r.document.fields}}),l=Ut.newFoundDocument(i,s,o,a),u=r.targetIds||[],c=r.removedTargetIds||[];n=new Vc(u,c,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Yp(t,r.document),s=r.readTime?hr(r.readTime):ae.min(),o=Ut.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Vc([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Yp(t,r.document),s=r.removedTargetIds||[];n=new Vc([],s,i,null)}else{if(!("filter"in e))return re();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new m9(i,s),a=r.targetId;n=new IC(a,o)}}return n}function R9(t,e){let n;if(e instanceof Au)n={update:bw(t,e.key,e.value)};else if(e instanceof TC)n={delete:Bg(t,e.key)};else if(e instanceof qi)n={update:bw(t,e.key,e.data),updateMask:M9(e.fieldMask)};else{if(!(e instanceof d9))return re();n={verify:Bg(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Vh)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Ho)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Go)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof jh)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw re()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:I9(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:re()}(t,e.precondition)),n}function x9(t,e){return t&&t.length>0?($e(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?hr(i.updateTime):hr(s);return o.isEqual(ae.min())&&(o=hr(s)),new u9(o,i.transformResults||[])}(n,e))):[]}function A9(t,e){return{documents:[zg(t,e.path)]}}function P9(t,e){const n={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(n.parent=zg(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=zg(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(l){if(l.length!==0)return PC(Kn.create(l,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const s=function(l){if(l.length!==0)return l.map(u=>function(d){return{field:Xs(d.field),direction:D9(d.dir)}}(u))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=Ug(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),n}function b9(t){let e=k9(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){$e(r===1);const c=n.from[0];c.allDescendants?i=c.collectionId:e=e.child(c.collectionId)}let s=[];n.where&&(s=function(d){const h=AC(d);return h instanceof Kn&&rC(h)?h.getFilters():[h]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(h=>function(g){return new Kl(Ys(g.field),function(E){switch(E){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(g.direction))}(h))}(n.orderBy));let a=null;n.limit&&(a=function(d){let h;return h=typeof d=="object"?d.value:d,of(h)?null:h}(n.limit));let l=null;n.startAt&&(l=function(d){const h=!!d.before,f=d.values||[];return new Mh(f,h)}(n.startAt));let u=null;return n.endAt&&(u=function(d){const h=!d.before,f=d.values||[];return new Mh(f,h)}(n.endAt)),XO(e,i,o,s,a,"F",l,u)}function N9(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return re()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function AC(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ys(n.unaryFilter.field);return pt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Ys(n.unaryFilter.field);return pt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Ys(n.unaryFilter.field);return pt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ys(n.unaryFilter.field);return pt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return re()}}(t):t.fieldFilter!==void 0?function(n){return pt.create(Ys(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return re()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Kn.create(n.compositeFilter.filters.map(r=>AC(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return re()}}(n.compositeFilter.op))}(t):re()}function D9(t){return w9[t]}function O9(t){return E9[t]}function L9(t){return T9[t]}function Xs(t){return{fieldPath:t.canonicalString()}}function Ys(t){return Pt.fromServerFormat(t.fieldPath)}function PC(t){return t instanceof pt?function(n){if(n.op==="=="){if(yw(n.value))return{unaryFilter:{field:Xs(n.field),op:"IS_NAN"}};if(gw(n.value))return{unaryFilter:{field:Xs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(yw(n.value))return{unaryFilter:{field:Xs(n.field),op:"IS_NOT_NAN"}};if(gw(n.value))return{unaryFilter:{field:Xs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Xs(n.field),op:O9(n.op),value:n.value}}}(t):t instanceof Kn?function(n){const r=n.getFilters().map(i=>PC(i));return r.length===1?r[0]:{compositeFilter:{op:L9(n.op),filters:r}}}(t):re()}function M9(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function bC(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(e,n,r,i,s=ae.min(),o=ae.min(),a=Ht.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new mi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new mi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new mi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new mi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V9{constructor(e){this.ut=e}}function j9(t){const e=b9({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?$g(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F9{constructor(){this.on=new $9}addToCollectionParentIndex(e,n){return this.on.add(n),L.resolve()}getCollectionParents(e,n){return L.resolve(this.on.getEntries(n))}addFieldIndex(e,n){return L.resolve()}deleteFieldIndex(e,n){return L.resolve()}deleteAllFieldIndexes(e){return L.resolve()}createTargetIndexes(e,n){return L.resolve()}getDocumentsMatchingTarget(e,n){return L.resolve(null)}getIndexType(e,n){return L.resolve(0)}getFieldIndexes(e,n){return L.resolve([])}getNextCollectionGroupToUpdate(e){return L.resolve(null)}getMinOffset(e,n){return L.resolve(Di.min())}getMinOffsetFromCollectionGroup(e,n){return L.resolve(Di.min())}updateCollectionGroup(e,n,r){return L.resolve()}updateIndexEntries(e,n){return L.resolve()}}class $9{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Dt(je.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Dt(je.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static On(){return new Ko(0)}static Nn(){return new Ko(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U9{constructor(){this.changes=new ca(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ut.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?L.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B9{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z9{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&hl(r.mutation,i,fn.empty(),at.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,pe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=pe()){const i=as();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=za();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=as();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,pe()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=zr();const o=cl(),a=function(){return cl()}();return n.forEach((l,u)=>{const c=r.get(u.key);i.has(u.key)&&(c===void 0||c.mutation instanceof qi)?s=s.insert(u.key,u):c!==void 0?(o.set(u.key,c.mutation.getFieldMask()),hl(c.mutation,u,c.mutation.getFieldMask(),at.now())):o.set(u.key,fn.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((u,c)=>o.set(u,c)),n.forEach((u,c)=>{var d;return a.set(u,new B9(c,(d=o.get(u))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){const r=cl();let i=new Xe((o,a)=>o-a),s=pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let c=r.get(l)||fn.empty();c=a.applyToLocalView(u,c),r.set(l,c);const d=(i.get(a.batchId)||pe()).add(l);i=i.insert(a.batchId,d)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,c=l.value,d=dC();c.forEach(h=>{if(!s.has(h)){const f=wC(n.get(h),r.get(h));f!==null&&d.set(h,f),s=s.add(h)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,d))}return L.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return Y.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):aC(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):L.resolve(as());let a=-1,l=s;return o.next(u=>L.forEach(u,(c,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(c)?L.resolve():this.remoteDocumentCache.getEntry(e,c).next(h=>{l=l.insert(c,h)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,l,u,pe())).next(c=>({batchId:a,changes:hC(c)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Y(n)).next(r=>{let i=za();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=za();return this.indexManager.getCollectionParents(e,s).next(a=>L.forEach(a,l=>{const u=function(d,h){return new ua(h,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(c=>{c.forEach((d,h)=>{o=o.insert(d,h)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,u)=>{const c=u.getKey();o.get(c)===null&&(o=o.insert(c,Ut.newInvalidDocument(c)))});let a=za();return o.forEach((l,u)=>{const c=s.get(l);c!==void 0&&hl(c.mutation,u,fn.empty(),at.now()),lf(n,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W9{constructor(e){this.serializer=e,this.ur=new Map,this.cr=new Map}getBundleMetadata(e,n){return L.resolve(this.ur.get(n))}saveBundleMetadata(e,n){return this.ur.set(n.id,function(i){return{id:i.id,version:i.version,createTime:hr(i.createTime)}}(n)),L.resolve()}getNamedQuery(e,n){return L.resolve(this.cr.get(n))}saveNamedQuery(e,n){return this.cr.set(n.name,function(i){return{name:i.name,query:j9(i.bundledQuery),readTime:hr(i.readTime)}}(n)),L.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q9{constructor(){this.overlays=new Xe(Y.comparator),this.lr=new Map}getOverlay(e,n){return L.resolve(this.overlays.get(n))}getOverlays(e,n){const r=as();return L.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.lt(e,n,s)}),L.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.lr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.lr.delete(r)),L.resolve()}getOverlaysForCollection(e,n,r){const i=as(),s=n.length+1,o=new Y(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return L.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Xe((u,c)=>u-c);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let c=s.get(u.largestBatchId);c===null&&(c=as(),s=s.insert(u.largestBatchId,c)),c.set(u.getKey(),u)}}const a=as(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,c)=>a.set(u,c)),!(a.size()>=i)););return L.resolve(a)}lt(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.lr.get(i.largestBatchId).delete(r.key);this.lr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new p9(n,r));let s=this.lr.get(n);s===void 0&&(s=pe(),this.lr.set(n,s)),this.lr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xv{constructor(){this.hr=new Dt(_t.Pr),this.Ir=new Dt(_t.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(e,n){const r=new _t(e,n);this.hr=this.hr.add(r),this.Ir=this.Ir.add(r)}Er(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.dr(new _t(e,n))}Ar(e,n){e.forEach(r=>this.removeReference(r,n))}Rr(e){const n=new Y(new je([])),r=new _t(n,e),i=new _t(n,e+1),s=[];return this.Ir.forEachInRange([r,i],o=>{this.dr(o),s.push(o.key)}),s}Vr(){this.hr.forEach(e=>this.dr(e))}dr(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}mr(e){const n=new Y(new je([])),r=new _t(n,e),i=new _t(n,e+1);let s=pe();return this.Ir.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new _t(e,0),r=this.hr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class _t{constructor(e,n){this.key=e,this.gr=n}static Pr(e,n){return Y.comparator(e.key,n.key)||Te(e.gr,n.gr)}static Tr(e,n){return Te(e.gr,n.gr)||Y.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H9{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.pr=1,this.yr=new Dt(_t.Pr)}checkEmpty(e){return L.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.pr;this.pr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new f9(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.yr=this.yr.add(new _t(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return L.resolve(o)}lookupMutationBatch(e,n){return L.resolve(this.wr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Sr(r),s=i<0?0:i;return L.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return L.resolve(this.mutationQueue.length===0?-1:this.pr-1)}getAllMutationBatches(e){return L.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new _t(n,0),i=new _t(n,Number.POSITIVE_INFINITY),s=[];return this.yr.forEachInRange([r,i],o=>{const a=this.wr(o.gr);s.push(a)}),L.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Dt(Te);return n.forEach(i=>{const s=new _t(i,0),o=new _t(i,Number.POSITIVE_INFINITY);this.yr.forEachInRange([s,o],a=>{r=r.add(a.gr)})}),L.resolve(this.br(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;Y.isDocumentKey(s)||(s=s.child(""));const o=new _t(new Y(s),0);let a=new Dt(Te);return this.yr.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.gr)),!0)},o),L.resolve(this.br(a))}br(e){const n=[];return e.forEach(r=>{const i=this.wr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){$e(this.Dr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.yr;return L.forEach(n.mutations,i=>{const s=new _t(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.yr=r})}Fn(e){}containsKey(e,n){const r=new _t(n,0),i=this.yr.firstAfterOrEqual(r);return L.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,L.resolve()}Dr(e,n){return this.Sr(e)}Sr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}wr(e){const n=this.Sr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G9{constructor(e){this.Cr=e,this.docs=function(){return new Xe(Y.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Cr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return L.resolve(r?r.document.mutableCopy():Ut.newInvalidDocument(n))}getEntries(e,n){let r=zr();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Ut.newInvalidDocument(i))}),L.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=zr();const o=n.path,a=new Y(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:c}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||DO(NO(c),r)<=0||(i.has(c.key)||lf(n,c))&&(s=s.insert(c.key,c.mutableCopy()))}return L.resolve(s)}getAllFromCollectionGroup(e,n,r,i){re()}vr(e,n){return L.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new K9(this)}getSize(e){return L.resolve(this.size)}}class K9 extends U9{constructor(e){super(),this._r=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this._r.addEntry(e,i)):this._r.removeEntry(r)}),L.waitFor(n)}getFromCache(e,n){return this._r.getEntry(e,n)}getAllFromCache(e,n){return this._r.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q9{constructor(e){this.persistence=e,this.Fr=new ca(n=>Wv(n),qv),this.lastRemoteSnapshotVersion=ae.min(),this.highestTargetId=0,this.Mr=0,this.Or=new Xv,this.targetCount=0,this.Nr=Ko.On()}forEachTarget(e,n){return this.Fr.forEach((r,i)=>n(i)),L.resolve()}getLastRemoteSnapshotVersion(e){return L.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return L.resolve(this.Mr)}allocateTargetId(e){return this.highestTargetId=this.Nr.next(),L.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Mr&&(this.Mr=n),L.resolve()}kn(e){this.Fr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Nr=new Ko(n),this.highestTargetId=n),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}addTargetData(e,n){return this.kn(n),this.targetCount+=1,L.resolve()}updateTargetData(e,n){return this.kn(n),L.resolve()}removeTargetData(e,n){return this.Fr.delete(n.target),this.Or.Rr(n.targetId),this.targetCount-=1,L.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Fr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Fr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),L.waitFor(s).next(()=>i)}getTargetCount(e){return L.resolve(this.targetCount)}getTargetData(e,n){const r=this.Fr.get(n)||null;return L.resolve(r)}addMatchingKeys(e,n,r){return this.Or.Er(n,r),L.resolve()}removeMatchingKeys(e,n,r){this.Or.Ar(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),L.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Or.Rr(n),L.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Or.mr(n);return L.resolve(r)}containsKey(e,n){return L.resolve(this.Or.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X9{constructor(e,n){this.Br={},this.overlays={},this.Lr=new $v(0),this.kr=!1,this.kr=!0,this.referenceDelegate=e(this),this.qr=new Q9(this),this.indexManager=new F9,this.remoteDocumentCache=function(i){return new G9(i)}(r=>this.referenceDelegate.Qr(r)),this.serializer=new V9(n),this.Kr=new W9(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new q9,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Br[e.toKey()];return r||(r=new H9(n,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(e,n,r){H("MemoryPersistence","Starting transaction:",e);const i=new Y9(this.Lr.next());return this.referenceDelegate.$r(),r(i).next(s=>this.referenceDelegate.Ur(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Wr(e,n){return L.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,n)))}}class Y9 extends LO{constructor(e){super(),this.currentSequenceNumber=e}}class Yv{constructor(e){this.persistence=e,this.Gr=new Xv,this.zr=null}static jr(e){return new Yv(e)}get Hr(){if(this.zr)return this.zr;throw re()}addReference(e,n,r){return this.Gr.addReference(r,n),this.Hr.delete(r.toString()),L.resolve()}removeReference(e,n,r){return this.Gr.removeReference(r,n),this.Hr.add(r.toString()),L.resolve()}markPotentiallyOrphaned(e,n){return this.Hr.add(n.toString()),L.resolve()}removeTarget(e,n){this.Gr.Rr(n.targetId).forEach(i=>this.Hr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Hr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}$r(){this.zr=new Set}Ur(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return L.forEach(this.Hr,r=>{const i=Y.fromPath(r);return this.Jr(e,i).next(s=>{s||n.removeEntry(i,ae.min())})}).next(()=>(this.zr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Jr(e,n).next(r=>{r?this.Hr.delete(n.toString()):this.Hr.add(n.toString())})}Qr(e){return 0}Jr(e,n){return L.or([()=>L.resolve(this.Gr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Wr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jv{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.ki=r,this.qi=i}static Qi(e,n){let r=pe(),i=pe();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Jv(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J9{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z9{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=8}initialize(e,n){this.Gi=e,this.indexManager=n,this.Ki=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.zi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ji(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new J9;return this.Hi(e,n,o).next(a=>{if(s.result=a,this.$i)return this.Ji(e,n,o,a.size)})}).next(()=>s.result)}Ji(e,n,r,i){return r.documentReadCount<this.Ui?(Da()<=ge.DEBUG&&H("QueryEngine","SDK will not create cache indexes for query:",Qs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),L.resolve()):(Da()<=ge.DEBUG&&H("QueryEngine","Query:",Qs(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Wi*i?(Da()<=ge.DEBUG&&H("QueryEngine","The SDK decides to create cache indexes for query:",Qs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ur(n))):L.resolve())}zi(e,n){if(Ew(n))return L.resolve(null);let r=ur(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=$g(n,null,"F"),r=ur(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=pe(...s);return this.Gi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.Yi(n,a);return this.Zi(n,u,o,l.readTime)?this.zi(e,$g(n,null,"F")):this.Xi(e,u,n,l)}))})))}ji(e,n,r,i){return Ew(n)||i.isEqual(ae.min())?L.resolve(null):this.Gi.getDocuments(e,r).next(s=>{const o=this.Yi(n,s);return this.Zi(n,o,r,i)?L.resolve(null):(Da()<=ge.DEBUG&&H("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Qs(n)),this.Xi(e,o,n,bO(i,-1)).next(a=>a))})}Yi(e,n){let r=new Dt(uC(e));return n.forEach((i,s)=>{lf(e,s)&&(r=r.add(s))}),r}Zi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Hi(e,n,r){return Da()<=ge.DEBUG&&H("QueryEngine","Using full collection scan to execute query:",Qs(n)),this.Gi.getDocumentsMatchingQuery(e,n,Di.min(),r)}Xi(e,n,r,i){return this.Gi.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eL{constructor(e,n,r,i){this.persistence=e,this.es=n,this.serializer=i,this.ts=new Xe(Te),this.ns=new ca(s=>Wv(s),qv),this.rs=new Map,this.ss=e.getRemoteDocumentCache(),this.qr=e.getTargetCache(),this.Kr=e.getBundleCache(),this.os(r)}os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new z9(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ts))}}function tL(t,e,n,r){return new eL(t,e,n,r)}async function NC(t,e){const n=ce(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.os(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=pe();for(const u of i){o.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}for(const u of s){a.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}return n.localDocuments.getDocuments(r,l).next(u=>({_s:u,removedBatchIds:o,addedBatchIds:a}))})})}function nL(t,e){const n=ce(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.ss.newChangeBuffer({trackRemovals:!0});return function(a,l,u,c){const d=u.batch,h=d.keys();let f=L.resolve();return h.forEach(g=>{f=f.next(()=>c.getEntry(l,g)).next(w=>{const E=u.docVersions.get(g);$e(E!==null),w.version.compareTo(E)<0&&(d.applyToRemoteDocument(w,u),w.isValidDocument()&&(w.setReadTime(u.commitVersion),c.addEntry(w)))})}),f.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=pe();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function DC(t){const e=ce(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.qr.getLastRemoteSnapshotVersion(n))}function rL(t,e){const n=ce(t),r=e.snapshotVersion;let i=n.ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.ss.newChangeBuffer({trackRemovals:!0});i=n.ts;const a=[];e.targetChanges.forEach((c,d)=>{const h=i.get(d);if(!h)return;a.push(n.qr.removeMatchingKeys(s,c.removedDocuments,d).next(()=>n.qr.addMatchingKeys(s,c.addedDocuments,d)));let f=h.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?f=f.withResumeToken(Ht.EMPTY_BYTE_STRING,ae.min()).withLastLimboFreeSnapshotVersion(ae.min()):c.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(c.resumeToken,r)),i=i.insert(d,f),function(w,E,v){return w.resumeToken.approximateByteSize()===0||E.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=3e8?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(h,f,c)&&a.push(n.qr.updateTargetData(s,f))});let l=zr(),u=pe();if(e.documentUpdates.forEach(c=>{e.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,c))}),a.push(iL(s,o,e.documentUpdates).next(c=>{l=c.us,u=c.cs})),!r.isEqual(ae.min())){const c=n.qr.getLastRemoteSnapshotVersion(s).next(d=>n.qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(c)}return L.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(n.ts=i,s))}function iL(t,e,n){let r=pe(),i=pe();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=zr();return n.forEach((a,l)=>{const u=s.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(ae.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):H("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{us:o,cs:i}})}function sL(t,e){const n=ce(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function oL(t,e){const n=ce(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.qr.getTargetData(r,e).next(s=>s?(i=s,L.resolve(i)):n.qr.allocateTargetId(r).next(o=>(i=new mi(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.ts.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ts=n.ts.insert(r.targetId,r),n.ns.set(e,r.targetId)),r})}async function qg(t,e,n){const r=ce(t),i=r.ts.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!xu(o))throw o;H("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ts=r.ts.remove(e),r.ns.delete(i.target)}function Nw(t,e,n){const r=ce(t);let i=ae.min(),s=pe();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,c){const d=ce(l),h=d.ns.get(c);return h!==void 0?L.resolve(d.ts.get(h)):d.qr.getTargetData(u,c)}(r,o,ur(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.qr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.es.getDocumentsMatchingQuery(o,e,n?i:ae.min(),n?s:pe())).next(a=>(aL(r,JO(e),a),{documents:a,ls:s})))}function aL(t,e,n){let r=t.rs.get(e)||ae.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.rs.set(e,r)}class Dw{constructor(){this.activeTargetIds=i9()}ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}As(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Es(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class lL{constructor(){this.eo=new Dw,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.eo.ds(e),this.no[e]||"not-current"}updateQueryState(e,n,r){this.no[e]=n}removeLocalQueryTarget(e){this.eo.As(e)}isLocalQueryTarget(e){return this.eo.activeTargetIds.has(e)}clearQueryState(e){delete this.no[e]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(e){return this.eo.activeTargetIds.has(e)}start(){return this.eo=new Dw,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uL{ro(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ow{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(e){this.ao.push(e)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){H("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ao)e(0)}_o(){H("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ao)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mc=null;function Jp(){return mc===null?mc=function(){return 268435456+Math.round(2147483648*Math.random())}():mc++,"0x"+mc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hL{constructor(e){this.co=e.co,this.lo=e.lo}ho(e){this.Po=e}Io(e){this.To=e}onMessage(e){this.Eo=e}close(){this.lo()}send(e){this.co(e)}Ao(){this.Po()}Ro(e){this.To(e)}Vo(e){this.Eo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vt="WebChannelConnection";class dL extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.mo=r+"://"+n.host,this.fo=`projects/${i}/databases/${s}`,this.po=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get yo(){return!1}wo(n,r,i,s,o){const a=Jp(),l=this.So(n,r);H("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const u={"google-cloud-resource-prefix":this.fo,"x-goog-request-params":this.po};return this.bo(u,s,o),this.Do(n,l,u,i).then(c=>(H("RestConnection",`Received RPC '${n}' ${a}: `,c),c),c=>{throw Bo("RestConnection",`RPC '${n}' ${a} failed with error: `,c,"url: ",l,"request:",i),c})}Co(n,r,i,s,o,a){return this.wo(n,r,i,s,o)}bo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+la}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}So(n,r){const i=cL[n];return`${this.mo}/v1/${r}:${i}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Do(e,n,r,i){const s=Jp();return new Promise((o,a)=>{const l=new wO;l.setWithCredentials(!0),l.listenOnce(yO.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Xp.NO_ERROR:const c=l.getResponseJson();H(Vt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(c)),o(c);break;case Xp.TIMEOUT:H(Vt,`RPC '${e}' ${s} timed out`),a(new B(N.DEADLINE_EXCEEDED,"Request time out"));break;case Xp.HTTP_ERROR:const d=l.getStatus();if(H(Vt,`RPC '${e}' ${s} failed with status:`,d,"response text:",l.getResponseText()),d>0){let h=l.getResponseJson();Array.isArray(h)&&(h=h[0]);const f=h==null?void 0:h.error;if(f&&f.status&&f.message){const g=function(E){const v=E.toLowerCase().replace(/_/g,"-");return Object.values(N).indexOf(v)>=0?v:N.UNKNOWN}(f.status);a(new B(g,f.message))}else a(new B(N.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new B(N.UNAVAILABLE,"Connection failed."));break;default:re()}}finally{H(Vt,`RPC '${e}' ${s} completed.`)}});const u=JSON.stringify(i);H(Vt,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",u,r,15)})}vo(e,n,r){const i=Jp(),s=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=mO(),a=gO(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.xmlHttpFactory=new _O({})),this.bo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const c=s.join("");H(Vt,`Creating RPC '${e}' stream ${i}: ${c}`,l);const d=o.createWebChannel(c,l);let h=!1,f=!1;const g=new hL({co:E=>{f?H(Vt,`Not sending because RPC '${e}' stream ${i} is closed:`,E):(h||(H(Vt,`Opening RPC '${e}' stream ${i} transport.`),d.open(),h=!0),H(Vt,`RPC '${e}' stream ${i} sending:`,E),d.send(E))},lo:()=>d.close()}),w=(E,v,p)=>{E.listen(v,_=>{try{p(_)}catch(y){setTimeout(()=>{throw y},0)}})};return w(d,dc.EventType.OPEN,()=>{f||H(Vt,`RPC '${e}' stream ${i} transport opened.`)}),w(d,dc.EventType.CLOSE,()=>{f||(f=!0,H(Vt,`RPC '${e}' stream ${i} transport closed`),g.Ro())}),w(d,dc.EventType.ERROR,E=>{f||(f=!0,Bo(Vt,`RPC '${e}' stream ${i} transport errored:`,E),g.Ro(new B(N.UNAVAILABLE,"The operation could not be completed")))}),w(d,dc.EventType.MESSAGE,E=>{var v;if(!f){const p=E.data[0];$e(!!p);const _=p,y=_.error||((v=_[0])===null||v===void 0?void 0:v.error);if(y){H(Vt,`RPC '${e}' stream ${i} received error:`,y);const S=y.status;let C=function(O){const M=ct[O];if(M!==void 0)return SC(M)}(S),A=y.message;C===void 0&&(C=N.INTERNAL,A="Unknown error status: "+S+" with message "+y.message),f=!0,g.Ro(new B(C,A)),d.close()}else H(Vt,`RPC '${e}' stream ${i} received:`,p),g.Vo(p)}}),w(a,vO.STAT_EVENT,E=>{E.stat===cw.PROXY?H(Vt,`RPC '${e}' stream ${i} detected buffering proxy`):E.stat===cw.NOPROXY&&H(Vt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{g.Ao()},0),g}}function Zp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function df(t){return new S9(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(e,n,r=1e3,i=1.5,s=6e4){this.si=e,this.timerId=n,this.Fo=r,this.Mo=i,this.xo=s,this.Oo=0,this.No=null,this.Bo=Date.now(),this.reset()}reset(){this.Oo=0}Lo(){this.Oo=this.xo}ko(e){this.cancel();const n=Math.floor(this.Oo+this.qo()),r=Math.max(0,Date.now()-this.Bo),i=Math.max(0,n-r);i>0&&H("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Oo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.No=this.si.enqueueAfterDelay(this.timerId,i,()=>(this.Bo=Date.now(),e())),this.Oo*=this.Mo,this.Oo<this.Fo&&(this.Oo=this.Fo),this.Oo>this.xo&&(this.Oo=this.xo)}Qo(){this.No!==null&&(this.No.skipDelay(),this.No=null)}cancel(){this.No!==null&&(this.No.cancel(),this.No=null)}qo(){return(Math.random()-.5)*this.Oo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LC{constructor(e,n,r,i,s,o,a,l){this.si=e,this.Ko=r,this.$o=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Uo=0,this.Wo=null,this.Go=null,this.stream=null,this.zo=new OC(e,n)}jo(){return this.state===1||this.state===5||this.Ho()}Ho(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Jo()}async stop(){this.jo()&&await this.close(0)}Yo(){this.state=0,this.zo.reset()}Zo(){this.Ho()&&this.Wo===null&&(this.Wo=this.si.enqueueAfterDelay(this.Ko,6e4,()=>this.Xo()))}e_(e){this.t_(),this.stream.send(e)}async Xo(){if(this.Ho())return this.close(0)}t_(){this.Wo&&(this.Wo.cancel(),this.Wo=null)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}async close(e,n){this.t_(),this.n_(),this.zo.cancel(),this.Uo++,e!==4?this.zo.reset():n&&n.code===N.RESOURCE_EXHAUSTED?(Br(n.toString()),Br("Using maximum backoff delay to prevent overloading the backend."),this.zo.Lo()):n&&n.code===N.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.r_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Io(n)}r_(){}auth(){this.state=1;const e=this.i_(this.Uo),n=this.Uo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Uo===n&&this.s_(r,i)},r=>{e(()=>{const i=new B(N.UNKNOWN,"Fetching auth token failed: "+r.message);return this.o_(i)})})}s_(e,n){const r=this.i_(this.Uo);this.stream=this.__(e,n),this.stream.ho(()=>{r(()=>(this.state=2,this.Go=this.si.enqueueAfterDelay(this.$o,1e4,()=>(this.Ho()&&(this.state=3),Promise.resolve())),this.listener.ho()))}),this.stream.Io(i=>{r(()=>this.o_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Jo(){this.state=5,this.zo.ko(async()=>{this.state=0,this.start()})}o_(e){return H("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}i_(e){return n=>{this.si.enqueueAndForget(()=>this.Uo===e?n():(H("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class fL extends LC{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}__(e,n){return this.connection.vo("Listen",e,n)}onMessage(e){this.zo.reset();const n=C9(this.serializer,e),r=function(s){if(!("targetChange"in s))return ae.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ae.min():o.readTime?hr(o.readTime):ae.min()}(e);return this.listener.a_(n,r)}u_(e){const n={};n.database=Wg(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=jg(l)?{documents:A9(s,l)}:{query:P9(s,l)},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=CC(s,o.resumeToken);const u=Ug(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(ae.min())>0){a.readTime=Fh(s,o.snapshotVersion.toTimestamp());const u=Ug(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=N9(this.serializer,e);r&&(n.labels=r),this.e_(n)}c_(e){const n={};n.database=Wg(this.serializer),n.removeTarget=e,this.e_(n)}}class pL extends LC{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.l_=!1}get h_(){return this.l_}start(){this.l_=!1,this.lastStreamToken=void 0,super.start()}r_(){this.l_&&this.P_([])}__(e,n){return this.connection.vo("Write",e,n)}onMessage(e){if($e(!!e.streamToken),this.lastStreamToken=e.streamToken,this.l_){this.zo.reset();const n=x9(e.writeResults,e.commitTime),r=hr(e.commitTime);return this.listener.I_(r,n)}return $e(!e.writeResults||e.writeResults.length===0),this.l_=!0,this.listener.T_()}E_(){const e={};e.database=Wg(this.serializer),this.e_(e)}P_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>R9(this.serializer,r))};this.e_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mL extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.d_=!1}A_(){if(this.d_)throw new B(N.FAILED_PRECONDITION,"The client has already been terminated.")}wo(e,n,r){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.wo(e,n,r,i,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new B(N.UNKNOWN,i.toString())})}Co(e,n,r,i){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(e,n,r,s,o,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new B(N.UNKNOWN,s.toString())})}terminate(){this.d_=!0}}class gL{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.V_=0,this.m_=null,this.f_=!0}g_(){this.V_===0&&(this.p_("Unknown"),this.m_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.m_=null,this.y_("Backend didn't respond within 10 seconds."),this.p_("Offline"),Promise.resolve())))}w_(e){this.state==="Online"?this.p_("Unknown"):(this.V_++,this.V_>=1&&(this.S_(),this.y_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.p_("Offline")))}set(e){this.S_(),this.V_=0,e==="Online"&&(this.f_=!1),this.p_(e)}p_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}y_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.f_?(Br(n),this.f_=!1):H("OnlineStateTracker",n)}S_(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yL{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.b_=[],this.D_=new Map,this.C_=new Set,this.v_=[],this.F_=s,this.F_.ro(o=>{r.enqueueAndForget(async()=>{Vs(this)&&(H("RemoteStore","Restarting streams for network reachability change."),await async function(l){const u=ce(l);u.C_.add(4),await bu(u),u.M_.set("Unknown"),u.C_.delete(4),await ff(u)}(this))})}),this.M_=new gL(r,i)}}async function ff(t){if(Vs(t))for(const e of t.v_)await e(!0)}async function bu(t){for(const e of t.v_)await e(!1)}function MC(t,e){const n=ce(t);n.D_.has(e.targetId)||(n.D_.set(e.targetId,e),t_(n)?e_(n):ha(n).Ho()&&Zv(n,e))}function VC(t,e){const n=ce(t),r=ha(n);n.D_.delete(e),r.Ho()&&jC(n,e),n.D_.size===0&&(r.Ho()?r.Zo():Vs(n)&&n.M_.set("Unknown"))}function Zv(t,e){if(t.x_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ae.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ha(t).u_(e)}function jC(t,e){t.x_.Oe(e),ha(t).c_(e)}function e_(t){t.x_=new _9({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.D_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),ha(t).start(),t.M_.g_()}function t_(t){return Vs(t)&&!ha(t).jo()&&t.D_.size>0}function Vs(t){return ce(t).C_.size===0}function FC(t){t.x_=void 0}async function vL(t){t.D_.forEach((e,n)=>{Zv(t,e)})}async function _L(t,e){FC(t),t_(t)?(t.M_.w_(e),e_(t)):t.M_.set("Unknown")}async function wL(t,e,n){if(t.M_.set("Online"),e instanceof kC&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.D_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.D_.delete(a),i.x_.removeTarget(a))}(t,e)}catch(r){H("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await $h(t,r)}else if(e instanceof Vc?t.x_.$e(e):e instanceof IC?t.x_.Je(e):t.x_.Ge(e),!n.isEqual(ae.min()))try{const r=await DC(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.x_.it(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const c=s.D_.get(u);c&&s.D_.set(u,c.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{const c=s.D_.get(l);if(!c)return;s.D_.set(l,c.withResumeToken(Ht.EMPTY_BYTE_STRING,c.snapshotVersion)),jC(s,l);const d=new mi(c.target,l,u,c.sequenceNumber);Zv(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){H("RemoteStore","Failed to raise snapshot:",r),await $h(t,r)}}async function $h(t,e,n){if(!xu(e))throw e;t.C_.add(1),await bu(t),t.M_.set("Offline"),n||(n=()=>DC(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{H("RemoteStore","Retrying IndexedDB access"),await n(),t.C_.delete(1),await ff(t)})}function $C(t,e){return e().catch(n=>$h(t,n,e))}async function pf(t){const e=ce(t),n=Li(e);let r=e.b_.length>0?e.b_[e.b_.length-1].batchId:-1;for(;EL(e);)try{const i=await sL(e.localStore,r);if(i===null){e.b_.length===0&&n.Zo();break}r=i.batchId,TL(e,i)}catch(i){await $h(e,i)}UC(e)&&BC(e)}function EL(t){return Vs(t)&&t.b_.length<10}function TL(t,e){t.b_.push(e);const n=Li(t);n.Ho()&&n.h_&&n.P_(e.mutations)}function UC(t){return Vs(t)&&!Li(t).jo()&&t.b_.length>0}function BC(t){Li(t).start()}async function SL(t){Li(t).E_()}async function IL(t){const e=Li(t);for(const n of t.b_)e.P_(n.mutations)}async function kL(t,e,n){const r=t.b_.shift(),i=Gv.from(r,e,n);await $C(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await pf(t)}async function CL(t,e){e&&Li(t).h_&&await async function(r,i){if(function(o){return g9(o)&&o!==N.ABORTED}(i.code)){const s=r.b_.shift();Li(r).Yo(),await $C(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await pf(r)}}(t,e),UC(t)&&BC(t)}async function Lw(t,e){const n=ce(t);n.asyncQueue.verifyOperationInProgress(),H("RemoteStore","RemoteStore received new credentials");const r=Vs(n);n.C_.add(3),await bu(n),r&&n.M_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.C_.delete(3),await ff(n)}async function RL(t,e){const n=ce(t);e?(n.C_.delete(2),await ff(n)):e||(n.C_.add(2),await bu(n),n.M_.set("Unknown"))}function ha(t){return t.O_||(t.O_=function(n,r,i){const s=ce(n);return s.A_(),new fL(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{ho:vL.bind(null,t),Io:_L.bind(null,t),a_:wL.bind(null,t)}),t.v_.push(async e=>{e?(t.O_.Yo(),t_(t)?e_(t):t.M_.set("Unknown")):(await t.O_.stop(),FC(t))})),t.O_}function Li(t){return t.N_||(t.N_=function(n,r,i){const s=ce(n);return s.A_(),new pL(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{ho:SL.bind(null,t),Io:CL.bind(null,t),T_:IL.bind(null,t),I_:kL.bind(null,t)}),t.v_.push(async e=>{e?(t.N_.Yo(),await pf(t)):(await t.N_.stop(),t.b_.length>0&&(H("RemoteStore",`Stopping write stream with ${t.b_.length} pending writes`),t.b_=[]))})),t.N_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n_{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Mr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new n_(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new B(N.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function r_(t,e){if(Br("AsyncQueue",`${e}: ${t}`),xu(t))return new B(N.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(e){this.comparator=e?(n,r)=>e(n,r)||Y.comparator(n.key,r.key):(n,r)=>Y.comparator(n.key,r.key),this.keyedMap=za(),this.sortedSet=new Xe(this.comparator)}static emptySet(e){return new Ro(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ro)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ro;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mw{constructor(){this.B_=new Xe(Y.comparator)}track(e){const n=e.doc.key,r=this.B_.get(n);r?e.type!==0&&r.type===3?this.B_=this.B_.insert(n,e):e.type===3&&r.type!==1?this.B_=this.B_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.B_=this.B_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.B_=this.B_.remove(n):e.type===1&&r.type===2?this.B_=this.B_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):re():this.B_=this.B_.insert(n,e)}L_(){const e=[];return this.B_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Qo{constructor(e,n,r,i,s,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Qo(e,n,Ro.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&af(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xL{constructor(){this.k_=void 0,this.listeners=[]}}class AL{constructor(){this.queries=new ca(e=>lC(e),af),this.onlineState="Unknown",this.q_=new Set}}async function zC(t,e){const n=ce(t),r=e.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new xL),i)try{s.k_=await n.onListen(r)}catch(o){const a=r_(o,`Initialization of query '${Qs(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,s),s.listeners.push(e),e.Q_(n.onlineState),s.k_&&e.K_(s.k_)&&i_(n)}async function WC(t,e){const n=ce(t),r=e.query;let i=!1;const s=n.queries.get(r);if(s){const o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),i=s.listeners.length===0)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function PL(t,e){const n=ce(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.listeners)a.K_(i)&&(r=!0);o.k_=i}}r&&i_(n)}function bL(t,e,n){const r=ce(t),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(e)}function i_(t){t.q_.forEach(e=>{e.next()})}class qC{constructor(e,n,r){this.query=e,this.U_=n,this.W_=!1,this.G_=null,this.onlineState="Unknown",this.options=r||{}}K_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Qo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.W_?this.z_(e)&&(this.U_.next(e),n=!0):this.j_(e,this.onlineState)&&(this.H_(e),n=!0),this.G_=e,n}onError(e){this.U_.error(e)}Q_(e){this.onlineState=e;let n=!1;return this.G_&&!this.W_&&this.j_(this.G_,e)&&(this.H_(this.G_),n=!0),n}j_(e,n){if(!e.fromCache)return!0;const r=n!=="Offline";return(!this.options.J_||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}z_(e){if(e.docChanges.length>0)return!0;const n=this.G_&&this.G_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}H_(e){e=Qo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.W_=!0,this.U_.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{constructor(e){this.key=e}}class GC{constructor(e){this.key=e}}class NL{constructor(e,n){this.query=e,this.ia=n,this.sa=null,this.hasCachedResults=!1,this.current=!1,this.oa=pe(),this.mutatedKeys=pe(),this._a=uC(e),this.aa=new Ro(this._a)}get ua(){return this.ia}ca(e,n){const r=n?n.la:new Mw,i=n?n.aa:this.aa;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((c,d)=>{const h=i.get(c),f=lf(this.query,d)?d:null,g=!!h&&this.mutatedKeys.has(h.key),w=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let E=!1;h&&f?h.data.isEqual(f.data)?g!==w&&(r.track({type:3,doc:f}),E=!0):this.ha(h,f)||(r.track({type:2,doc:f}),E=!0,(l&&this._a(f,l)>0||u&&this._a(f,u)<0)&&(a=!0)):!h&&f?(r.track({type:0,doc:f}),E=!0):h&&!f&&(r.track({type:1,doc:h}),E=!0,(l||u)&&(a=!0)),E&&(f?(o=o.add(f),s=w?s.add(c):s.delete(c)):(o=o.delete(c),s=s.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),s=s.delete(c.key),r.track({type:1,doc:c})}return{aa:o,la:r,Zi:a,mutatedKeys:s}}ha(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){const i=this.aa;this.aa=e.aa,this.mutatedKeys=e.mutatedKeys;const s=e.la.L_();s.sort((u,c)=>function(h,f){const g=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return re()}};return g(h)-g(f)}(u.type,c.type)||this._a(u.doc,c.doc)),this.Pa(r);const o=n?this.Ia():[],a=this.oa.size===0&&this.current?1:0,l=a!==this.sa;return this.sa=a,s.length!==0||l?{snapshot:new Qo(this.query,e.aa,i,s,e.mutatedKeys,a===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ta:o}:{Ta:o}}Q_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({aa:this.aa,la:new Mw,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{Ta:[]}}Ea(e){return!this.ia.has(e)&&!!this.aa.has(e)&&!this.aa.get(e).hasLocalMutations}Pa(e){e&&(e.addedDocuments.forEach(n=>this.ia=this.ia.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ia=this.ia.delete(n)),this.current=e.current)}Ia(){if(!this.current)return[];const e=this.oa;this.oa=pe(),this.aa.forEach(r=>{this.Ea(r.key)&&(this.oa=this.oa.add(r.key))});const n=[];return e.forEach(r=>{this.oa.has(r)||n.push(new GC(r))}),this.oa.forEach(r=>{e.has(r)||n.push(new HC(r))}),n}da(e){this.ia=e.ls,this.oa=pe();const n=this.ca(e.documents);return this.applyChanges(n,!0)}Aa(){return Qo.fromInitialDocuments(this.query,this.aa,this.mutatedKeys,this.sa===0,this.hasCachedResults)}}class DL{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class OL{constructor(e){this.key=e,this.Ra=!1}}class LL{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Va={},this.ma=new ca(a=>lC(a),af),this.fa=new Map,this.ga=new Set,this.pa=new Xe(Y.comparator),this.ya=new Map,this.wa=new Xv,this.Sa={},this.ba=new Map,this.Da=Ko.Nn(),this.onlineState="Unknown",this.Ca=void 0}get isPrimaryClient(){return this.Ca===!0}}async function ML(t,e){const n=HL(t);let r,i;const s=n.ma.get(e);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Aa();else{const o=await oL(n.localStore,ur(e)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=await VL(n,e,r,a==="current",o.resumeToken),n.isPrimaryClient&&MC(n.remoteStore,o)}return i}async function VL(t,e,n,r,i){t.va=(d,h,f)=>async function(w,E,v,p){let _=E.view.ca(v);_.Zi&&(_=await Nw(w.localStore,E.query,!1).then(({documents:C})=>E.view.ca(C,_)));const y=p&&p.targetChanges.get(E.targetId),S=E.view.applyChanges(_,w.isPrimaryClient,y);return jw(w,E.targetId,S.Ta),S.snapshot}(t,d,h,f);const s=await Nw(t.localStore,e,!0),o=new NL(e,s.ls),a=o.ca(s.documents),l=Pu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=o.applyChanges(a,t.isPrimaryClient,l);jw(t,n,u.Ta);const c=new DL(e,n,o);return t.ma.set(e,c),t.fa.has(n)?t.fa.get(n).push(e):t.fa.set(n,[e]),u.snapshot}async function jL(t,e){const n=ce(t),r=n.ma.get(e),i=n.fa.get(r.targetId);if(i.length>1)return n.fa.set(r.targetId,i.filter(s=>!af(s,e))),void n.ma.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await qg(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),VC(n.remoteStore,r.targetId),Hg(n,r.targetId)}).catch(Ru)):(Hg(n,r.targetId),await qg(n.localStore,r.targetId,!0))}async function FL(t,e,n){const r=GL(t);try{const i=await function(o,a){const l=ce(o),u=at.now(),c=a.reduce((f,g)=>f.add(g.key),pe());let d,h;return l.persistence.runTransaction("Locally write mutations","readwrite",f=>{let g=zr(),w=pe();return l.ss.getEntries(f,c).next(E=>{g=E,g.forEach((v,p)=>{p.isValidDocument()||(w=w.add(v))})}).next(()=>l.localDocuments.getOverlayedDocuments(f,g)).next(E=>{d=E;const v=[];for(const p of a){const _=h9(p,d.get(p.key).overlayedDocument);_!=null&&v.push(new qi(p.key,_,eC(_.value.mapValue),cr.exists(!0)))}return l.mutationQueue.addMutationBatch(f,u,v,a)}).next(E=>{h=E;const v=E.applyToLocalDocumentSet(d,w);return l.documentOverlayCache.saveOverlays(f,E.batchId,v)})}).then(()=>({batchId:h.batchId,changes:hC(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let u=o.Sa[o.currentUser.toKey()];u||(u=new Xe(Te)),u=u.insert(a,l),o.Sa[o.currentUser.toKey()]=u}(r,i.batchId,n),await Nu(r,i.changes),await pf(r.remoteStore)}catch(i){const s=r_(i,"Failed to persist write");n.reject(s)}}async function KC(t,e){const n=ce(t);try{const r=await rL(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.ya.get(s);o&&($e(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.Ra=!0:i.modifiedDocuments.size>0?$e(o.Ra):i.removedDocuments.size>0&&($e(o.Ra),o.Ra=!1))}),await Nu(n,r,e)}catch(r){await Ru(r)}}function Vw(t,e,n){const r=ce(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.ma.forEach((s,o)=>{const a=o.view.Q_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=ce(o);l.onlineState=a;let u=!1;l.queries.forEach((c,d)=>{for(const h of d.listeners)h.Q_(a)&&(u=!0)}),u&&i_(l)}(r.eventManager,e),i.length&&r.Va.a_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function $L(t,e,n){const r=ce(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.ya.get(e),s=i&&i.key;if(s){let o=new Xe(Y.comparator);o=o.insert(s,Ut.newNoDocument(s,ae.min()));const a=pe().add(s),l=new hf(ae.min(),new Map,new Xe(Te),o,a);await KC(r,l),r.pa=r.pa.remove(s),r.ya.delete(e),s_(r)}else await qg(r.localStore,e,!1).then(()=>Hg(r,e,n)).catch(Ru)}async function UL(t,e){const n=ce(t),r=e.batch.batchId;try{const i=await nL(n.localStore,e);XC(n,r,null),QC(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Nu(n,i)}catch(i){await Ru(i)}}async function BL(t,e,n){const r=ce(t);try{const i=await function(o,a){const l=ce(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let c;return l.mutationQueue.lookupMutationBatch(u,a).next(d=>($e(d!==null),c=d.keys(),l.mutationQueue.removeMutationBatch(u,d))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,c,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,c)).next(()=>l.localDocuments.getDocuments(u,c))})}(r.localStore,e);XC(r,e,n),QC(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Nu(r,i)}catch(i){await Ru(i)}}function QC(t,e){(t.ba.get(e)||[]).forEach(n=>{n.resolve()}),t.ba.delete(e)}function XC(t,e,n){const r=ce(t);let i=r.Sa[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Sa[r.currentUser.toKey()]=i}}function Hg(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.fa.get(e))t.ma.delete(r),n&&t.Va.Fa(r,n);t.fa.delete(e),t.isPrimaryClient&&t.wa.Rr(e).forEach(r=>{t.wa.containsKey(r)||YC(t,r)})}function YC(t,e){t.ga.delete(e.path.canonicalString());const n=t.pa.get(e);n!==null&&(VC(t.remoteStore,n),t.pa=t.pa.remove(e),t.ya.delete(n),s_(t))}function jw(t,e,n){for(const r of n)r instanceof HC?(t.wa.addReference(r.key,e),zL(t,r)):r instanceof GC?(H("SyncEngine","Document no longer in limbo: "+r.key),t.wa.removeReference(r.key,e),t.wa.containsKey(r.key)||YC(t,r.key)):re()}function zL(t,e){const n=e.key,r=n.path.canonicalString();t.pa.get(n)||t.ga.has(r)||(H("SyncEngine","New document in limbo: "+n),t.ga.add(r),s_(t))}function s_(t){for(;t.ga.size>0&&t.pa.size<t.maxConcurrentLimboResolutions;){const e=t.ga.values().next().value;t.ga.delete(e);const n=new Y(je.fromString(e)),r=t.Da.next();t.ya.set(r,new OL(n)),t.pa=t.pa.insert(n,r),MC(t.remoteStore,new mi(ur(Hv(n.path)),r,"TargetPurposeLimboResolution",$v._e))}}async function Nu(t,e,n){const r=ce(t),i=[],s=[],o=[];r.ma.isEmpty()||(r.ma.forEach((a,l)=>{o.push(r.va(l,e,n).then(u=>{if((u||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,u!=null&&u.fromCache?"not-current":"current"),u){i.push(u);const c=Jv.Qi(l.targetId,u);s.push(c)}}))}),await Promise.all(o),r.Va.a_(i),await async function(l,u){const c=ce(l);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>L.forEach(u,h=>L.forEach(h.ki,f=>c.persistence.referenceDelegate.addReference(d,h.targetId,f)).next(()=>L.forEach(h.qi,f=>c.persistence.referenceDelegate.removeReference(d,h.targetId,f)))))}catch(d){if(!xu(d))throw d;H("LocalStore","Failed to update sequence numbers: "+d)}for(const d of u){const h=d.targetId;if(!d.fromCache){const f=c.ts.get(h),g=f.snapshotVersion,w=f.withLastLimboFreeSnapshotVersion(g);c.ts=c.ts.insert(h,w)}}}(r.localStore,s))}async function WL(t,e){const n=ce(t);if(!n.currentUser.isEqual(e)){H("SyncEngine","User change. New user:",e.toKey());const r=await NC(n.localStore,e);n.currentUser=e,function(s,o){s.ba.forEach(a=>{a.forEach(l=>{l.reject(new B(N.CANCELLED,o))})}),s.ba.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Nu(n,r._s)}}function qL(t,e){const n=ce(t),r=n.ya.get(e);if(r&&r.Ra)return pe().add(r.key);{let i=pe();const s=n.fa.get(e);if(!s)return i;for(const o of s){const a=n.ma.get(o);i=i.unionWith(a.view.ua)}return i}}function HL(t){const e=ce(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=KC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=qL.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=$L.bind(null,e),e.Va.a_=PL.bind(null,e.eventManager),e.Va.Fa=bL.bind(null,e.eventManager),e}function GL(t){const e=ce(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=UL.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=BL.bind(null,e),e}class Fw{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=df(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return tL(this.persistence,new Z9,e.initialUser,this.serializer)}createPersistence(e){return new X9(Yv.jr,this.serializer)}createSharedClientState(e){return new lL}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class KL{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Vw(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=WL.bind(null,this.syncEngine),await RL(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new AL}()}createDatastore(e){const n=df(e.databaseInfo.databaseId),r=function(s){return new dL(s)}(e.databaseInfo);return function(s,o,a,l){return new mL(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new yL(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>Vw(this.syncEngine,n,0),function(){return Ow.D()?new Ow:new uL}())}createSyncEngine(e,n){return function(i,s,o,a,l,u,c){const d=new LL(i,s,o,a,l,u);return c&&(d.Ca=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(n){const r=ce(n);H("RemoteStore","RemoteStore shutting down."),r.C_.add(5),await bu(r),r.F_.shutdown(),r.M_.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Oa(this.observer.next,e)}error(e){this.observer.error?this.Oa(this.observer.error,e):Br("Uncaught Error in snapshot listener:",e.toString())}Na(){this.muted=!0}Oa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QL{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ft.UNAUTHENTICATED,this.clientId=Yk.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{H("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(H("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new B(N.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Mr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=r_(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function em(t,e){t.asyncQueue.verifyOperationInProgress(),H("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await NC(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function $w(t,e){t.asyncQueue.verifyOperationInProgress();const n=await YL(t);H("FirestoreClient","Initializing OnlineComponentProvider");const r=await t.getConfiguration();await e.initialize(n,r),t.setCredentialChangeListener(i=>Lw(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>Lw(e.remoteStore,s)),t._onlineComponents=e}function XL(t){return t.name==="FirebaseError"?t.code===N.FAILED_PRECONDITION||t.code===N.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function YL(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){H("FirestoreClient","Using user provided OfflineComponentProvider");try{await em(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!XL(n))throw n;Bo("Error using user provided cache. Falling back to memory cache: "+n),await em(t,new Fw)}}else H("FirestoreClient","Using default OfflineComponentProvider"),await em(t,new Fw);return t._offlineComponents}async function ZC(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(H("FirestoreClient","Using user provided OnlineComponentProvider"),await $w(t,t._uninitializedComponentsProvider._online)):(H("FirestoreClient","Using default OnlineComponentProvider"),await $w(t,new KL))),t._onlineComponents}function JL(t){return ZC(t).then(e=>e.syncEngine)}async function eR(t){const e=await ZC(t),n=e.eventManager;return n.onListen=ML.bind(null,e.syncEngine),n.onUnlisten=jL.bind(null,e.syncEngine),n}function ZL(t,e,n={}){const r=new Mr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const c=new JC({next:h=>{o.enqueueAndForget(()=>WC(s,d));const f=h.docs.has(a);!f&&h.fromCache?u.reject(new B(N.UNAVAILABLE,"Failed to get document because the client is offline.")):f&&h.fromCache&&l&&l.source==="server"?u.reject(new B(N.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(h)},error:h=>u.reject(h)}),d=new qC(Hv(a.path),c,{includeMetadataChanges:!0,J_:!0});return zC(s,d)}(await eR(t),t.asyncQueue,e,n,r)),r.promise}function e3(t,e,n={}){const r=new Mr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const c=new JC({next:h=>{o.enqueueAndForget(()=>WC(s,d)),h.fromCache&&l.source==="server"?u.reject(new B(N.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(h)},error:h=>u.reject(h)}),d=new qC(a,c,{includeMetadataChanges:!0,J_:!0});return zC(s,d)}(await eR(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tR(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uw=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nR(t,e,n){if(!n)throw new B(N.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function t3(t,e,n,r){if(e===!0&&r===!0)throw new B(N.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Bw(t){if(!Y.isDocumentKey(t))throw new B(N.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function zw(t){if(Y.isDocumentKey(t))throw new B(N.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function mf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":re()}function Wr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new B(N.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=mf(t);throw new B(N.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ww{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new B(N.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new B(N.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}t3("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=tR((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new B(N.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new B(N.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new B(N.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class gf{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ww({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new B(N.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new B(N.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ww(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new TO;switch(r.type){case"firstParty":return new CO(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new B(N.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Uw.get(n);r&&(H("ComponentProvider","Removing Datastore"),Uw.delete(n),r.terminate())}(this),Promise.resolve()}}function n3(t,e,n,r={}){var i;const s=(t=Wr(t,gf))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Bo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=Ft.MOCK_USER;else{a=BI(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new B(N.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Ft(u)}t._authCredentials=new SO(new Xk(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new js(this.firestore,e,this._query)}}class en{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ri(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new en(this.firestore,e,this._key)}}class Ri extends js{constructor(e,n,r){super(e,n,Hv(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new en(this.firestore,null,new Y(e))}withConverter(e){return new Ri(this.firestore,e,this._path)}}function rR(t,e,...n){if(t=lt(t),nR("collection","path",e),t instanceof gf){const r=je.fromString(e,...n);return zw(r),new Ri(t,null,r)}{if(!(t instanceof en||t instanceof Ri))throw new B(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(je.fromString(e,...n));return zw(r),new Ri(t.firestore,null,r)}}function ks(t,e,...n){if(t=lt(t),arguments.length===1&&(e=Yk.newId()),nR("doc","path",e),t instanceof gf){const r=je.fromString(e,...n);return Bw(r),new en(t,null,new Y(r))}{if(!(t instanceof en||t instanceof Ri))throw new B(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(je.fromString(e,...n));return Bw(r),new en(t.firestore,t instanceof Ri?t.converter:null,new Y(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r3{constructor(){this.Ja=Promise.resolve(),this.Ya=[],this.Za=!1,this.Xa=[],this.eu=null,this.tu=!1,this.nu=!1,this.ru=[],this.zo=new OC(this,"async_queue_retry"),this.iu=()=>{const n=Zp();n&&H("AsyncQueue","Visibility state changed to "+n.visibilityState),this.zo.Qo()};const e=Zp();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.iu)}get isShuttingDown(){return this.Za}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.su(),this.ou(e)}enterRestrictedMode(e){if(!this.Za){this.Za=!0,this.nu=e||!1;const n=Zp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.iu)}}enqueue(e){if(this.su(),this.Za)return new Promise(()=>{});const n=new Mr;return this.ou(()=>this.Za&&this.nu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ya.push(e),this._u()))}async _u(){if(this.Ya.length!==0){try{await this.Ya[0](),this.Ya.shift(),this.zo.reset()}catch(e){if(!xu(e))throw e;H("AsyncQueue","Operation failed with retryable error: "+e)}this.Ya.length>0&&this.zo.ko(()=>this._u())}}ou(e){const n=this.Ja.then(()=>(this.tu=!0,e().catch(r=>{this.eu=r,this.tu=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Br("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.tu=!1,r))));return this.Ja=n,n}enqueueAfterDelay(e,n,r){this.su(),this.ru.indexOf(e)>-1&&(n=0);const i=n_.createAndSchedule(this,e,n,r,s=>this.au(s));return this.Xa.push(i),i}su(){this.eu&&re()}verifyOperationInProgress(){}async uu(){let e;do e=this.Ja,await e;while(e!==this.Ja)}cu(e){for(const n of this.Xa)if(n.timerId===e)return!0;return!1}lu(e){return this.uu().then(()=>{this.Xa.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Xa)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.uu()})}hu(e){this.ru.push(e)}au(e){const n=this.Xa.indexOf(e);this.Xa.splice(n,1)}}class Du extends gf{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new r3}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||iR(this),this._firestoreClient.terminate()}}function i3(t,e){const n=typeof t=="object"?t:gv(),r=typeof t=="string"?t:e||"(default)",i=zd(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=FI("firestore");s&&n3(i,...s)}return i}function o_(t){return t._firestoreClient||iR(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function iR(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,u,c){return new jO(a,l,u,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,tR(c.experimentalLongPollingOptions),c.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new QL(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Xo(Ht.fromBase64String(e))}catch(n){throw new B(N.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Xo(Ht.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new B(N.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Pt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ou{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a_{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new B(N.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new B(N.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Te(this._lat,e._lat)||Te(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s3=/^__.*__$/;class o3{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new qi(e,this.data,this.fieldMask,n,this.fieldTransforms):new Au(e,this.data,n,this.fieldTransforms)}}class sR{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new qi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function oR(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw re()}}class vf{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Pu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Iu(){return this.settings.Iu}Tu(e){return new vf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Eu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Tu({path:r,du:!1});return i.Au(e),i}Ru(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Tu({path:r,du:!1});return i.Pu(),i}Vu(e){return this.Tu({path:void 0,du:!0})}mu(e){return Uh(e,this.settings.methodName,this.settings.fu||!1,this.path,this.settings.gu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Pu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Au(this.path.get(e))}Au(e){if(e.length===0)throw this.mu("Document fields must not be empty");if(oR(this.Iu)&&s3.test(e))throw this.mu('Document fields cannot begin and end with "__"')}}class a3{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||df(e)}pu(e,n,r,i=!1){return new vf({Iu:e,methodName:n,gu:r,path:Pt.emptyPath(),du:!1,fu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function l_(t){const e=t._freezeSettings(),n=df(t._databaseId);return new a3(t._databaseId,!!e.ignoreUndefinedProperties,n)}function l3(t,e,n,r,i,s={}){const o=t.pu(s.merge||s.mergeFields?2:0,e,n,i);u_("Data must be an object, but it was:",o,r);const a=lR(r,o);let l,u;if(s.merge)l=new fn(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const c=[];for(const d of s.mergeFields){const h=Gg(e,d,n);if(!o.contains(h))throw new B(N.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);cR(c,h)||c.push(h)}l=new fn(c),u=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,u=o.fieldTransforms;return new o3(new sn(a),l,u)}class _f extends Ou{_toFieldTransform(e){if(e.Iu!==2)throw e.Iu===1?e.mu(`${this._methodName}() can only appear at the top level of your update data`):e.mu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof _f}}function aR(t,e,n){return new vf({Iu:3,gu:e.settings.gu,methodName:t._methodName,du:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class u3 extends Ou{constructor(e,n){super(e),this.yu=n}_toFieldTransform(e){const n=aR(this,e,!0),r=this.yu.map(s=>Fs(s,n)),i=new Ho(r);return new _C(e.path,i)}isEqual(e){return this===e}}class c3 extends Ou{constructor(e,n){super(e),this.yu=n}_toFieldTransform(e){const n=aR(this,e,!0),r=this.yu.map(s=>Fs(s,n)),i=new Go(r);return new _C(e.path,i)}isEqual(e){return this===e}}function h3(t,e,n,r){const i=t.pu(1,e,n);u_("Data must be an object, but it was:",i,r);const s=[],o=sn.empty();Ms(r,(l,u)=>{const c=c_(e,l,n);u=lt(u);const d=i.Ru(c);if(u instanceof _f)s.push(c);else{const h=Fs(u,d);h!=null&&(s.push(c),o.set(c,h))}});const a=new fn(s);return new sR(o,a,i.fieldTransforms)}function d3(t,e,n,r,i,s){const o=t.pu(1,e,n),a=[Gg(e,r,n)],l=[i];if(s.length%2!=0)throw new B(N.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<s.length;h+=2)a.push(Gg(e,s[h])),l.push(s[h+1]);const u=[],c=sn.empty();for(let h=a.length-1;h>=0;--h)if(!cR(u,a[h])){const f=a[h];let g=l[h];g=lt(g);const w=o.Ru(f);if(g instanceof _f)u.push(f);else{const E=Fs(g,w);E!=null&&(u.push(f),c.set(f,E))}}const d=new fn(u);return new sR(c,d,o.fieldTransforms)}function f3(t,e,n,r=!1){return Fs(n,t.pu(r?4:3,e))}function Fs(t,e){if(uR(t=lt(t)))return u_("Unsupported field value:",e,t),lR(t,e);if(t instanceof Ou)return function(r,i){if(!oR(i.Iu))throw i.mu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.mu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.du&&e.Iu!==4)throw e.mu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=Fs(a,i.Vu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=lt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return s9(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=at.fromDate(r);return{timestampValue:Fh(i.serializer,s)}}if(r instanceof at){const s=new at(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Fh(i.serializer,s)}}if(r instanceof a_)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Xo)return{bytesValue:CC(i.serializer,r._byteString)};if(r instanceof en){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.mu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Qv(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.mu(`Unsupported field value: ${mf(r)}`)}(t,e)}function lR(t,e){const n={};return Jk(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ms(t,(r,i)=>{const s=Fs(i,e.Eu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function uR(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof at||t instanceof a_||t instanceof Xo||t instanceof en||t instanceof Ou)}function u_(t,e,n){if(!uR(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=mf(n);throw r==="an object"?e.mu(t+" a custom object"):e.mu(t+" "+r)}}function Gg(t,e,n){if((e=lt(e))instanceof yf)return e._internalPath;if(typeof e=="string")return c_(t,e);throw Uh("Field path arguments must be of type string or ",t,!1,void 0,n)}const p3=new RegExp("[~\\*/\\[\\]]");function c_(t,e,n){if(e.search(p3)>=0)throw Uh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new yf(...e.split("."))._internalPath}catch{throw Uh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Uh(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new B(N.INVALID_ARGUMENT,a+t+l)}function cR(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hR{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new en(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new m3(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(wf("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class m3 extends hR{data(){return super.data()}}function wf(t,e){return typeof e=="string"?c_(t,e):e instanceof yf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g3(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new B(N.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class h_{}class dR extends h_{}function fR(t,e,...n){let r=[];e instanceof h_&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof d_).length,a=s.filter(l=>l instanceof Ef).length;if(o>1||o>0&&a>0)throw new B(N.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Ef extends dR{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Ef(e,n,r)}_apply(e){const n=this._parse(e);return mR(e._query,n),new js(e.firestore,e.converter,Fg(e._query,n))}_parse(e){const n=l_(e.firestore);return function(s,o,a,l,u,c,d){let h;if(u.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new B(N.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){Hw(d,c);const f=[];for(const g of d)f.push(qw(l,s,g));h={arrayValue:{values:f}}}else h=qw(l,s,d)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||Hw(d,c),h=f3(a,o,d,c==="in"||c==="not-in");return pt.create(u,c,h)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function y3(t,e,n){const r=e,i=wf("where",t);return Ef._create(i,r,n)}class d_ extends h_{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new d_(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Kn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)mR(o,l),o=Fg(o,l)}(e._query,n),new js(e.firestore,e.converter,Fg(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class f_ extends dR{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new f_(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new B(N.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new B(N.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Kl(s,o)}(e._query,this._field,this._direction);return new js(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new ua(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function pR(t,e="asc"){const n=e,r=wf("orderBy",t);return f_._create(r,n)}function qw(t,e,n){if(typeof(n=lt(n))=="string"){if(n==="")throw new B(N.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!aC(e)&&n.indexOf("/")!==-1)throw new B(N.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(je.fromString(n));if(!Y.isDocumentKey(r))throw new B(N.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return mw(t,new Y(r))}if(n instanceof en)return mw(t,n._key);throw new B(N.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${mf(n)}.`)}function Hw(t,e){if(!Array.isArray(t)||t.length===0)throw new B(N.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function mR(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new B(N.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new B(N.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class v3{convertValue(e,n="none"){switch(Is(e)){case 0:return null;case 1:return e.booleanValue;case 2:return dt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ss(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw re()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ms(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new a_(dt(e.latitude),dt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Bv(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ql(e));default:return null}}convertTimestamp(e){const n=Oi(e);return new at(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=je.fromString(e);$e(bC(r));const i=new Hl(r.get(1),r.get(3)),s=new Y(r.popFirst(5));return i.isEqual(n)||Br(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _3(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class gR extends hR{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new jc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(wf("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class jc extends gR{data(e={}){return super.data(e)}}class w3{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new qa(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new jc(this._firestore,this._userDataWriter,r.key,r,new qa(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new B(N.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new jc(i._firestore,i._userDataWriter,a.doc.key,a.doc,new qa(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new jc(i._firestore,i._userDataWriter,a.doc.key,a.doc,new qa(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,c=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),c=o.indexOf(a.doc.key)),{type:E3(a.type),doc:l,oldIndex:u,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function E3(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return re()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yR(t){t=Wr(t,en);const e=Wr(t.firestore,Du);return ZL(o_(e),t._key).then(n=>T3(e,t,n))}class vR extends v3{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xo(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new en(this.firestore,null,n)}}function _R(t){t=Wr(t,js);const e=Wr(t.firestore,Du),n=o_(e),r=new vR(e);return g3(t._query),e3(n,t._query).then(i=>new w3(e,r,t,i))}function p_(t,e,n){t=Wr(t,en);const r=Wr(t.firestore,Du),i=_3(t.converter,e,n);return wR(r,[l3(l_(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,cr.none())])}function Kg(t,e,n,...r){t=Wr(t,en);const i=Wr(t.firestore,Du),s=l_(i);let o;return o=typeof(e=lt(e))=="string"||e instanceof yf?d3(s,"updateDoc",t._key,e,n,r):h3(s,"updateDoc",t._key,e),wR(i,[o.toMutation(t._key,cr.exists(!0))])}function wR(t,e){return function(r,i){const s=new Mr;return r.asyncQueue.enqueueAndForget(async()=>FL(await JL(r),i,s)),s.promise}(o_(t),e)}function T3(t,e,n){const r=n.docs.get(e._key),i=new vR(t);return new gR(t,i,e._key,r,new qa(n.hasPendingWrites,n.fromCache),e.converter)}function S3(...t){return new u3("arrayUnion",t)}function I3(...t){return new c3("arrayRemove",t)}(function(e,n=!0){(function(i){la=i})(Os),Es(new Ni("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Du(new IO(r.getProvider("auth-internal")),new xO(r.getProvider("app-check-internal")),function(u,c){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new B(N.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Hl(u.options.projectId,c)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),lr(hw,"4.3.2",e),lr(hw,"4.3.2","esm2017")})();var k3="firebase",C3="10.5.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */lr(k3,C3,"app");function m_(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function ER(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const R3=ER,TR=new gu("auth","Firebase",ER());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bh=new pv("@firebase/auth");function x3(t,...e){Bh.logLevel<=ge.WARN&&Bh.warn(`Auth (${Os}): ${t}`,...e)}function Fc(t,...e){Bh.logLevel<=ge.ERROR&&Bh.error(`Auth (${Os}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qn(t,...e){throw g_(t,...e)}function dr(t,...e){return g_(t,...e)}function A3(t,e,n){const r=Object.assign(Object.assign({},R3()),{[e]:n});return new gu("auth","Firebase",r).create(e,{appName:t.name})}function g_(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return TR.create(t,...e)}function ne(t,e,...n){if(!t)throw g_(e,...n)}function Nr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Fc(e),new Error(e)}function qr(t,e){t||Nr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qg(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function P3(){return Gw()==="http:"||Gw()==="https:"}function Gw(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b3(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(P3()||J4()||"connection"in navigator)?navigator.onLine:!0}function N3(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu{constructor(e,n){this.shortDelay=e,this.longDelay=n,qr(n>e,"Short delay should be less than long delay!"),this.isMobile=X4()||Z4()}get(){return b3()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y_(t,e){qr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SR{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Nr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Nr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Nr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D3={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O3=new Lu(3e4,6e4);function $s(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Us(t,e,n,r,i={}){return IR(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=yu(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),SR.fetch()(kR(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},s))})}async function IR(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},D3),e);try{const i=new M3(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw gc(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw gc(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw gc(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw gc(t,"user-disabled",o);const c=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw A3(t,c,u);Qn(t,c)}}catch(i){if(i instanceof yr)throw i;Qn(t,"network-request-failed",{message:String(i)})}}async function Mu(t,e,n,r,i={}){const s=await Us(t,e,n,r,i);return"mfaPendingCredential"in s&&Qn(t,"multi-factor-auth-required",{_serverResponse:s}),s}function kR(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?y_(t.config,i):`${t.config.apiScheme}://${i}`}function L3(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class M3{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(dr(this.auth,"network-request-failed")),O3.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function gc(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=dr(t,e,r);return i.customData._tokenResponse=n,i}function Kw(t){return t!==void 0&&t.enterprise!==void 0}class V3{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return L3(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function j3(t,e){return Us(t,"GET","/v2/recaptchaConfig",$s(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F3(t,e){return Us(t,"POST","/v1/accounts:delete",e)}async function $3(t,e){return Us(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function U3(t,e=!1){const n=lt(t),r=await n.getIdToken(e),i=v_(r);ne(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:dl(tm(i.auth_time)),issuedAtTime:dl(tm(i.iat)),expirationTime:dl(tm(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function tm(t){return Number(t)*1e3}function v_(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Fc("JWT malformed, contained fewer than 3 sections"),null;try{const i=VI(n);return i?JSON.parse(i):(Fc("Failed to decode base64 JWT payload"),null)}catch(i){return Fc("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function B3(t){const e=v_(t);return ne(e,"internal-error"),ne(typeof e.exp<"u","internal-error"),ne(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ql(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof yr&&z3(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function z3({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W3{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CR{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=dl(this.lastLoginAt),this.creationTime=dl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zh(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Ql(t,$3(n,{idToken:r}));ne(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?G3(s.providerUserInfo):[],a=H3(t.providerData,o),l=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),c=l?u:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new CR(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(t,d)}async function q3(t){const e=lt(t);await zh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function H3(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function G3(t){return t.map(e=>{var{providerId:n}=e,r=m_(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K3(t,e){const n=await IR(t,{},async()=>{const r=yu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=kR(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",SR.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ne(e.idToken,"internal-error"),ne(typeof e.idToken<"u","internal-error"),ne(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):B3(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return ne(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await K3(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Xl;return r&&(ne(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(ne(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(ne(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Xl,this.toJSON())}_performRefresh(){return Nr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ei(t,e){ne(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class hs{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=m_(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new W3(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new CR(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Ql(this,this.stsTokenManager.getToken(this.auth,e));return ne(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return U3(this,e)}reload(){return q3(this)}_assign(e){this!==e&&(ne(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new hs(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await zh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Ql(this,F3(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,u,c;const d=(r=n.displayName)!==null&&r!==void 0?r:void 0,h=(i=n.email)!==null&&i!==void 0?i:void 0,f=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,g=(o=n.photoURL)!==null&&o!==void 0?o:void 0,w=(a=n.tenantId)!==null&&a!==void 0?a:void 0,E=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,v=(u=n.createdAt)!==null&&u!==void 0?u:void 0,p=(c=n.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:_,emailVerified:y,isAnonymous:S,providerData:C,stsTokenManager:A}=n;ne(_&&A,e,"internal-error");const P=Xl.fromJSON(this.name,A);ne(typeof _=="string",e,"internal-error"),ei(d,e.name),ei(h,e.name),ne(typeof y=="boolean",e,"internal-error"),ne(typeof S=="boolean",e,"internal-error"),ei(f,e.name),ei(g,e.name),ei(w,e.name),ei(E,e.name),ei(v,e.name),ei(p,e.name);const O=new hs({uid:_,auth:e,email:h,emailVerified:y,displayName:d,isAnonymous:S,photoURL:g,phoneNumber:f,tenantId:w,stsTokenManager:P,createdAt:v,lastLoginAt:p});return C&&Array.isArray(C)&&(O.providerData=C.map(M=>Object.assign({},M))),E&&(O._redirectEventId=E),O}static async _fromIdTokenResponse(e,n,r=!1){const i=new Xl;i.updateFromServerResponse(n);const s=new hs({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await zh(s),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qw=new Map;function Dr(t){qr(t instanceof Function,"Expected a class definition");let e=Qw.get(t);return e?(qr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Qw.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}RR.type="NONE";const Xw=RR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $c(t,e,n){return`firebase:${t}:${e}:${n}`}class xo{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=$c(this.userKey,i.apiKey,s),this.fullPersistenceKey=$c("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?hs._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new xo(Dr(Xw),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||Dr(Xw);const o=$c(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const c=await u._get(o);if(c){const d=hs._fromJSON(e,c);u!==s&&(a=d),s=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new xo(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new xo(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yw(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(PR(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(xR(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(NR(e))return"Blackberry";if(DR(e))return"Webos";if(__(e))return"Safari";if((e.includes("chrome/")||AR(e))&&!e.includes("edge/"))return"Chrome";if(bR(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function xR(t=qt()){return/firefox\//i.test(t)}function __(t=qt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function AR(t=qt()){return/crios\//i.test(t)}function PR(t=qt()){return/iemobile/i.test(t)}function bR(t=qt()){return/android/i.test(t)}function NR(t=qt()){return/blackberry/i.test(t)}function DR(t=qt()){return/webos/i.test(t)}function Tf(t=qt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Q3(t=qt()){var e;return Tf(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function X3(){return eN()&&document.documentMode===10}function OR(t=qt()){return Tf(t)||bR(t)||DR(t)||NR(t)||/windows phone/i.test(t)||PR(t)}function Y3(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LR(t,e=[]){let n;switch(t){case"Browser":n=Yw(qt());break;case"Worker":n=`${Yw(qt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Os}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J3{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z3(t,e={}){return Us(t,"GET","/v2/passwordPolicy",$s(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eM=6;class tM{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:eM,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nM{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Jw(this),this.idTokenSubscription=new Jw(this),this.beforeStateQueue=new J3(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=TR,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Dr(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await xo.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ne(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await zh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=N3()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?lt(e):null;return n&&ne(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ne(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(Dr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Z3(this),n=new tM(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new gu("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Dr(e)||this._popupRedirectResolver;ne(n,this,"argument-error"),this.redirectPersistenceManager=await xo.create(this,[Dr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ne(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=LR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&x3(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Bs(t){return lt(t)}class Jw{constructor(e){this.auth=e,this.observer=null,this.addObserver=aN(n=>this.observer=n)}get next(){return ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rM(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function MR(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=dr("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",rM().appendChild(r)})}function iM(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const sM="https://www.google.com/recaptcha/enterprise.js?render=",oM="recaptcha-enterprise",aM="NO_RECAPTCHA";class lM{constructor(e){this.type=oM,this.auth=Bs(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{j3(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new V3(l);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,o(u.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;Kw(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(u=>{o(u)}).catch(()=>{o(aM)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&Kw(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}MR(sM+a).then(()=>{i(a,s,o)}).catch(l=>{o(l)})}}).catch(a=>{o(a)})})}}async function Zw(t,e,n,r=!1){const i=new lM(t);let s;try{s=await i.verify(n)}catch{s=await i.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function VR(t,e,n,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await Zw(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await Zw(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uM(t,e){const n=zd(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Ch(s,e??{}))return i;Qn(i,"already-initialized")}return n.initialize({options:e})}function cM(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Dr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function hM(t,e,n){const r=Bs(t);ne(r._canInitEmulator,r,"emulator-config-failed"),ne(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=jR(e),{host:o,port:a}=dM(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||fM()}function jR(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function dM(t){const e=jR(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:eE(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:eE(o)}}}function eE(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function fM(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w_{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Nr("not implemented")}_getIdTokenResponse(e){return Nr("not implemented")}_linkToIdToken(e,n){return Nr("not implemented")}_getReauthenticationResolver(e){return Nr("not implemented")}}async function pM(t,e){return Us(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mM(t,e){return Mu(t,"POST","/v1/accounts:signInWithPassword",$s(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gM(t,e){return Mu(t,"POST","/v1/accounts:signInWithEmailLink",$s(t,e))}async function yM(t,e){return Mu(t,"POST","/v1/accounts:signInWithEmailLink",$s(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl extends w_{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Yl(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Yl(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return VR(e,n,"signInWithPassword",mM);case"emailLink":return gM(e,{email:this._email,oobCode:this._password});default:Qn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":return pM(e,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return yM(e,{idToken:n,email:this._email,oobCode:this._password});default:Qn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ao(t,e){return Mu(t,"POST","/v1/accounts:signInWithIdp",$s(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vM="http://localhost";class Cs extends w_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Cs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Qn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=m_(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Cs(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Ao(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ao(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ao(e,n)}buildRequest(){const e={requestUri:vM,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=yu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _M(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function wM(t){const e=Fa($a(t)).link,n=e?Fa($a(e)).deep_link_id:null,r=Fa($a(t)).deep_link_id;return(r?Fa($a(r)).link:null)||r||n||e||t}class E_{constructor(e){var n,r,i,s,o,a;const l=Fa($a(e)),u=(n=l.apiKey)!==null&&n!==void 0?n:null,c=(r=l.oobCode)!==null&&r!==void 0?r:null,d=_M((i=l.mode)!==null&&i!==void 0?i:null);ne(u&&c&&d,"argument-error"),this.apiKey=u,this.operation=d,this.code=c,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=wM(e);try{return new E_(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(){this.providerId=da.PROVIDER_ID}static credential(e,n){return Yl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=E_.parseLink(n);return ne(r,"argument-error"),Yl._fromEmailAndCode(e,r.code,r.tenantId)}}da.PROVIDER_ID="password";da.EMAIL_PASSWORD_SIGN_IN_METHOD="password";da.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FR{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vu extends FR{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi extends Vu{constructor(){super("facebook.com")}static credential(e){return Cs._fromParams({providerId:oi.PROVIDER_ID,signInMethod:oi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return oi.credentialFromTaggedObject(e)}static credentialFromError(e){return oi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return oi.credential(e.oauthAccessToken)}catch{return null}}}oi.FACEBOOK_SIGN_IN_METHOD="facebook.com";oi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai extends Vu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Cs._fromParams({providerId:ai.PROVIDER_ID,signInMethod:ai.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ai.credentialFromTaggedObject(e)}static credentialFromError(e){return ai.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return ai.credential(n,r)}catch{return null}}}ai.GOOGLE_SIGN_IN_METHOD="google.com";ai.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li extends Vu{constructor(){super("github.com")}static credential(e){return Cs._fromParams({providerId:li.PROVIDER_ID,signInMethod:li.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return li.credentialFromTaggedObject(e)}static credentialFromError(e){return li.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return li.credential(e.oauthAccessToken)}catch{return null}}}li.GITHUB_SIGN_IN_METHOD="github.com";li.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui extends Vu{constructor(){super("twitter.com")}static credential(e,n){return Cs._fromParams({providerId:ui.PROVIDER_ID,signInMethod:ui.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ui.credentialFromTaggedObject(e)}static credentialFromError(e){return ui.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ui.credential(n,r)}catch{return null}}}ui.TWITTER_SIGN_IN_METHOD="twitter.com";ui.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EM(t,e){return Mu(t,"POST","/v1/accounts:signUp",$s(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await hs._fromIdTokenResponse(e,r,i),o=tE(r);return new Rs({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=tE(r);return new Rs({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function tE(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wh extends yr{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Wh.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Wh(e,n,r,i)}}function $R(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Wh._fromErrorAndOperation(t,s,e,r):s})}async function TM(t,e,n=!1){const r=await Ql(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Rs._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SM(t,e,n=!1){const{auth:r}=t,i="reauthenticate";try{const s=await Ql(t,$R(r,i,e,t),n);ne(s.idToken,r,"internal-error");const o=v_(s.idToken);ne(o,r,"internal-error");const{sub:a}=o;return ne(t.uid===a,r,"user-mismatch"),Rs._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Qn(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UR(t,e,n=!1){const r="signIn",i=await $R(t,r,e),s=await Rs._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function IM(t,e){return UR(Bs(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BR(t){const e=Bs(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function kM(t,e,n){const r=Bs(t),o=await VR(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",EM).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&BR(t),l}),a=await Rs._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function CM(t,e,n){return IM(lt(t),da.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&BR(t),r})}function RM(t,e,n,r){return lt(t).onIdTokenChanged(e,n,r)}function xM(t,e,n){return lt(t).beforeAuthStateChanged(e,n)}function AM(t){return lt(t).signOut()}const qh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(qh,"1"),this.storage.removeItem(qh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PM(){const t=qt();return __(t)||Tf(t)}const bM=1e3,NM=10;class WR extends zR{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=PM()&&Y3(),this.fallbackToPolling=OR(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);X3()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,NM):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},bM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}WR.type="LOCAL";const DM=WR;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qR extends zR{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}qR.type="SESSION";const HR=qR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OM(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Sf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async u=>u(n.origin,s)),l=await OM(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Sf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T_(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LM{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const u=T_("",20);i.port1.start();const c=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(d){const h=d;if(h.data.eventId===u)switch(h.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(h.data.response);break;default:clearTimeout(c),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fr(){return window}function MM(t){fr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GR(){return typeof fr().WorkerGlobalScope<"u"&&typeof fr().importScripts=="function"}async function VM(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function jM(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function FM(){return GR()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KR="firebaseLocalStorageDb",$M=1,Hh="firebaseLocalStorage",QR="fbase_key";class ju{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function If(t,e){return t.transaction([Hh],e?"readwrite":"readonly").objectStore(Hh)}function UM(){const t=indexedDB.deleteDatabase(KR);return new ju(t).toPromise()}function Xg(){const t=indexedDB.open(KR,$M);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Hh,{keyPath:QR})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Hh)?e(r):(r.close(),await UM(),e(await Xg()))})})}async function nE(t,e,n){const r=If(t,!0).put({[QR]:e,value:n});return new ju(r).toPromise()}async function BM(t,e){const n=If(t,!1).get(e),r=await new ju(n).toPromise();return r===void 0?null:r.value}function rE(t,e){const n=If(t,!0).delete(e);return new ju(n).toPromise()}const zM=800,WM=3;class XR{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Xg(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>WM)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return GR()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Sf._getInstance(FM()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await VM(),!this.activeServiceWorker)return;this.sender=new LM(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||jM()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Xg();return await nE(e,qh,"1"),await rE(e,qh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>nE(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>BM(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>rE(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=If(i,!1).getAll();return new ju(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),zM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}XR.type="LOCAL";const qM=XR;new Lu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HM(t,e){return e?Dr(e):(ne(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S_ extends w_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ao(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ao(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ao(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function GM(t){return UR(t.auth,new S_(t),t.bypassAuthState)}function KM(t){const{auth:e,user:n}=t;return ne(n,e,"internal-error"),SM(n,new S_(t),t.bypassAuthState)}async function QM(t){const{auth:e,user:n}=t;return ne(n,e,"internal-error"),TM(n,new S_(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YR{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return GM;case"linkViaPopup":case"linkViaRedirect":return QM;case"reauthViaPopup":case"reauthViaRedirect":return KM;default:Qn(this.auth,"internal-error")}}resolve(e){qr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){qr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XM=new Lu(2e3,1e4);class yo extends YR{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,yo.currentPopupAction&&yo.currentPopupAction.cancel(),yo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ne(e,this.auth,"internal-error"),e}async onExecution(){qr(this.filter.length===1,"Popup operations only handle one event");const e=T_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(dr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(dr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,yo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(dr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,XM.get())};e()}}yo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YM="pendingRedirect",Uc=new Map;class JM extends YR{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Uc.get(this.auth._key());if(!e){try{const r=await ZM(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Uc.set(this.auth._key(),e)}return this.bypassAuthState||Uc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function ZM(t,e){const n=n6(e),r=t6(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function e6(t,e){Uc.set(t._key(),e)}function t6(t){return Dr(t._redirectPersistence)}function n6(t){return $c(YM,t.config.apiKey,t.name)}async function r6(t,e,n=!1){const r=Bs(t),i=HM(r,e),o=await new JM(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i6=10*60*1e3;class s6{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!o6(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!JR(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(dr(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=i6&&this.cachedEventUids.clear(),this.cachedEventUids.has(iE(e))}saveEventToCache(e){this.cachedEventUids.add(iE(e)),this.lastProcessedEventTime=Date.now()}}function iE(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function JR({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function o6(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return JR(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a6(t,e={}){return Us(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l6=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,u6=/^https?/;async function c6(t){if(t.config.emulator)return;const{authorizedDomains:e}=await a6(t);for(const n of e)try{if(h6(n))return}catch{}Qn(t,"unauthorized-domain")}function h6(t){const e=Qg(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!u6.test(n))return!1;if(l6.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d6=new Lu(3e4,6e4);function sE(){const t=fr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function f6(t){return new Promise((e,n)=>{var r,i,s;function o(){sE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{sE(),n(dr(t,"network-request-failed"))},timeout:d6.get()})}if(!((i=(r=fr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=fr().gapi)===null||s===void 0)&&s.load)o();else{const a=iM("iframefcb");return fr()[a]=()=>{gapi.load?o():n(dr(t,"network-request-failed"))},MR(`https://apis.google.com/js/api.js?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Bc=null,e})}let Bc=null;function p6(t){return Bc=Bc||f6(t),Bc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m6=new Lu(5e3,15e3),g6="__/auth/iframe",y6="emulator/auth/iframe",v6={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},_6=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function w6(t){const e=t.config;ne(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?y_(e,y6):`https://${t.config.authDomain}/${g6}`,r={apiKey:e.apiKey,appName:t.name,v:Os},i=_6.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${yu(r).slice(1)}`}async function E6(t){const e=await p6(t),n=fr().gapi;return ne(n,t,"internal-error"),e.open({where:document.body,url:w6(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:v6,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=dr(t,"network-request-failed"),a=fr().setTimeout(()=>{s(o)},m6.get());function l(){fr().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T6={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},S6=500,I6=600,k6="_blank",C6="http://localhost";class oE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function R6(t,e,n,r=S6,i=I6){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},T6),{width:r.toString(),height:i.toString(),top:s,left:o}),u=qt().toLowerCase();n&&(a=AR(u)?k6:n),xR(u)&&(e=e||C6,l.scrollbars="yes");const c=Object.entries(l).reduce((h,[f,g])=>`${h}${f}=${g},`,"");if(Q3(u)&&a!=="_self")return x6(e||"",a),new oE(null);const d=window.open(e||"",a,c);ne(d,t,"popup-blocked");try{d.focus()}catch{}return new oE(d)}function x6(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A6="__/auth/handler",P6="emulator/auth/handler",b6=encodeURIComponent("fac");async function aE(t,e,n,r,i,s){ne(t.config.authDomain,t,"auth-domain-config-required"),ne(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Os,eventId:i};if(e instanceof FR){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",oN(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[c,d]of Object.entries(s||{}))o[c]=d}if(e instanceof Vu){const c=e.getScopes().filter(d=>d!=="");c.length>0&&(o.scopes=c.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const c of Object.keys(a))a[c]===void 0&&delete a[c];const l=await t._getAppCheckToken(),u=l?`#${b6}=${encodeURIComponent(l)}`:"";return`${N6(t)}?${yu(a).slice(1)}${u}`}function N6({config:t}){return t.emulator?y_(t,P6):`https://${t.authDomain}/${A6}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nm="webStorageSupport";class D6{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=HR,this._completeRedirectFn=r6,this._overrideRedirectResult=e6}async _openPopup(e,n,r,i){var s;qr((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await aE(e,n,r,Qg(),i);return R6(e,o,T_())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await aE(e,n,r,Qg(),i);return MM(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(qr(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await E6(e),r=new s6(e);return n.register("authEvent",i=>(ne(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(nm,{type:nm},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[nm];o!==void 0&&n(!!o),Qn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=c6(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return OR()||__()||Tf()}}const O6=D6;var lE="@firebase/auth",uE="1.3.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L6{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M6(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function V6(t){Es(new Ni("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ne(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:LR(t)},u=new nM(r,i,s,l);return cM(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Es(new Ni("auth-internal",e=>{const n=Bs(e.getProvider("auth").getImmediate());return(r=>new L6(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),lr(lE,uE,M6(t)),lr(lE,uE,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j6=5*60,F6=UI("authIdTokenMaxAge")||j6;let cE=null;const $6=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>F6)return;const i=n==null?void 0:n.token;cE!==i&&(cE=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function U6(t=gv()){const e=zd(t,"auth");if(e.isInitialized())return e.getImmediate();const n=uM(t,{popupRedirectResolver:O6,persistence:[qM,DM,HR]}),r=UI("authTokenSyncURL");if(r){const s=$6(r);xM(n,s,()=>s(n.currentUser)),RM(n,o=>s(o))}const i=jI("auth");return i&&hM(n,`http://${i}`),n}V6("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZR="firebasestorage.googleapis.com",ex="storageBucket",B6=2*60*1e3,z6=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt extends yr{constructor(e,n,r=0){super(rm(e),`Firebase Storage: ${n} (${rm(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,tt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return rm(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var et;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(et||(et={}));function rm(t){return"storage/"+t}function I_(){const t="An unknown error occurred, please check the error payload for server response.";return new tt(et.UNKNOWN,t)}function W6(t){return new tt(et.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function q6(t){return new tt(et.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function H6(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new tt(et.UNAUTHENTICATED,t)}function G6(){return new tt(et.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function K6(t){return new tt(et.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function Q6(){return new tt(et.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function X6(){return new tt(et.CANCELED,"User canceled the upload/download.")}function Y6(t){return new tt(et.INVALID_URL,"Invalid URL '"+t+"'.")}function J6(t){return new tt(et.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function Z6(){return new tt(et.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+ex+"' property when initializing the app?")}function eV(){return new tt(et.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function tV(){return new tt(et.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function nV(t){return new tt(et.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Yg(t){return new tt(et.INVALID_ARGUMENT,t)}function tx(){return new tt(et.APP_DELETED,"The Firebase app was deleted.")}function rV(t){return new tt(et.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function fl(t,e){return new tt(et.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Oa(t){throw new tt(et.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=pn.makeFromUrl(e,n)}catch{return new pn(e,"")}if(r.path==="")return r;throw J6(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(y){y.path.charAt(y.path.length-1)==="/"&&(y.path_=y.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function u(y){y.path_=decodeURIComponent(y.path)}const c="v[A-Za-z0-9_]+",d=n.replace(/[.]/g,"\\."),h="(/([^?#]*).*)?$",f=new RegExp(`^https?://${d}/${c}/b/${i}/o${h}`,"i"),g={bucket:1,path:3},w=n===ZR?"(?:storage.googleapis.com|storage.cloud.google.com)":n,E="([^?#]*)",v=new RegExp(`^https?://${w}/${i}/${E}`,"i"),_=[{regex:a,indices:l,postModify:s},{regex:f,indices:g,postModify:u},{regex:v,indices:{bucket:1,path:2},postModify:u}];for(let y=0;y<_.length;y++){const S=_[y],C=S.regex.exec(e);if(C){const A=C[S.indices.bucket];let P=C[S.indices.path];P||(P=""),r=new pn(A,P),S.postModify(r);break}}if(r==null)throw Y6(e);return r}}class iV{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sV(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return a===2}let u=!1;function c(...E){u||(u=!0,e.apply(null,E))}function d(E){i=setTimeout(()=>{i=null,t(f,l())},E)}function h(){s&&clearTimeout(s)}function f(E,...v){if(u){h();return}if(E){h(),c.call(null,E,...v);return}if(l()||o){h(),c.call(null,E,...v);return}r<64&&(r*=2);let _;a===1?(a=2,_=0):_=(r+Math.random())*1e3,d(_)}let g=!1;function w(E){g||(g=!0,h(),!u&&(i!==null?(E||(a=2),clearTimeout(i),d(0)):E||(a=1)))}return d(0),s=setTimeout(()=>{o=!0,w(!0)},n),w}function oV(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aV(t){return t!==void 0}function lV(t){return typeof t=="object"&&!Array.isArray(t)}function k_(t){return typeof t=="string"||t instanceof String}function hE(t){return C_()&&t instanceof Blob}function C_(){return typeof Blob<"u"&&!Y4()}function dE(t,e,n,r){if(r<e)throw Yg(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Yg(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R_(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function nx(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ds;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(ds||(ds={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uV(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cV{constructor(e,n,r,i,s,o,a,l,u,c,d,h=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=c,this.connectionFactory_=d,this.retry=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((f,g)=>{this.resolve_=f,this.reject_=g,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new yc(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===ds.NO_ERROR,l=s.getStatus();if(!a||uV(l,this.additionalRetryCodes_)&&this.retry){const c=s.getErrorCode()===ds.ABORT;r(!1,new yc(!1,null,c));return}const u=this.successCodes_.indexOf(l)!==-1;r(!0,new yc(u,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());aV(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=I_();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){const l=this.appDelete_?tx():X6();o(l)}else{const l=Q6();o(l)}};this.canceled_?n(!1,new yc(!1,null,!0)):this.backoffId_=sV(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&oV(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class yc{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function hV(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function dV(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function fV(t,e){e&&(t["X-Firebase-GMPID"]=e)}function pV(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function mV(t,e,n,r,i,s,o=!0){const a=nx(t.urlParams),l=t.url+a,u=Object.assign({},t.headers);return fV(u,e),hV(u,n),dV(u,s),pV(u,r),new cV(l,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gV(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function yV(...t){const e=gV();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(C_())return new Blob(t);throw new tt(et.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function vV(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _V(t){if(typeof atob>"u")throw nV("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class im{constructor(e,n){this.data=e,this.contentType=n||null}}function wV(t,e){switch(t){case sr.RAW:return new im(rx(e));case sr.BASE64:case sr.BASE64URL:return new im(ix(t,e));case sr.DATA_URL:return new im(TV(e),SV(e))}throw I_()}function rx(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=r,o=t.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function EV(t){let e;try{e=decodeURIComponent(t)}catch{throw fl(sr.DATA_URL,"Malformed data URL.")}return rx(e)}function ix(t,e){switch(t){case sr.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw fl(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case sr.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw fl(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=_V(e)}catch(i){throw i.message.includes("polyfill")?i:fl(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class sx{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw fl(sr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=IV(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function TV(t){const e=new sx(t);return e.base64?ix(sr.BASE64,e.rest):EV(e.rest)}function SV(t){return new sx(t).contentType}function IV(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(e,n){let r=0,i="";hE(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(hE(this.data_)){const r=this.data_,i=vV(r,e,n);return i===null?null:new ci(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new ci(r,!0)}}static getBlob(...e){if(C_()){const n=e.map(r=>r instanceof ci?r.data_:r);return new ci(yV.apply(null,n))}else{const n=e.map(o=>k_(o)?wV(sr.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new ci(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ox(t){let e;try{e=JSON.parse(t)}catch{return null}return lV(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kV(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function CV(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function ax(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RV(t,e){return e}class Kt{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||RV}}let vc=null;function xV(t){return!k_(t)||t.length<2?t:ax(t)}function lx(){if(vc)return vc;const t=[];t.push(new Kt("bucket")),t.push(new Kt("generation")),t.push(new Kt("metageneration")),t.push(new Kt("name","fullPath",!0));function e(s,o){return xV(o)}const n=new Kt("name");n.xform=e,t.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new Kt("size");return i.xform=r,t.push(i),t.push(new Kt("timeCreated")),t.push(new Kt("updated")),t.push(new Kt("md5Hash",null,!0)),t.push(new Kt("cacheControl",null,!0)),t.push(new Kt("contentDisposition",null,!0)),t.push(new Kt("contentEncoding",null,!0)),t.push(new Kt("contentLanguage",null,!0)),t.push(new Kt("contentType",null,!0)),t.push(new Kt("metadata","customMetadata",!0)),vc=t,vc}function AV(t,e){function n(){const r=t.bucket,i=t.fullPath,s=new pn(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function PV(t,e,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,e[o.server])}return AV(r,t),r}function ux(t,e,n){const r=ox(e);return r===null?null:PV(t,r,n)}function bV(t,e,n,r){const i=ox(e);if(i===null||!k_(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(u=>{const c=t.bucket,d=t.fullPath,h="/b/"+o(c)+"/o/"+o(d),f=R_(h,n,r),g=nx({alt:"media",token:u});return f+g})[0]}function NV(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}class cx{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hx(t){if(!t)throw I_()}function DV(t,e){function n(r,i){const s=ux(t,i,e);return hx(s!==null),s}return n}function OV(t,e){function n(r,i){const s=ux(t,i,e);return hx(s!==null),bV(s,i,t.host,t._protocol)}return n}function dx(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=G6():i=H6():n.getStatus()===402?i=q6(t.bucket):n.getStatus()===403?i=K6(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function LV(t){const e=dx(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=W6(t.path)),s.serverResponse=i.serverResponse,s}return n}function MV(t,e,n){const r=e.fullServerUrl(),i=R_(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new cx(i,s,OV(t,n),o);return a.errorHandler=LV(e),a}function VV(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function jV(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=VV(null,e)),r}function FV(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let _="";for(let y=0;y<2;y++)_=_+Math.random().toString().slice(2);return _}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const u=jV(e,r,i),c=NV(u,n),d="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+c+`\r
--`+l+`\r
Content-Type: `+u.contentType+`\r
\r
`,h=`\r
--`+l+"--",f=ci.getBlob(d,r,h);if(f===null)throw eV();const g={name:u.fullPath},w=R_(s,t.host,t._protocol),E="POST",v=t.maxUploadRetryTime,p=new cx(w,E,DV(t,n),v);return p.urlParams=g,p.headers=o,p.body=f.uploadData(),p.errorHandler=dx(e),p}class $V{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ds.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ds.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ds.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw Oa("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Oa("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Oa("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Oa("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Oa("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class UV extends $V{initXhr(){this.xhr_.responseType="text"}}function fx(){return new UV}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs{constructor(e,n){this._service=e,n instanceof pn?this._location=n:this._location=pn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new xs(e,n)}get root(){const e=new pn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return ax(this._location.path)}get storage(){return this._service}get parent(){const e=kV(this._location.path);if(e===null)return null;const n=new pn(this._location.bucket,e);return new xs(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw rV(e)}}function BV(t,e,n){t._throwIfRoot("uploadBytes");const r=FV(t.storage,t._location,lx(),new ci(e,!0),n);return t.storage.makeRequestWithTokens(r,fx).then(i=>({metadata:i,ref:t}))}function zV(t){t._throwIfRoot("getDownloadURL");const e=MV(t.storage,t._location,lx());return t.storage.makeRequestWithTokens(e,fx).then(n=>{if(n===null)throw tV();return n})}function WV(t,e){const n=CV(t._location.path,e),r=new pn(t._location.bucket,n);return new xs(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qV(t){return/^[A-Za-z]+:\/\//.test(t)}function HV(t,e){return new xs(t,e)}function px(t,e){if(t instanceof x_){const n=t;if(n._bucket==null)throw Z6();const r=new xs(n,n._bucket);return e!=null?px(r,e):r}else return e!==void 0?WV(t,e):t}function GV(t,e){if(e&&qV(e)){if(t instanceof x_)return HV(t,e);throw Yg("To use ref(service, url), the first argument must be a Storage instance.")}else return px(t,e)}function fE(t,e){const n=e==null?void 0:e[ex];return n==null?null:pn.makeFromBucketSpec(n,t)}function KV(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:BI(i,t.app.options.projectId))}class x_{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=ZR,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=B6,this._maxUploadRetryTime=z6,this._requests=new Set,i!=null?this._bucket=pn.makeFromBucketSpec(i,this._host):this._bucket=fE(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=pn.makeFromBucketSpec(this._url,e):this._bucket=fE(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){dE("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){dE("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new xs(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new iV(tx());{const o=mV(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const pE="@firebase/storage",mE="0.11.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mx="storage";function QV(t,e,n){return t=lt(t),BV(t,e,n)}function XV(t){return t=lt(t),zV(t)}function YV(t,e){return t=lt(t),GV(t,e)}function JV(t=gv(),e){t=lt(t);const r=zd(t,mx).getImmediate({identifier:e}),i=FI("storage");return i&&ZV(r,...i),r}function ZV(t,e,n,r={}){KV(t,e,n,r)}function e5(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new x_(n,r,i,e,Os)}function t5(){Es(new Ni(mx,e5,"PUBLIC").setMultipleInstances(!0)),lr(pE,mE,""),lr(pE,mE,"esm2017")}t5();const n5={apiKey:"AIzaSyD9gPgyiQH9lMcBp_LKVbHcJSr1i6M9CAU",authDomain:"app-no-comments-hate.firebaseapp.com",databaseURL:"https://app-no-comments-hate-default-rtdb.firebaseio.com",projectId:"app-no-comments-hate",storageBucket:"app-no-comments-hate.appspot.com",messagingSenderId:"302973680060",appId:"1:302973680060:web:b0fbf85f3ac2ce135ad3b9"},A_=qI(n5),P_=U6(A_),Hr=i3(A_),r5=JV(A_),kf=async({uid:t=""})=>{const e=ks(Hr,"users",t);try{const n=await yR(e);return n.exists()?n.data():null}catch(n){throw console.error(n),new Error(n)}},gx={errorCredentials:"auth/invalid-login-credentials",emailAlreadyInUse:"auth/email-already-in-use"},sm="user_app_antihate";function i5(t){return t.replace(/\//g,"-").replace(/,/g,"_")}Array.from(new Set(["4r5e","5h1t","5hit","a55","anal","anus","ar5e","arrse","arse","ass","ass-fucker","asses","assfucker","assfukka","asshole","assholes","asswhole","a_s_s","b!tch","b00bs","b17ch","b1tch","ballbag","balls","ballsack","bastard","beastial","beastiality","bellend","bestial","bestiality","bi+ch","biatch","bitch","bitcher","bitchers","bitches","bitchin","bitching","bloody","blow job","blowjob","blowjobs","boiolas","bollock","bollok","boner","boob","boobs","booobs","boooobs","booooobs","booooooobs","breasts","buceta","bugger","bum","bunny fucker","butt","butthole","buttmuch","buttplug","c0ck","c0cksucker","carpet muncher","cawk","chink","cipa","cl1t","clit","clitoris","clits","cnut","cock","cock-sucker","cockface","cockhead","cockmunch","cockmuncher","cocks","cocksuck","cocksucked","cocksucker","cocksucking","cocksucks","cocksuka","cocksukka","cok","cokmuncher","coksucka","coon","cox","crap","cum","cummer","cumming","cums","cumshot","cunilingus","cunillingus","cunnilingus","cunt","cuntlick","cuntlicker","cuntlicking","cunts","cyalis","cyberfuc","cyberfuck","cyberfucked","cyberfucker","cyberfuckers","cyberfucking","d1ck","damn","dick","dickhead","dildo","dildos","dink","dinks","dirsa","dlck","dog-fucker","doggin","dogging","donkeyribber","doosh","duche","dyke","ejaculate","ejaculated","ejaculates","ejaculating","ejaculatings","ejaculation","ejakulate","f u c k","f u c k e r","f4nny","fag","fagging","faggitt","faggot","faggs","fagot","fagots","fags","fanny","fannyflaps","fannyfucker","fanyy","fatass","fcuk","fcuker","fcuking","feck","fecker","felching","fellate","fellatio","fingerfuck","fingerfucked","fingerfucker","fingerfuckers","fingerfucking","fingerfucks","fistfuck","fistfucked","fistfucker","fistfuckers","fistfucking","fistfuckings","fistfucks","flange","fook","fooker","fuck","fucka","fucked","fucker","fuckers","fuckhead","fuckheads","fuckin","fucking","fuckings","fuckingshitmotherfucker","fuckme","fucks","fuckwhit","fuckwit","fudge packer","fudgepacker","fuk","fuker","fukker","fukkin","fuks","fukwhit","fukwit","fux","fux0r","f_u_c_k","gangbang","gangbanged","gangbangs","gaylord","gaysex","goatse","god-dam","god-damned","goddamn","goddamned","hardcoresex","hell","heshe","hoar","hoare","hoer","homo","hore","horniest","horny","hotsex","jack-off","jackoff","jap","jerk-off","jism","jiz","jizm","jizz","kawk","knob","knobead","knobed","knobend","knobhead","knobjocky","knobjokey","kock","kondum","kondums","kum","kummer","kumming","kums","kunilingus","l3i+ch","l3itch","labia","lust","lusting","m0f0","m0fo","m45terbate","ma5terb8","ma5terbate","masochist","master-bate","masterb8","masterbat*","masterbat3","masterbate","masterbation","masterbations","masturbate","mo-fo","mof0","mofo","mothafuck","mothafucka","mothafuckas","mothafuckaz","mothafucked","mothafucker","mothafuckers","mothafuckin","mothafucking","mothafuckings","mothafucks","mother fucker","motherfuck","motherfucked","motherfucker","motherfuckers","motherfuckin","motherfucking","motherfuckings","motherfuckka","motherfucks","muff","mutha","muthafecker","muthafuckker","muther","mutherfucker","n1gga","n1gger","nazi","nigg3r","nigg4h","nigga","niggah","niggas","niggaz","nigger","niggers","nob","nob jokey","nobhead","nobjocky","nobjokey","numbnuts","nutsack","orgasim","orgasims","orgasm","orgasms","p0rn","pawn","pecker","penis","penisfucker","phonesex","phuck","phuk","phuked","phuking","phukked","phukking","phuks","phuq","pigfucker","pimpis","piss","pissed","pisser","pissers","pisses","pissflaps","pissin","pissing","pissoff","poop","porn","porno","pornography","pornos","prick","pricks","pron","pube","pusse","pussi","pussies","pussy","pussys","rectum","retard","rimjaw","rimming","s hit","s.o.b.","sadist","schlong","screwing","scroat","scrote","scrotum","semen","sex","sh!+","sh!t","sh1t","shag","shagger","shaggin","shagging","shemale","shi+","shit","shitdick","shite","shited","shitey","shitfuck","shitfull","shithead","shiting","shitings","shits","shitted","shitter","shitters","shitting","shittings","shitty","skank","slut","sluts","smegma","smut","snatch","son-of-a-bitch","spac","spunk","s_h_i_t","t1tt1e5","t1tties","teets","teez","testical","testicle","tit","titfuck","tits","titt","tittie5","tittiefucker","titties","tittyfuck","tittywank","titwank","tosser","turd","tw4t","twat","twathead","twatty","twunt","twunter","v14gra","v1gra","vagina","viagra","vulva","w00se","wang","wank","wanker","wanky","whoar","whore","willies","willy","xrated","xxx","mound of venus","asslover","s&m","queaf","whitetrash","meatrack","ra8s","pimp","urine","whit","randy","herpes","niglet","narcotic","pudboy","rimming","pornography","poop chute","slanteye","muffdiving","jiggabo","assassination","peepshpw","popimp","girl on","testicles","molestor","peni5","tranny","barface","arsehole","pissed","sixsixsix","shitty ","hamas","cunilingus","bitcher","pee","niggled","muffindiver","cocksman","scag","aroused","niggling","fingerfucker ","nlggor","niggaz","assfuck","slant","urinate","mothafucked ","fungus","gummer","venus mound","alla","spaghettinigger","piss","mickeyfinn","fuckers","jizzim","tramp","quashie","prince albert piercing","hardon","menage a trois","bukkake","shag","raped","buggery","deth","weenie","lickme","reverse cowgirl","tonguetramp","cum","schlong","cunn","damnit","crackpipe","buttmuncher","cameltoe","camgirl","hotpussy","cuntfucker","sluts","ball licking","hentai","jackshit","dickman","doo-doo","gook","crimes","ho","bomd","shitdick","slapper","urinary","tantra","nookie","fuckedup","gubba","niggur","cybersex","dicklicker","cunillingus","hitlerism","butt","triplex","busty","dicklick","kunilingus","tonguethrust","fistfucking ","assmonkey","criminal","cockknob","koon","shat","footfucker","blonde action","cumm","cuntlicking ","sexy-slim","lemon party","vibrater","upskirt","jijjiboo","fuckfriend","pthc","mothafucka","sniggered","buttfuckers","nutfucker","peehole","erection","nudity","bast","lesbayn","shortfuck","cherrypopper","palestinian","pussylips","nooner","how to kill","blumpkin","stiffy","piss pig","beastiality","latin","butchbabes","spunk","xx","crackwhore","butt-fuckers","kraut","pooping","style doggy","lactate","fecal","rusty trombone","wrinkled starfish","spigotty","dink","clogwog","whitey","slaughter","bollick","sodomite","balls","nimphomania","ball gag","poof","muff diver","jail bait","beaver","asspirate","bareback","pimpjuice","ballsack","bi-sexual","limey","nookey","breastman","lesbo","beatyourmeat","lovemaking","munt","clitoris","fornicate","wet dream","double penetration","missionary position","bugger","lovejuice","date rape","eatballs","handjob","nlgger","dixiedyke","junglebunny","sonofabitch","goddamned","deep throat","jism","assclown","shitforbrains","screwyou","ethiopian","nastyslut","gang bang","lubejob","make me come","rimjob","sexfarm","tight white","lezbe","lezbo","tribadism","butt-bang","asskiss","biteme","angie","abortion","murderer","motherfucker","sextoy","2g1c","doggy style","cunntt","cooly","ball sack","sodom","slideitin","fudge packer","fatfuck","gipp","communist","felatio ","libido","xtc","cuntfuck","niggardly","fuckface","faggot","protestant","trailertrash","headfuck","shav","dickweed","refugee","trannie","giant cock","sexhound","slut","titlover","wank","moslem","krappy","black cock","tortur","erotic","donkey punch","dirty pillows","cockcowboy","sucker","cocktail","doom","hymen","vibr","terrorist","mufflikcer","phonesex","teste","pisshead","slime","brea5t","tea bagging","slutt","cumbubble","blackout","hijacking","premature","sextogo","arse","racist","jimfish","flydye","juggs","jade","wigger","niggard's","jigg","devilworshipper","gatorbait","fastfuck","spik","nuke","bastinado","kondum","pansy","destroy","ikey","women rapping","titfucker","shitola","booby","pimpsimp","coon","strap on","zigabo","bisexual","gangsta","teat","boobies","kafir","dp action","jugs","husky","homoerotic","twinkie","spooge","kink","sleezebag","gay","homo","slutwhore","dickless","cumfest","israeli","fuk","niggardliness","nigr","goddamit","sandnigger","insest","foreskin","acrotomophilia","dumbbitch","fuckmonkey","pubiclice","cyberslimer","titfuck","cummer","kumquat","one guy one jar","sexo","carruth","cocktease","trisexual","pric","rabbi","gypp","cunnilingus","dipshit","welfare","arabs","transvestite","tnt","penile","mothafuckings","peckerwood","enemy","negroid","genital","gangbanger","queef","strapon","thicklips","female squirting","flydie","crabs","christ","ejaculate","footjob","shitoutofluck","paki","rump","licker","pindick","cockrider","felching","geezer","balllicker","ponyplay","fuckoff","jizzum","sadis","hodgie","fatfucker","poop","tits","bicurious","bombs","hork","mr hands","bi curious","sooty","liberal","prick","clover clamps","spunky","nymphomania","playgirl","vietcong","yellow showers","xxx","pecker","bitchslap","crap","jihad","assjockey","macaca","kums","kinky","pooper","homicide","fuuck","poon","shitfuck","tittie","wanking","girl on top","fistfucker ","zoophilia","farted ","nigglings","hiscock","tang","erotism","floo","honger","meth","beaner","kummer","whash","fuckinnuts","fuckin","dyke","kotex","suck","butchdike","datnigga","uterus","trots","luckycammeltoe","roach","swallow","motherfuck","blow","ball gravy","slutwear","panti","kissass","shawtypimp","muffdive","mulatto","noonan","wab","banging","tunneloflove","doggystyle","fuckwhore","rapist","homobangers","porno","barfface","sex","syphilis","pearlnecklace","sleezeball","sextoys","assman","shagging","anilingus","stupidfucker","loadedgun","beastial","shithead","asses","pussylover","niggah","gotohell","jigga","remains","frotting","thirdeye","fuckknob","inthebuff","nawashi","roundeye","retarded","mastabate","kunnilingus","bung hole","pee-pee","camwhore","satan","lowlife","tubgirl","fucks","blow your l","krap","addicts","snatchpatch","bra","poontang","snatch","pussypounder","shit","knife","pu55i","footaction","footlicker","bimbos","mothafuckaz","pussycat","fucking","funfuck","piece of shit","boang","nipple","fuckit","shoot","quim","booty call","slutting","coitus","tit","spermherder","raging boner","buttfucker","quickie","grope","skum","rectum","kanake","soviet","honkers","chinky","dingleberry","shota","hillbillies","godammit","fugly","nasty","ejaculation","waysted","carpetmuncher","nastybitch","camel toe","strappado","jew","limpdick","heroin","panty","polack","pornprincess","gonorrehea","meatbeatter","crotchmonkey","topless","shithappens","foot fetish","canadian","amateur","uck","whitenigger","niger","squaw","hand job","buttbang","titty","gypo","defecate","kock","niggaracci","pussyfucker","corruption","girls gone wild","boobs","ejaculated","shitface","autoerotic","creamy","fckcum","knockers","fucck","whorehouse","cocksmoker","queer","cocklover","assblaster","bombing","hooters","forni","kike","hapa","bazooms","vulva","failure","racial","fuckfreak","snot","cuntsucker","fingerfucked ","scallywag","pixy","kkk","mastabater","byatch","whigger","sos","pussy","group sex","attack","fucktard","nook","marijuana","filipina","asscowboy","fatso","spit","bazongas","chickslick","niggards","cockblocker","gob","lingerie","anal","headlights","dike","pegging","kaffre","taste my","crack-whore","lynch","tub girl","bullshit","explosion","homosexual","fucked","lesbin","fellatio","nudger","boonga","choad","cra5h","tuckahoe","fingerfucking ","hijacker","athletesfoot","pom","livesex","hostage","cocknob","nude","hard core","fuckbag","hobo","itch","gyp","kyke","pros","radicals","figging","fuckfest","hottotrot","kinbaku","sexhouse","violet wand","analsex","nigga","nittit","jiz ","suckmydick","pussies","hotdamn","assfucker","jizim","pixie","kum","rigger","ethical slut","dolcett","ejaculating ","babe","cumquat","eatpussy","phuk","drunk","phukking","shiteater","hooker","cocksuck ","cocksucker","ball kicking","fuckyou","crappy","feltching","mideast","ecstacy","ribbed","dog style","interracial","tongue in a","pocha","skankywhore","pu55y","motherfuckings","piker","peepshow","jap","yiffy","tongethruster","nigger's","breastlover","stroke","twobitwhore","shits","israel's","jerkoff","bullet vibe","assassinate","killed","pocketpool","whacker","wtf","barf","juggalo","negro","spick","gyppy","nymph","snigger's","violence","lovemuscle","dago","feces","booty","niggers","sodomy","hussy","pisspig","coprophilia","christian","pimped","boob","breast","sperm","coloured","orga","bumblefuck","mams","slavedriver","killing","uptheass","bestial","sweetness","heeb","piccaninny","honk","jizjuice","fuc","nignog","mgger","sexing","virginbreaker","samckdaddy","masterblaster","heterosexual","jigger ","blowjob","lovegun","shitstain","spank","hiv","lesbain","mad","sniggers","jizm ","testicle","ball sucking","dragqween","guro","pubic","titfuckin","moneyshot","camslut","bountybar","assklown","cocky","transsexual","unfuckable","bestiality","cocklicker"]));function yx(){const t=new Date().getTime(),e=Math.floor(Math.random()*1e3);return`${t}-${e}`}function vx(t){const e={day:"numeric",month:"long",year:"numeric"},n={hour:"numeric",minute:"numeric"},r=t.toLocaleDateString("es-ES",e),i=t.toLocaleTimeString("es-ES",n);return`${r}, ${i}`}const gE=async({idPost:t=""})=>{try{const e=rR(Hr,"comments"),n=fR(e,y3("idPost","==",t),pR("dateCommeted","desc"));return(await _R(n)).docs.map(s=>{const o=s.data().dateCommeted;return{...s.data(),dateCommeted:vx(o.toDate())}})}catch(e){throw console.error(e),new Error(e)}},yE=async()=>{try{const t=rR(Hr,"posts"),e=fR(t,pR("datePosted","desc"));return(await _R(e)).docs.map(i=>i.data())}catch(t){throw console.error(t),new Error(t)}},om=async({idPost:t=""})=>{try{const e=ks(Hr,"posts",t);return(await yR(e)).data()}catch(e){throw console.error(e),new Error(e)}};var _x={exports:{}},wx={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yo=x;function s5(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var o5=typeof Object.is=="function"?Object.is:s5,a5=Yo.useState,l5=Yo.useEffect,u5=Yo.useLayoutEffect,c5=Yo.useDebugValue;function h5(t,e){var n=e(),r=a5({inst:{value:n,getSnapshot:e}}),i=r[0].inst,s=r[1];return u5(function(){i.value=n,i.getSnapshot=e,am(i)&&s({inst:i})},[t,n,e]),l5(function(){return am(i)&&s({inst:i}),t(function(){am(i)&&s({inst:i})})},[t]),c5(n),n}function am(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!o5(t,n)}catch{return!0}}function d5(t,e){return e()}var f5=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d5:h5;wx.useSyncExternalStore=Yo.useSyncExternalStore!==void 0?Yo.useSyncExternalStore:f5;_x.exports=wx;var p5=_x.exports,Ex={exports:{}},Tx={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cf=x,m5=p5;function g5(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var y5=typeof Object.is=="function"?Object.is:g5,v5=m5.useSyncExternalStore,_5=Cf.useRef,w5=Cf.useEffect,E5=Cf.useMemo,T5=Cf.useDebugValue;Tx.useSyncExternalStoreWithSelector=function(t,e,n,r,i){var s=_5(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=E5(function(){function l(f){if(!u){if(u=!0,c=f,f=r(f),i!==void 0&&o.hasValue){var g=o.value;if(i(g,f))return d=g}return d=f}if(g=d,y5(c,f))return g;var w=r(f);return i!==void 0&&i(g,w)?g:(c=f,d=w)}var u=!1,c,d,h=n===void 0?null:n;return[function(){return l(e())},h===null?void 0:function(){return l(h())}]},[e,n,r,i]);var a=v5(t,s[0],s[1]);return w5(function(){o.hasValue=!0,o.value=a},[a]),T5(a),a};Ex.exports=Tx;var S5=Ex.exports;function I5(t){t()}let Sx=I5;const k5=t=>Sx=t,C5=()=>Sx,vE=Symbol.for("react-redux-context"),_E=typeof globalThis<"u"?globalThis:{};function R5(){var t;if(!x.createContext)return{};const e=(t=_E[vE])!=null?t:_E[vE]=new Map;let n=e.get(x.createContext);return n||(n=x.createContext(null),e.set(x.createContext,n)),n}const Mi=R5();function b_(t=Mi){return function(){return x.useContext(t)}}const Ix=b_(),x5=()=>{throw new Error("uSES not initialized!")};let kx=x5;const A5=t=>{kx=t},P5=(t,e)=>t===e;function b5(t=Mi){const e=t===Mi?Ix:b_(t);return function(r,i={}){const{equalityFn:s=P5,stabilityCheck:o=void 0,noopCheck:a=void 0}=typeof i=="function"?{equalityFn:i}:i,{store:l,subscription:u,getServerState:c,stabilityCheck:d,noopCheck:h}=e();x.useRef(!0);const f=x.useCallback({[r.name](w){return r(w)}}[r.name],[r,d,o]),g=kx(u.addNestedSub,l.getState,c||l.getState,f,s);return x.useDebugValue(g),g}}const Vi=b5();var Cx={exports:{}},Re={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kt=typeof Symbol=="function"&&Symbol.for,N_=kt?Symbol.for("react.element"):60103,D_=kt?Symbol.for("react.portal"):60106,Rf=kt?Symbol.for("react.fragment"):60107,xf=kt?Symbol.for("react.strict_mode"):60108,Af=kt?Symbol.for("react.profiler"):60114,Pf=kt?Symbol.for("react.provider"):60109,bf=kt?Symbol.for("react.context"):60110,O_=kt?Symbol.for("react.async_mode"):60111,Nf=kt?Symbol.for("react.concurrent_mode"):60111,Df=kt?Symbol.for("react.forward_ref"):60112,Of=kt?Symbol.for("react.suspense"):60113,N5=kt?Symbol.for("react.suspense_list"):60120,Lf=kt?Symbol.for("react.memo"):60115,Mf=kt?Symbol.for("react.lazy"):60116,D5=kt?Symbol.for("react.block"):60121,O5=kt?Symbol.for("react.fundamental"):60117,L5=kt?Symbol.for("react.responder"):60118,M5=kt?Symbol.for("react.scope"):60119;function En(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case N_:switch(t=t.type,t){case O_:case Nf:case Rf:case Af:case xf:case Of:return t;default:switch(t=t&&t.$$typeof,t){case bf:case Df:case Mf:case Lf:case Pf:return t;default:return e}}case D_:return e}}}function Rx(t){return En(t)===Nf}Re.AsyncMode=O_;Re.ConcurrentMode=Nf;Re.ContextConsumer=bf;Re.ContextProvider=Pf;Re.Element=N_;Re.ForwardRef=Df;Re.Fragment=Rf;Re.Lazy=Mf;Re.Memo=Lf;Re.Portal=D_;Re.Profiler=Af;Re.StrictMode=xf;Re.Suspense=Of;Re.isAsyncMode=function(t){return Rx(t)||En(t)===O_};Re.isConcurrentMode=Rx;Re.isContextConsumer=function(t){return En(t)===bf};Re.isContextProvider=function(t){return En(t)===Pf};Re.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===N_};Re.isForwardRef=function(t){return En(t)===Df};Re.isFragment=function(t){return En(t)===Rf};Re.isLazy=function(t){return En(t)===Mf};Re.isMemo=function(t){return En(t)===Lf};Re.isPortal=function(t){return En(t)===D_};Re.isProfiler=function(t){return En(t)===Af};Re.isStrictMode=function(t){return En(t)===xf};Re.isSuspense=function(t){return En(t)===Of};Re.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Rf||t===Nf||t===Af||t===xf||t===Of||t===N5||typeof t=="object"&&t!==null&&(t.$$typeof===Mf||t.$$typeof===Lf||t.$$typeof===Pf||t.$$typeof===bf||t.$$typeof===Df||t.$$typeof===O5||t.$$typeof===L5||t.$$typeof===M5||t.$$typeof===D5)};Re.typeOf=En;Cx.exports=Re;var V5=Cx.exports,xx=V5,j5={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},F5={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Ax={};Ax[xx.ForwardRef]=j5;Ax[xx.Memo]=F5;var Ae={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L_=Symbol.for("react.element"),M_=Symbol.for("react.portal"),Vf=Symbol.for("react.fragment"),jf=Symbol.for("react.strict_mode"),Ff=Symbol.for("react.profiler"),$f=Symbol.for("react.provider"),Uf=Symbol.for("react.context"),$5=Symbol.for("react.server_context"),Bf=Symbol.for("react.forward_ref"),zf=Symbol.for("react.suspense"),Wf=Symbol.for("react.suspense_list"),qf=Symbol.for("react.memo"),Hf=Symbol.for("react.lazy"),U5=Symbol.for("react.offscreen"),Px;Px=Symbol.for("react.module.reference");function Dn(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case L_:switch(t=t.type,t){case Vf:case Ff:case jf:case zf:case Wf:return t;default:switch(t=t&&t.$$typeof,t){case $5:case Uf:case Bf:case Hf:case qf:case $f:return t;default:return e}}case M_:return e}}}Ae.ContextConsumer=Uf;Ae.ContextProvider=$f;Ae.Element=L_;Ae.ForwardRef=Bf;Ae.Fragment=Vf;Ae.Lazy=Hf;Ae.Memo=qf;Ae.Portal=M_;Ae.Profiler=Ff;Ae.StrictMode=jf;Ae.Suspense=zf;Ae.SuspenseList=Wf;Ae.isAsyncMode=function(){return!1};Ae.isConcurrentMode=function(){return!1};Ae.isContextConsumer=function(t){return Dn(t)===Uf};Ae.isContextProvider=function(t){return Dn(t)===$f};Ae.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===L_};Ae.isForwardRef=function(t){return Dn(t)===Bf};Ae.isFragment=function(t){return Dn(t)===Vf};Ae.isLazy=function(t){return Dn(t)===Hf};Ae.isMemo=function(t){return Dn(t)===qf};Ae.isPortal=function(t){return Dn(t)===M_};Ae.isProfiler=function(t){return Dn(t)===Ff};Ae.isStrictMode=function(t){return Dn(t)===jf};Ae.isSuspense=function(t){return Dn(t)===zf};Ae.isSuspenseList=function(t){return Dn(t)===Wf};Ae.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Vf||t===Ff||t===jf||t===zf||t===Wf||t===U5||typeof t=="object"&&t!==null&&(t.$$typeof===Hf||t.$$typeof===qf||t.$$typeof===$f||t.$$typeof===Uf||t.$$typeof===Bf||t.$$typeof===Px||t.getModuleId!==void 0)};Ae.typeOf=Dn;function B5(){const t=C5();let e=null,n=null;return{clear(){e=null,n=null},notify(){t(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){let r=[],i=e;for(;i;)r.push(i),i=i.next;return r},subscribe(r){let i=!0,s=n={callback:r,next:null,prev:n};return s.prev?s.prev.next=s:e=s,function(){!i||e===null||(i=!1,s.next?s.next.prev=s.prev:n=s.prev,s.prev?s.prev.next=s.next:e=s.next)}}}}const wE={notify(){},get:()=>[]};function z5(t,e){let n,r=wE,i=0,s=!1;function o(w){c();const E=r.subscribe(w);let v=!1;return()=>{v||(v=!0,E(),d())}}function a(){r.notify()}function l(){g.onStateChange&&g.onStateChange()}function u(){return s}function c(){i++,n||(n=e?e.addNestedSub(l):t.subscribe(l),r=B5())}function d(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=wE)}function h(){s||(s=!0,c())}function f(){s&&(s=!1,d())}const g={addNestedSub:o,notifyNestedSubs:a,handleChangeWrapper:l,isSubscribed:u,trySubscribe:h,tryUnsubscribe:f,getListeners:()=>r};return g}const W5=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",q5=W5?x.useLayoutEffect:x.useEffect;function H5({store:t,context:e,children:n,serverState:r,stabilityCheck:i="once",noopCheck:s="once"}){const o=x.useMemo(()=>{const u=z5(t);return{store:t,subscription:u,getServerState:r?()=>r:void 0,stabilityCheck:i,noopCheck:s}},[t,r,i,s]),a=x.useMemo(()=>t.getState(),[t]);q5(()=>{const{subscription:u}=o;return u.onStateChange=u.notifyNestedSubs,u.trySubscribe(),a!==t.getState()&&u.notifyNestedSubs(),()=>{u.tryUnsubscribe(),u.onStateChange=void 0}},[o,a]);const l=e||Mi;return x.createElement(l.Provider,{value:o},n)}function bx(t=Mi){const e=t===Mi?Ix:b_(t);return function(){const{store:r}=e();return r}}const G5=bx();function K5(t=Mi){const e=t===Mi?G5:bx(t);return function(){return e().dispatch}}const Fu=K5();A5(S5.useSyncExternalStoreWithSelector);k5(aI.unstable_batchedUpdates);const Js="4.19.0";let EE=!1,pl,Nx,Dx,Jg,Ox,Lx,Mx,Vx,jx;function Q5(t,e={auto:!1}){if(EE)throw new Error(`you must \`import 'openai/shims/${t.kind}'\` before importing anything else from openai`);if(pl)throw new Error(`can't \`import 'openai/shims/${t.kind}'\` after \`import 'openai/shims/${pl}'\``);EE=e.auto,pl=t.kind,Nx=t.fetch,t.Request,t.Response,t.Headers,Dx=t.FormData,t.Blob,Jg=t.File,Ox=t.ReadableStream,Lx=t.getMultipartRequestOptions,Mx=t.getDefaultAgent,Vx=t.fileFromPath,jx=t.isFsReadStream}class X5{constructor(e){this.body=e}get[Symbol.toStringTag](){return"MultipartBody"}}function Y5({manuallyImported:t}={}){const e=t?"You may need to use polyfills":"Add one of these imports before your first `import  from 'openai'`:\n- `import 'openai/shims/node'` (if you're running on Node)\n- `import 'openai/shims/web'` (otherwise)\n";let n,r,i,s;try{n=fetch,r=Request,i=Response,s=Headers}catch(o){throw new Error(`this environment is missing the following Web Fetch API type: ${o.message}. ${e}`)}return{kind:"web",fetch:n,Request:r,Response:i,Headers:s,FormData:typeof FormData<"u"?FormData:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${e}`)}},Blob:typeof Blob<"u"?Blob:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${e}`)}},File:typeof File<"u"?File:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${e}`)}},ReadableStream:typeof ReadableStream<"u"?ReadableStream:class{constructor(){throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${e}`)}},getMultipartRequestOptions:async(o,a)=>({...a,body:new X5(o)}),getDefaultAgent:o=>{},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads")},isFsReadStream:o=>!1}}pl||Q5(Y5(),{auto:!0});class Se extends Error{}class Gt extends Se{constructor(e,n,r,i){super(`${Gt.makeMessage(e,n,r)}`),this.status=e,this.headers=i;const s=n;this.error=s,this.code=s==null?void 0:s.code,this.param=s==null?void 0:s.param,this.type=s==null?void 0:s.type}static makeMessage(e,n,r){const i=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return e&&i?`${e} ${i}`:e?`${e} status code (no body)`:i||"(no status code or body)"}static generate(e,n,r,i){if(!e)return new Gf({cause:ey(n)});const s=n==null?void 0:n.error;return e===400?new Fx(e,s,r,i):e===401?new $x(e,s,r,i):e===403?new Ux(e,s,r,i):e===404?new Bx(e,s,r,i):e===409?new zx(e,s,r,i):e===422?new Wx(e,s,r,i):e===429?new qx(e,s,r,i):e>=500?new Hx(e,s,r,i):new Gt(e,s,r,i)}}class As extends Gt{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0),this.status=void 0}}class Gf extends Gt{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),this.status=void 0,n&&(this.cause=n)}}class V_ extends Gf{constructor({message:e}={}){super({message:e??"Request timed out."})}}class Fx extends Gt{constructor(){super(...arguments),this.status=400}}class $x extends Gt{constructor(){super(...arguments),this.status=401}}class Ux extends Gt{constructor(){super(...arguments),this.status=403}}class Bx extends Gt{constructor(){super(...arguments),this.status=404}}class zx extends Gt{constructor(){super(...arguments),this.status=409}}class Wx extends Gt{constructor(){super(...arguments),this.status=422}}class qx extends Gt{constructor(){super(...arguments),this.status=429}}class Hx extends Gt{}class gi{constructor(e,n){this.iterator=e,this.controller=n}static fromSSEResponse(e,n){let r=!1;const i=new J5;async function*s(){if(!e.body)throw n.abort(),new Se("Attempted to iterate over a response with no body");const a=new Ps,l=TE(e.body);for await(const u of l)for(const c of a.decode(u)){const d=i.decode(c);d&&(yield d)}for(const u of a.flush()){const c=i.decode(u);c&&(yield c)}}async function*o(){if(r)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let a=!1;try{for await(const l of s())if(!a){if(l.data.startsWith("[DONE]")){a=!0;continue}if(l.event===null){let u;try{u=JSON.parse(l.data)}catch(c){throw console.error("Could not parse message into JSON:",l.data),console.error("From chunk:",l.raw),c}if(u&&u.error)throw new Gt(void 0,u.error,void 0,void 0);yield u}}a=!0}catch(l){if(l instanceof Error&&l.name==="AbortError")return;throw l}finally{a||n.abort()}}return new gi(o,n)}static fromReadableStream(e,n){let r=!1;async function*i(){const o=new Ps,a=TE(e);for await(const l of a)for(const u of o.decode(l))yield u;for(const l of o.flush())yield l}async function*s(){if(r)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let o=!1;try{for await(const a of i())o||a&&(yield JSON.parse(a));o=!0}catch(a){if(a instanceof Error&&a.name==="AbortError")return;throw a}finally{o||n.abort()}}return new gi(s,n)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],r=this.iterator(),i=s=>({next:()=>{if(s.length===0){const o=r.next();e.push(o),n.push(o)}return s.shift()}});return[new gi(()=>i(e),this.controller),new gi(()=>i(n),this.controller)]}toReadableStream(){const e=this;let n;const r=new TextEncoder;return new Ox({async start(){n=e[Symbol.asyncIterator]()},async pull(i){try{const{value:s,done:o}=await n.next();if(o)return i.close();const a=r.encode(JSON.stringify(s)+`
`);i.enqueue(a)}catch(s){i.error(s)}},async cancel(){var i;await((i=n.return)==null?void 0:i.call(n))}})}}class J5{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const s={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],s}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,r,i]=Z5(e,":");return i.startsWith(" ")&&(i=i.substring(1)),n==="event"?this.event=i:n==="data"&&this.data.push(i),null}}class Ps{constructor(){this.buffer=[],this.trailingCR=!1}decode(e){let n=this.decodeText(e);if(this.trailingCR&&(n="\r"+n,this.trailingCR=!1),n.endsWith("\r")&&(this.trailingCR=!0,n=n.slice(0,-1)),!n)return[];const r=Ps.NEWLINE_CHARS.has(n[n.length-1]||"");let i=n.split(Ps.NEWLINE_REGEXP);return i.length===1&&!r?(this.buffer.push(i[0]),[]):(this.buffer.length>0&&(i=[this.buffer.join("")+i[0],...i.slice(1)],this.buffer=[]),r||(this.buffer=[i.pop()||""]),i)}decodeText(e){if(e==null)return"";if(typeof e=="string")return e;if(typeof Buffer<"u"){if(e instanceof Buffer)return e.toString();if(e instanceof Uint8Array)return Buffer.from(e).toString();throw new Se(`Unexpected: received non-Uint8Array (${e.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if(typeof TextDecoder<"u"){if(e instanceof Uint8Array||e instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(e);throw new Se(`Unexpected: received non-Uint8Array/ArrayBuffer (${e.constructor.name}) in a web platform. Please report this error.`)}throw new Se("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){if(!this.buffer.length&&!this.trailingCR)return[];const e=[this.buffer.join("")];return this.buffer=[],this.trailingCR=!1,e}}Ps.NEWLINE_CHARS=new Set([`
`,"\r","\v","\f","","","","","\u2028","\u2029"]);Ps.NEWLINE_REGEXP=/\r\n|[\n\r\x0b\x0c\x1c\x1d\x1e\x85\u2028\u2029]/g;function Z5(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}function TE(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}const Gx=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function",ej=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&Kx(t),Kx=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",tj=t=>ej(t)||Gx(t)||jx(t);async function Qx(t,e,n={}){var i;if(t=await t,Gx(t)){const s=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()??"unknown_file"),new Jg([s],e,n)}const r=await nj(t);if(e||(e=ij(t)??"unknown_file"),!n.type){const s=(i=r[0])==null?void 0:i.type;typeof s=="string"&&(n={...n,type:s})}return new Jg(r,e,n)}async function nj(t){var n;let e=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)e.push(t);else if(Kx(t))e.push(await t.arrayBuffer());else if(sj(t))for await(const r of t)e.push(r);else throw new Error(`Unexpected data type: ${typeof t}; constructor: ${(n=t==null?void 0:t.constructor)==null?void 0:n.name}; props: ${rj(t)}`);return e}function rj(t){return`[${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}function ij(t){var e;return lm(t.name)||lm(t.filename)||((e=lm(t.path))==null?void 0:e.split(/[\\/]/).pop())}const lm=t=>{if(typeof t=="string")return t;if(typeof Buffer<"u"&&t instanceof Buffer)return String(t)},sj=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function",SE=t=>t&&typeof t=="object"&&t.body&&t[Symbol.toStringTag]==="MultipartBody",Jl=async t=>{const e=await oj(t.body);return Lx(e,t)},oj=async t=>{const e=new Dx;return await Promise.all(Object.entries(t||{}).map(([n,r])=>Zg(e,n,r))),e},Zg=async(t,e,n)=>{if(n!==void 0){if(n==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")t.append(e,String(n));else if(tj(n)){const r=await Qx(n);t.append(e,r)}else if(Array.isArray(n))await Promise.all(n.map(r=>Zg(t,e+"[]",r)));else if(typeof n=="object")await Promise.all(Object.entries(n).map(([r,i])=>Zg(t,`${e}[${r}]`,i)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`)}};var aj=globalThis&&globalThis.__classPrivateFieldSet||function(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n},lj=globalThis&&globalThis.__classPrivateFieldGet||function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},_c;async function Xx(t){const{response:e}=t;if(t.options.stream)return ml("response",e.status,e.url,e.headers,e.body),gi.fromSSEResponse(e,t.controller);if(e.status===204)return null;if(t.options.__binaryResponse)return e;const n=e.headers.get("content-type");if(n!=null&&n.includes("application/json")){const i=await e.json();return ml("response",e.status,e.url,e.headers,i),i}const r=await e.text();return ml("response",e.status,e.url,e.headers,r),r}class Kf extends Promise{constructor(e,n=Xx){super(r=>{r(null)}),this.responsePromise=e,this.parseResponse=n}_thenUnwrap(e){return new Kf(this.responsePromise,async n=>e(await this.parseResponse(n)))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}class uj{constructor({baseURL:e,maxRetries:n=2,timeout:r=6e5,httpAgent:i,fetch:s}){this.baseURL=e,this.maxRetries=um("maxRetries",n),this.timeout=um("timeout",r),this.httpAgent=i,this.fetch=s??Nx}authHeaders(e){return{}}defaultHeaders(e){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...mj(),...this.authHeaders(e)}}validateHeaders(e,n){}defaultIdempotencyKey(){return`stainless-node-retry-${wj()}`}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,r){return this.request(Promise.resolve(r).then(i=>({method:e,path:n,...i})))}getAPIList(e,n,r){return this.requestAPIList(n,{method:"get",path:e,...r})}calculateContentLength(e){if(typeof e=="string"){if(typeof Buffer<"u")return Buffer.byteLength(e,"utf8").toString();if(typeof TextEncoder<"u")return new TextEncoder().encode(e).length.toString()}return null}buildRequest(e){var g;const{method:n,path:r,query:i,headers:s={}}=e,o=SE(e.body)?e.body.body:e.body?JSON.stringify(e.body,null,2):null,a=this.calculateContentLength(o),l=this.buildURL(r,i);"timeout"in e&&um("timeout",e.timeout);const u=e.timeout??this.timeout,c=e.httpAgent??this.httpAgent??Mx(l),d=u+1e3;typeof((g=c==null?void 0:c.options)==null?void 0:g.timeout)=="number"&&d>(c.options.timeout??0)&&(c.options.timeout=d),this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),s[this.idempotencyHeader]=e.idempotencyKey);const h={...a&&{"Content-Length":a},...this.defaultHeaders(e),...s};SE(e.body)&&pl!=="node"&&delete h["Content-Type"],Object.keys(h).forEach(w=>h[w]===null&&delete h[w]);const f={method:n,...o&&{body:o},headers:h,...c&&{agent:c},signal:e.signal??null};return this.validateHeaders(h,s),{req:f,url:l,timeout:u}}async prepareRequest(e,{url:n,options:r}){}parseHeaders(e){return e?Symbol.iterator in e?Object.fromEntries(Array.from(e).map(n=>[...n])):{...e}:{}}makeStatusError(e,n,r,i){return Gt.generate(e,n,r,i)}request(e,n=null){return new Kf(this.makeRequest(e,n))}async makeRequest(e,n){var c,d;const r=await e;n==null&&(n=r.maxRetries??this.maxRetries);const{req:i,url:s,timeout:o}=this.buildRequest(r);if(await this.prepareRequest(i,{url:s,options:r}),ml("request",s,r,i.headers),(c=r.signal)!=null&&c.aborted)throw new As;const a=new AbortController,l=await this.fetchWithTimeout(s,i,o,a).catch(ey);if(l instanceof Error){if((d=r.signal)!=null&&d.aborted)throw new As;if(n)return this.retryRequest(r,n);throw l.name==="AbortError"?new V_:new Gf({cause:l})}const u=hj(l.headers);if(!l.ok){if(n&&this.shouldRetry(l))return this.retryRequest(r,n,u);const h=await l.text().catch(E=>ey(E).message),f=gj(h),g=f?void 0:h;throw ml("response",l.status,s,u,g),this.makeStatusError(l.status,f,g,u)}return{response:l,options:r,controller:a}}requestAPIList(e,n){const r=this.makeRequest(n,null);return new cj(this,r,e)}buildURL(e,n){const r=vj(e)?new URL(e):new URL(this.baseURL+(this.baseURL.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),i=this.defaultQuery();return Zx(i)||(n={...i,...n}),n&&(r.search=this.stringifyQuery(n)),r.toString()}stringifyQuery(e){return Object.entries(e).filter(([n,r])=>typeof r<"u").map(([n,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(n)}=`;throw new Se(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}async fetchWithTimeout(e,n,r,i){const{signal:s,...o}=n||{};s&&s.addEventListener("abort",()=>i.abort());const a=setTimeout(()=>i.abort(),r);return this.getRequestClient().fetch.call(void 0,e,{signal:i.signal,...o}).finally(()=>{clearTimeout(a)})}getRequestClient(){return{fetch:this.fetch}}shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,r){let i;const s=r==null?void 0:r["retry-after"];if(s){const o=parseInt(s);Number.isNaN(o)?i=Date.parse(s)-Date.now():i=o*1e3}if(!i||!Number.isInteger(i)||i<=0||i>60*1e3){const o=e.maxRetries??this.maxRetries;i=this.calculateDefaultRetryTimeoutMillis(n,o)}return await Jx(i),this.makeRequest(e,n-1)}calculateDefaultRetryTimeoutMillis(e,n){const s=n-e,o=Math.min(.5*Math.pow(2,s),8),a=1-Math.random()*.25;return o*a*1e3}getUserAgent(){return`${this.constructor.name}/JS ${Js}`}}class Yx{constructor(e,n,r,i){_c.set(this,void 0),aj(this,_c,e,"f"),this.options=i,this.response=n,this.body=r}hasNextPage(){return this.getPaginatedItems().length?this.nextPageInfo()!=null:!1}async getNextPage(){const e=this.nextPageInfo();if(!e)throw new Se("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");const n={...this.options};if("params"in e)n.query={...n.query,...e.params};else if("url"in e){const r=[...Object.entries(n.query||{}),...e.url.searchParams.entries()];for(const[i,s]of r)e.url.searchParams.set(i,s);n.query=void 0,n.path=e.url.toString()}return await lj(this,_c,"f").requestAPIList(this.constructor,n)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(_c=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const n of e.getPaginatedItems())yield n}}class cj extends Kf{constructor(e,n,r){super(n,async i=>new r(e,i.response,await Xx(i),i.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const n of e)yield n}}const hj=t=>new Proxy(Object.fromEntries(t.entries()),{get(e,n){const r=n.toString();return e[r.toLowerCase()]||e[r]}}),dj={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0,__binaryResponse:!0},gr=t=>typeof t=="object"&&t!==null&&!Zx(t)&&Object.keys(t).every(e=>_j(dj,e)),fj=()=>{if(typeof Deno<"u"&&Deno.build!=null)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Js,"X-Stainless-OS":kE(Deno.build.os),"X-Stainless-Arch":IE(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":Deno.version};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Js,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if(Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Js,"X-Stainless-OS":kE(process.platform),"X-Stainless-Arch":IE(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};const t=pj();return t?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Js,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${t.browser}`,"X-Stainless-Runtime-Version":t.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Js,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function pj(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const r=n.exec(navigator.userAgent);if(r){const i=r[1]||0,s=r[2]||0,o=r[3]||0;return{browser:e,version:`${i}.${s}.${o}`}}}return null}const IE=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",kE=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let CE;const mj=()=>CE??(CE=fj()),gj=t=>{try{return JSON.parse(t)}catch{return}},yj=new RegExp("^(?:[a-z]+:)?//","i"),vj=t=>yj.test(t),Jx=t=>new Promise(e=>setTimeout(e,t)),um=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Se(`${t} must be an integer`);if(e<0)throw new Se(`${t} must be a positive integer`);return e},ey=t=>t instanceof Error?t:new Error(t),RE=t=>{var e,n,r;if(typeof process<"u")return((e=process.env)==null?void 0:e[t])??void 0;if(typeof Deno<"u")return(r=(n=Deno.env)==null?void 0:n.get)==null?void 0:r.call(n,t)};function Zx(t){if(!t)return!0;for(const e in t)return!1;return!0}function _j(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function ml(t,...e){typeof process<"u"&&process.env.DEBUG==="true"&&console.log(`OpenAI:DEBUG:${t}`,...e)}const wj=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)}),Ej=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";class Qf extends Yx{constructor(e,n,r,i){super(e,n,r,i),this.data=r.data,this.object=r.object}getPaginatedItems(){return this.data}nextPageParams(){return null}nextPageInfo(){return null}}class Xr extends Yx{constructor(e,n,r,i){super(e,n,r,i),this.data=r.data}getPaginatedItems(){return this.data}nextPageParams(){const e=this.nextPageInfo();if(!e)return null;if("params"in e)return e.params;const n=Object.fromEntries(e.url.searchParams);return Object.keys(n).length?n:null}nextPageInfo(){var n,r;if(!((n=this.data)!=null&&n.length))return null;const e=(r=this.data[this.data.length-1])==null?void 0:r.id;return e?{params:{after:e}}:null}}class Oe{constructor(e){this._client=e}}let Gh=class extends Oe{create(e,n){return this._client.post("/chat/completions",{body:e,...n,stream:e.stream??!1})}};Gh||(Gh={});let Kh=class extends Oe{constructor(){super(...arguments),this.completions=new Gh(this._client)}};(function(t){t.Completions=Gh})(Kh||(Kh={}));class Qh extends Oe{create(e,n){return this._client.post("/audio/speech",{body:e,...n,__binaryResponse:!0})}}Qh||(Qh={});class Xh extends Oe{create(e,n){return this._client.post("/audio/transcriptions",Jl({body:e,...n}))}}Xh||(Xh={});class Yh extends Oe{create(e,n){return this._client.post("/audio/translations",Jl({body:e,...n}))}}Yh||(Yh={});class Jh extends Oe{constructor(){super(...arguments),this.transcriptions=new Xh(this._client),this.translations=new Yh(this._client),this.speech=new Qh(this._client)}}(function(t){t.Transcriptions=Xh,t.Translations=Yh,t.Speech=Qh})(Jh||(Jh={}));let Zh=class extends Oe{create(e,n,r){return this._client.post(`/assistants/${e}/files`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v1",...r==null?void 0:r.headers}})}retrieve(e,n,r){return this._client.get(`/assistants/${e}/files/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v1",...r==null?void 0:r.headers}})}list(e,n={},r){return gr(n)?this.list(e,{},n):this._client.getAPIList(`/assistants/${e}/files`,j_,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v1",...r==null?void 0:r.headers}})}del(e,n,r){return this._client.delete(`/assistants/${e}/files/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v1",...r==null?void 0:r.headers}})}};class j_ extends Xr{}(function(t){t.AssistantFilesPage=j_})(Zh||(Zh={}));class ed extends Oe{constructor(){super(...arguments),this.files=new Zh(this._client)}create(e,n){return this._client.post("/assistants",{body:e,...n,headers:{"OpenAI-Beta":"assistants=v1",...n==null?void 0:n.headers}})}retrieve(e,n){return this._client.get(`/assistants/${e}`,{...n,headers:{"OpenAI-Beta":"assistants=v1",...n==null?void 0:n.headers}})}update(e,n,r){return this._client.post(`/assistants/${e}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v1",...r==null?void 0:r.headers}})}list(e={},n){return gr(e)?this.list({},e):this._client.getAPIList("/assistants",F_,{query:e,...n,headers:{"OpenAI-Beta":"assistants=v1",...n==null?void 0:n.headers}})}del(e,n){return this._client.delete(`/assistants/${e}`,{...n,headers:{"OpenAI-Beta":"assistants=v1",...n==null?void 0:n.headers}})}}class F_ extends Xr{}(function(t){t.AssistantsPage=F_,t.Files=Zh,t.AssistantFilesPage=j_})(ed||(ed={}));function xE(t){return typeof t.parse=="function"}const Zl=t=>(t==null?void 0:t.role)==="assistant",eA=t=>(t==null?void 0:t.role)==="function",Tj=t=>(t==null?void 0:t.role)==="tool";var Mn=globalThis&&globalThis.__classPrivateFieldSet||function(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n},fe=globalThis&&globalThis.__classPrivateFieldGet||function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},Qt,zc,Wc,Ha,Ga,qc,Ka,kr,Qa,Hc,Gc,Zs,ty,ny,ry,iy,sy,oy,tA,ay;const AE=10;class nA{constructor(){Qt.add(this),this.controller=new AbortController,zc.set(this,void 0),Wc.set(this,()=>{}),Ha.set(this,()=>{}),Ga.set(this,void 0),qc.set(this,()=>{}),Ka.set(this,()=>{}),kr.set(this,{}),this._chatCompletions=[],this.messages=[],Qa.set(this,!1),Hc.set(this,!1),Gc.set(this,!1),Zs.set(this,!1),oy.set(this,e=>{if(Mn(this,Hc,!0,"f"),e instanceof Error&&e.name==="AbortError"&&(e=new As),e instanceof As)return Mn(this,Gc,!0,"f"),this._emit("abort",e);if(e instanceof Se)return this._emit("error",e);if(e instanceof Error){const n=new Se(e.message);return n.cause=e,this._emit("error",n)}return this._emit("error",new Se(String(e)))}),Mn(this,zc,new Promise((e,n)=>{Mn(this,Wc,e,"f"),Mn(this,Ha,n,"f")}),"f"),Mn(this,Ga,new Promise((e,n)=>{Mn(this,qc,e,"f"),Mn(this,Ka,n,"f")}),"f"),fe(this,zc,"f").catch(()=>{}),fe(this,Ga,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},fe(this,oy,"f"))},0)}_addChatCompletion(e){var r;this._chatCompletions.push(e),this._emit("chatCompletion",e);const n=(r=e.choices[0])==null?void 0:r.message;return n&&this._addMessage(n),e}_addMessage(e,n=!0){if(this.messages.push(e),n){if(this._emit("message",e),(eA(e)||Tj(e))&&e.content)this._emit("functionCallResult",e.content);else if(Zl(e)&&e.function_call)this._emit("functionCall",e.function_call);else if(Zl(e)&&e.tool_calls)for(const r of e.tool_calls)r.type==="function"&&this._emit("functionCall",r.function)}}_connected(){this.ended||(fe(this,Wc,"f").call(this),this._emit("connect"))}get ended(){return fe(this,Qa,"f")}get errored(){return fe(this,Hc,"f")}get aborted(){return fe(this,Gc,"f")}abort(){this.controller.abort()}on(e,n){return(fe(this,kr,"f")[e]||(fe(this,kr,"f")[e]=[])).push({listener:n}),this}off(e,n){const r=fe(this,kr,"f")[e];if(!r)return this;const i=r.findIndex(s=>s.listener===n);return i>=0&&r.splice(i,1),this}once(e,n){return(fe(this,kr,"f")[e]||(fe(this,kr,"f")[e]=[])).push({listener:n,once:!0}),this}emitted(e){return new Promise((n,r)=>{Mn(this,Zs,!0,"f"),e!=="error"&&this.once("error",r),this.once(e,n)})}async done(){Mn(this,Zs,!0,"f"),await fe(this,Ga,"f")}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new Se("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),fe(this,Qt,"m",ty).call(this)}async finalMessage(){return await this.done(),fe(this,Qt,"m",ny).call(this)}async finalFunctionCall(){return await this.done(),fe(this,Qt,"m",ry).call(this)}async finalFunctionCallResult(){return await this.done(),fe(this,Qt,"m",iy).call(this)}async totalUsage(){return await this.done(),fe(this,Qt,"m",sy).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emit(e,...n){if(fe(this,Qa,"f"))return;e==="end"&&(Mn(this,Qa,!0,"f"),fe(this,qc,"f").call(this));const r=fe(this,kr,"f")[e];if(r&&(fe(this,kr,"f")[e]=r.filter(i=>!i.once),r.forEach(({listener:i})=>i(...n))),e==="abort"){const i=n[0];!fe(this,Zs,"f")&&!(r!=null&&r.length)&&Promise.reject(i),fe(this,Ha,"f").call(this,i),fe(this,Ka,"f").call(this,i),this._emit("end");return}if(e==="error"){const i=n[0];!fe(this,Zs,"f")&&!(r!=null&&r.length)&&Promise.reject(i),fe(this,Ha,"f").call(this,i),fe(this,Ka,"f").call(this,i),this._emit("end")}}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const n=this.messages[this.messages.length-1];n&&this._emit("finalMessage",n);const r=fe(this,Qt,"m",ty).call(this);r&&this._emit("finalContent",r);const i=fe(this,Qt,"m",ry).call(this);i&&this._emit("finalFunctionCall",i);const s=fe(this,Qt,"m",iy).call(this);s!=null&&this._emit("finalFunctionCallResult",s),this._chatCompletions.some(o=>o.usage)&&this._emit("totalUsage",fe(this,Qt,"m",sy).call(this))}async _createChatCompletion(e,n,r){const i=r==null?void 0:r.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),fe(this,Qt,"m",tA).call(this,n);const s=await e.create({...n,stream:!1},{...r,signal:this.controller.signal});return this._connected(),this._addChatCompletion(s)}async _runChatCompletion(e,n,r){for(const i of n.messages)this._addMessage(i,!1);return await this._createChatCompletion(e,n,r)}async _runFunctions(e,n,r){var h;const i="function",{function_call:s="auto",stream:o,...a}=n,l=typeof s!="string"&&(s==null?void 0:s.name),{maxChatCompletions:u=AE}=r||{},c={};for(const f of n.functions)c[f.name||f.function.name]=f;const d=n.functions.map(f=>({name:f.name||f.function.name,parameters:f.parameters,description:f.description}));for(const f of n.messages)this._addMessage(f,!1);for(let f=0;f<u;++f){const w=(h=(await this._createChatCompletion(e,{...a,function_call:s,functions:d,messages:[...this.messages]},r)).choices[0])==null?void 0:h.message;if(!w)throw new Se("missing message in ChatCompletion response");if(!w.function_call)return;const{name:E,arguments:v}=w.function_call,p=c[E];if(p){if(l&&l!==E){const C=`Invalid function_call: ${JSON.stringify(E)}. ${JSON.stringify(l)} requested. Please try again`;this._addMessage({role:i,name:E,content:C});continue}}else{const C=`Invalid function_call: ${JSON.stringify(E)}. Available options are: ${d.map(A=>JSON.stringify(A.name)).join(", ")}. Please try again`;this._addMessage({role:i,name:E,content:C});continue}let _;try{_=xE(p)?await p.parse(v):v}catch(C){this._addMessage({role:i,name:E,content:C instanceof Error?C.message:String(C)});continue}const y=await p.function(_,this),S=fe(this,Qt,"m",ay).call(this,y);if(this._addMessage({role:i,name:E,content:S}),l)return}}async _runTools(e,n,r){var h,f;const i="tool",{tool_choice:s="auto",stream:o,...a}=n,l=typeof s!="string"&&((h=s==null?void 0:s.function)==null?void 0:h.name),{maxChatCompletions:u=AE}=r||{},c={};for(const g of n.tools)g.type==="function"&&(c[g.function.name||g.function.function.name]=g.function);const d="tools"in n?n.tools.map(g=>g.type==="function"?{type:"function",function:{name:g.function.name||g.function.function.name,parameters:g.function.parameters,description:g.function.description}}:g):void 0;for(const g of n.messages)this._addMessage(g,!1);for(let g=0;g<u;++g){const E=(f=(await this._createChatCompletion(e,{...a,tool_choice:s,tools:d,messages:[...this.messages]},r)).choices[0])==null?void 0:f.message;if(!E)throw new Se("missing message in ChatCompletion response");if(!E.tool_calls)return;for(const v of E.tool_calls){if(v.type!=="function")continue;const p=v.id,{name:_,arguments:y}=v.function,S=c[_];if(S){if(l&&l!==_){const O=`Invalid tool_call: ${JSON.stringify(_)}. ${JSON.stringify(l)} requested. Please try again`;this._addMessage({role:i,tool_call_id:p,content:O});continue}}else{const O=`Invalid tool_call: ${JSON.stringify(_)}. Available options are: ${d.map(M=>JSON.stringify(M.function.name)).join(", ")}. Please try again`;this._addMessage({role:i,tool_call_id:p,content:O});continue}let C;try{C=xE(S)?await S.parse(y):y}catch(O){const M=O instanceof Error?O.message:String(O);this._addMessage({role:i,tool_call_id:p,content:M});continue}const A=await S.function(C,this),P=fe(this,Qt,"m",ay).call(this,A);if(this._addMessage({role:i,tool_call_id:p,content:P}),l)return}}}}zc=new WeakMap,Wc=new WeakMap,Ha=new WeakMap,Ga=new WeakMap,qc=new WeakMap,Ka=new WeakMap,kr=new WeakMap,Qa=new WeakMap,Hc=new WeakMap,Gc=new WeakMap,Zs=new WeakMap,oy=new WeakMap,Qt=new WeakSet,ty=function(){return fe(this,Qt,"m",ny).call(this).content},ny=function(){let e=this.messages.length;for(;e-- >0;){const n=this.messages[e];if(Zl(n))return n}throw new Se("stream ended without producing a ChatCompletionMessage with role=assistant")},ry=function(){for(let e=this.messages.length-1;e>=0;e--){const n=this.messages[e];if(Zl(n)&&(n!=null&&n.function_call))return n.function_call}},iy=function(){for(let e=this.messages.length-1;e>=0;e--){const n=this.messages[e];if(eA(n)&&n.content!=null)return n.content}},sy=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:n}of this._chatCompletions)n&&(e.completion_tokens+=n.completion_tokens,e.prompt_tokens+=n.prompt_tokens,e.total_tokens+=n.total_tokens);return e},tA=function(e){if(e.n!=null&&e.n>1)throw new Se("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},ay=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class eu extends nA{static runFunctions(e,n,r){const i=new eu;return i._run(()=>i._runFunctions(e,n,r)),i}static runTools(e,n,r){const i=new eu;return i._run(()=>i._runTools(e,n,r)),i}_addMessage(e){super._addMessage(e),Zl(e)&&e.content&&this._emit("content",e.content)}}var Vn=globalThis&&globalThis.__classPrivateFieldGet||function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},cm=globalThis&&globalThis.__classPrivateFieldSet||function(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n},Jn,ti,hm,dm,wc,PE;class tu extends nA{constructor(){super(...arguments),Jn.add(this),ti.set(this,void 0)}get currentChatCompletionSnapshot(){return Vn(this,ti,"f")}static fromReadableStream(e){const n=new tu;return n._run(()=>n._fromReadableStream(e)),n}static createChatCompletion(e,n,r){const i=new tu;return i._run(()=>i._runChatCompletion(e,{...n,stream:!0},{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createChatCompletion(e,n,r){var o;const i=r==null?void 0:r.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),Vn(this,Jn,"m",hm).call(this);const s=await e.create({...n,stream:!0},{...r,signal:this.controller.signal});this._connected();for await(const a of s)Vn(this,Jn,"m",dm).call(this,a);if((o=s.controller.signal)!=null&&o.aborted)throw new As;return this._addChatCompletion(Vn(this,Jn,"m",wc).call(this))}async _fromReadableStream(e,n){var o;const r=n==null?void 0:n.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),Vn(this,Jn,"m",hm).call(this),this._connected();const i=gi.fromReadableStream(e,this.controller);let s;for await(const a of i)s&&s!==a.id&&this._addChatCompletion(Vn(this,Jn,"m",wc).call(this)),Vn(this,Jn,"m",dm).call(this,a),s=a.id;if((o=i.controller.signal)!=null&&o.aborted)throw new As;return this._addChatCompletion(Vn(this,Jn,"m",wc).call(this))}[(ti=new WeakMap,Jn=new WeakSet,hm=function(){this.ended||cm(this,ti,void 0,"f")},dm=function(n){var o,a,l;if(this.ended)return;const r=Vn(this,Jn,"m",PE).call(this,n);this._emit("chunk",n,r);const i=(a=(o=n.choices[0])==null?void 0:o.delta)==null?void 0:a.content,s=(l=r.choices[0])==null?void 0:l.message;i!=null&&(s==null?void 0:s.role)==="assistant"&&(s!=null&&s.content)&&this._emit("content",i,s.content)},wc=function(){if(this.ended)throw new Se("stream has ended, this shouldn't happen");const n=Vn(this,ti,"f");if(!n)throw new Se("request ended without sending any chunks");return cm(this,ti,void 0,"f"),Sj(n)},PE=function(n){var r,i;let s=Vn(this,ti,"f");const{choices:o,...a}=n;s?Object.assign(s,a):s=cm(this,ti,{...a,choices:[]},"f");for(const{delta:l,finish_reason:u,index:c,...d}of n.choices){let h=s.choices[c];if(!h){s.choices[c]={finish_reason:u,index:c,message:l,...d};continue}if(u&&(h.finish_reason=u),Object.assign(h,d),!l)continue;const{content:f,function_call:g,role:w,tool_calls:E}=l;if(f&&(h.message.content=(h.message.content||"")+f),w&&(h.message.role=w),g&&(h.message.function_call?(g.name&&(h.message.function_call.name=g.name),g.arguments&&((r=h.message.function_call).arguments??(r.arguments=""),h.message.function_call.arguments+=g.arguments)):h.message.function_call=g),E){h.message.tool_calls||(h.message.tool_calls=[]);for(const{index:v,id:p,type:_,function:y}of E){const S=(i=h.message.tool_calls)[v]??(i[v]={});p&&(S.id=p),_&&(S.type=_),y&&(S.function??(S.function={arguments:""})),y!=null&&y.name&&(S.function.name=y.name),y!=null&&y.arguments&&(S.function.arguments+=y.arguments)}}}return s},Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("chunk",i=>{const s=n.shift();s?s(i):e.push(i)}),this.on("end",()=>{r=!0;for(const i of n)i(void 0);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise(s=>n.push(s)).then(s=>s?{value:s,done:!1}:{value:void 0,done:!0})}}toReadableStream(){return new gi(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function Sj(t){const{id:e,choices:n,created:r,model:i}=t;return{id:e,choices:n.map(({message:s,finish_reason:o,index:a})=>{if(!o)throw new Se(`missing finish_reason for choice ${a}`);const{content:l=null,function_call:u,tool_calls:c}=s,d=s.role;if(!d)throw new Se(`missing role for choice ${a}`);if(u){const{arguments:h,name:f}=u;if(h==null)throw new Se(`missing function_call.arguments for choice ${a}`);if(!f)throw new Se(`missing function_call.name for choice ${a}`);return{message:{content:l,function_call:{arguments:h,name:f},role:d},finish_reason:o,index:a}}return c?{index:a,finish_reason:o,message:{role:d,content:l,tool_calls:c.map((h,f)=>{const{function:g,type:w,id:E}=h,{arguments:v,name:p}=g||{};if(E==null)throw new Se(`missing choices[${a}].tool_calls[${f}].id
${Ec(t)}`);if(w==null)throw new Se(`missing choices[${a}].tool_calls[${f}].type
${Ec(t)}`);if(p==null)throw new Se(`missing choices[${a}].tool_calls[${f}].function.name
${Ec(t)}`);if(v==null)throw new Se(`missing choices[${a}].tool_calls[${f}].function.arguments
${Ec(t)}`);return{id:E,type:w,function:{name:p,arguments:v}}})}}:{message:{content:l,role:d},finish_reason:o,index:a}}),created:r,model:i,object:"chat.completion"}}function Ec(t){return JSON.stringify(t)}class Po extends tu{static fromReadableStream(e){const n=new Po;return n._run(()=>n._fromReadableStream(e)),n}static runFunctions(e,n,r){const i=new Po;return i._run(()=>i._runFunctions(e,n,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runFunctions"}})),i}static runTools(e,n,r){const i=new Po;return i._run(()=>i._runTools(e,n,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runTools"}})),i}}let rA=class extends Oe{runFunctions(e,n){return e.stream?Po.runFunctions(this._client.chat.completions,e,n):eu.runFunctions(this._client.chat.completions,e,n)}runTools(e,n){return e.stream?Po.runTools(this._client.chat.completions,e,n):eu.runTools(this._client.chat.completions,e,n)}stream(e,n){return tu.createChatCompletion(this._client.chat.completions,e,n)}};class td extends Oe{constructor(){super(...arguments),this.completions=new rA(this._client)}}(function(t){t.Completions=rA})(td||(td={}));let nd=class extends Oe{retrieve(e,n,r,i){return this._client.get(`/threads/${e}/messages/${n}/files/${r}`,{...i,headers:{"OpenAI-Beta":"assistants=v1",...i==null?void 0:i.headers}})}list(e,n,r={},i){return gr(r)?this.list(e,n,{},r):this._client.getAPIList(`/threads/${e}/messages/${n}/files`,$_,{query:r,...i,headers:{"OpenAI-Beta":"assistants=v1",...i==null?void 0:i.headers}})}};class $_ extends Xr{}(function(t){t.MessageFilesPage=$_})(nd||(nd={}));class rd extends Oe{constructor(){super(...arguments),this.files=new nd(this._client)}create(e,n,r){return this._client.post(`/threads/${e}/messages`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v1",...r==null?void 0:r.headers}})}retrieve(e,n,r){return this._client.get(`/threads/${e}/messages/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v1",...r==null?void 0:r.headers}})}update(e,n,r,i){return this._client.post(`/threads/${e}/messages/${n}`,{body:r,...i,headers:{"OpenAI-Beta":"assistants=v1",...i==null?void 0:i.headers}})}list(e,n={},r){return gr(n)?this.list(e,{},n):this._client.getAPIList(`/threads/${e}/messages`,U_,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v1",...r==null?void 0:r.headers}})}}class U_ extends Xr{}(function(t){t.ThreadMessagesPage=U_,t.Files=nd,t.MessageFilesPage=$_})(rd||(rd={}));class id extends Oe{retrieve(e,n,r,i){return this._client.get(`/threads/${e}/runs/${n}/steps/${r}`,{...i,headers:{"OpenAI-Beta":"assistants=v1",...i==null?void 0:i.headers}})}list(e,n,r={},i){return gr(r)?this.list(e,n,{},r):this._client.getAPIList(`/threads/${e}/runs/${n}/steps`,B_,{query:r,...i,headers:{"OpenAI-Beta":"assistants=v1",...i==null?void 0:i.headers}})}}class B_ extends Xr{}(function(t){t.RunStepsPage=B_})(id||(id={}));class sd extends Oe{constructor(){super(...arguments),this.steps=new id(this._client)}create(e,n,r){return this._client.post(`/threads/${e}/runs`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v1",...r==null?void 0:r.headers}})}retrieve(e,n,r){return this._client.get(`/threads/${e}/runs/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v1",...r==null?void 0:r.headers}})}update(e,n,r,i){return this._client.post(`/threads/${e}/runs/${n}`,{body:r,...i,headers:{"OpenAI-Beta":"assistants=v1",...i==null?void 0:i.headers}})}list(e,n={},r){return gr(n)?this.list(e,{},n):this._client.getAPIList(`/threads/${e}/runs`,z_,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v1",...r==null?void 0:r.headers}})}cancel(e,n,r){return this._client.post(`/threads/${e}/runs/${n}/cancel`,{...r,headers:{"OpenAI-Beta":"assistants=v1",...r==null?void 0:r.headers}})}submitToolOutputs(e,n,r,i){return this._client.post(`/threads/${e}/runs/${n}/submit_tool_outputs`,{body:r,...i,headers:{"OpenAI-Beta":"assistants=v1",...i==null?void 0:i.headers}})}}class z_ extends Xr{}(function(t){t.RunsPage=z_,t.Steps=id,t.RunStepsPage=B_})(sd||(sd={}));class od extends Oe{constructor(){super(...arguments),this.runs=new sd(this._client),this.messages=new rd(this._client)}create(e={},n){return gr(e)?this.create({},e):this._client.post("/threads",{body:e,...n,headers:{"OpenAI-Beta":"assistants=v1",...n==null?void 0:n.headers}})}retrieve(e,n){return this._client.get(`/threads/${e}`,{...n,headers:{"OpenAI-Beta":"assistants=v1",...n==null?void 0:n.headers}})}update(e,n,r){return this._client.post(`/threads/${e}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v1",...r==null?void 0:r.headers}})}del(e,n){return this._client.delete(`/threads/${e}`,{...n,headers:{"OpenAI-Beta":"assistants=v1",...n==null?void 0:n.headers}})}createAndRun(e,n){return this._client.post("/threads/runs",{body:e,...n,headers:{"OpenAI-Beta":"assistants=v1",...n==null?void 0:n.headers}})}}(function(t){t.Runs=sd,t.RunsPage=z_,t.Messages=rd,t.ThreadMessagesPage=U_})(od||(od={}));class ad extends Oe{constructor(){super(...arguments),this.chat=new td(this._client),this.assistants=new ed(this._client),this.threads=new od(this._client)}}(function(t){t.Chat=td,t.Assistants=ed,t.AssistantsPage=F_,t.Threads=od})(ad||(ad={}));class ld extends Oe{create(e,n){return this._client.post("/completions",{body:e,...n,stream:e.stream??!1})}}ld||(ld={});class ud extends Oe{create(e,n){return this._client.post("/embeddings",{body:e,...n})}}ud||(ud={});class cd extends Oe{create(e,n){return this._client.post("/edits",{body:e,...n})}}cd||(cd={});class hd extends Oe{create(e,n){return this._client.post("/files",Jl({body:e,...n}))}retrieve(e,n){return this._client.get(`/files/${e}`,n)}list(e={},n){return gr(e)?this.list({},e):this._client.getAPIList("/files",W_,{query:e,...n})}del(e,n){return this._client.delete(`/files/${e}`,n)}content(e,n){return this._client.get(`/files/${e}/content`,{...n,__binaryResponse:!0})}retrieveContent(e,n){return this._client.get(`/files/${e}/content`,{...n,headers:{Accept:"application/json",...n==null?void 0:n.headers}})}async waitForProcessing(e,{pollInterval:n=5e3,maxWait:r=30*60*1e3}={}){const i=new Set(["processed","error","deleted"]),s=Date.now();let o=await this.retrieve(e);for(;!o.status||!i.has(o.status);)if(await Jx(n),o=await this.retrieve(e),Date.now()-s>r)throw new V_({message:`Giving up on waiting for file ${e} to finish processing after ${r} milliseconds.`});return o}}class W_ extends Qf{}(function(t){t.FileObjectsPage=W_})(hd||(hd={}));class dd extends Oe{create(e,n){return this._client.post("/fine-tunes",{body:e,...n})}retrieve(e,n){return this._client.get(`/fine-tunes/${e}`,n)}list(e){return this._client.getAPIList("/fine-tunes",q_,e)}cancel(e,n){return this._client.post(`/fine-tunes/${e}/cancel`,n)}listEvents(e,n,r){return this._client.get(`/fine-tunes/${e}/events`,{query:n,timeout:864e5,...r,stream:(n==null?void 0:n.stream)??!1})}}class q_ extends Qf{}(function(t){t.FineTunesPage=q_})(dd||(dd={}));class fd extends Oe{create(e,n){return this._client.post("/fine_tuning/jobs",{body:e,...n})}retrieve(e,n){return this._client.get(`/fine_tuning/jobs/${e}`,n)}list(e={},n){return gr(e)?this.list({},e):this._client.getAPIList("/fine_tuning/jobs",H_,{query:e,...n})}cancel(e,n){return this._client.post(`/fine_tuning/jobs/${e}/cancel`,n)}listEvents(e,n={},r){return gr(n)?this.listEvents(e,{},n):this._client.getAPIList(`/fine_tuning/jobs/${e}/events`,G_,{query:n,...r})}}class H_ extends Xr{}class G_ extends Xr{}(function(t){t.FineTuningJobsPage=H_,t.FineTuningJobEventsPage=G_})(fd||(fd={}));class pd extends Oe{constructor(){super(...arguments),this.jobs=new fd(this._client)}}(function(t){t.Jobs=fd,t.FineTuningJobsPage=H_,t.FineTuningJobEventsPage=G_})(pd||(pd={}));class md extends Oe{createVariation(e,n){return this._client.post("/images/variations",Jl({body:e,...n}))}edit(e,n){return this._client.post("/images/edits",Jl({body:e,...n}))}generate(e,n){return this._client.post("/images/generations",{body:e,...n})}}md||(md={});class gd extends Oe{retrieve(e,n){return this._client.get(`/models/${e}`,n)}list(e){return this._client.getAPIList("/models",K_,e)}del(e,n){return this._client.delete(`/models/${e}`,n)}}class K_ extends Qf{}(function(t){t.ModelsPage=K_})(gd||(gd={}));class yd extends Oe{create(e,n){return this._client.post("/moderations",{body:e,...n})}}yd||(yd={});var iA;class St extends uj{constructor({apiKey:e=RE("OPENAI_API_KEY"),organization:n=RE("OPENAI_ORG_ID")??null,...r}={}){if(e===void 0)throw new Se("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");const i={apiKey:e,organization:n,...r,baseURL:r.baseURL??"https://api.openai.com/v1"};if(!i.dangerouslyAllowBrowser&&Ej())throw new Se(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);super({baseURL:i.baseURL,timeout:i.timeout??6e5,httpAgent:i.httpAgent,maxRetries:i.maxRetries,fetch:i.fetch}),this.completions=new ld(this),this.chat=new Kh(this),this.edits=new cd(this),this.embeddings=new ud(this),this.files=new hd(this),this.images=new md(this),this.audio=new Jh(this),this.moderations=new yd(this),this.models=new gd(this),this.fineTuning=new pd(this),this.fineTunes=new dd(this),this.beta=new ad(this),this._options=i,this.apiKey=e,this.organization=n}defaultQuery(){return this._options.defaultQuery}defaultHeaders(e){return{...super.defaultHeaders(e),"OpenAI-Organization":this.organization,...this._options.defaultHeaders}}authHeaders(e){return{Authorization:`Bearer ${this.apiKey}`}}}iA=St;St.OpenAI=iA;St.OpenAIError=Se;St.APIError=Gt;St.APIConnectionError=Gf;St.APIConnectionTimeoutError=V_;St.APIUserAbortError=As;St.NotFoundError=Bx;St.ConflictError=zx;St.RateLimitError=qx;St.BadRequestError=Fx;St.AuthenticationError=$x;St.InternalServerError=Hx;St.PermissionDeniedError=Ux;St.UnprocessableEntityError=Wx;(function(t){t.toFile=Qx,t.fileFromPath=Vx,t.Page=Qf,t.CursorPage=Xr,t.Completions=ld,t.Chat=Kh,t.Edits=cd,t.Embeddings=ud,t.Files=hd,t.FileObjectsPage=W_,t.Images=md,t.Audio=Jh,t.Moderations=yd,t.Models=gd,t.ModelsPage=K_,t.FineTuning=pd,t.FineTunes=dd,t.FineTunesPage=q_,t.Beta=ad})(St||(St={}));const Ij=St,kj=new Ij({apiKey:"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",dangerouslyAllowBrowser:!0});async function sA(t="hola"){try{const e=await kj.chat.completions.create({messages:[{role:"system",content:`Calificame este comentario que esta en el idioma espaol si tiene groseras, si es obseno, si le desea la muerte a una persona o un grupo de personas, si es racista, si es machista, si insista a la violencia, si pretente lastimar fsica o emocional, si es as devuelveme solo un 1  y 0  si NO tiene las caractersticas anteriores. El comentario es "${t}"`}],model:"gpt-3.5-turbo"}),{message:{content:n}}=e.choices[0];return console.log(n),!!Number(n)}catch(e){throw console.error("aqui hubo un error"),console.error(e),new Error(e)}}function zn(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+t+(n.length?" "+n.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function ji(t){return!!t&&!!t[ze]}function Gr(t){var e;return!!t&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===Oj}(t)||Array.isArray(t)||!!t[VE]||!!(!((e=t.constructor)===null||e===void 0)&&e[VE])||Q_(t)||X_(t))}function bs(t,e,n){n===void 0&&(n=!1),fa(t)===0?(n?Object.keys:No)(t).forEach(function(r){n&&typeof r=="symbol"||e(r,t[r],t)}):t.forEach(function(r,i){return e(i,r,t)})}function fa(t){var e=t[ze];return e?e.i>3?e.i-4:e.i:Array.isArray(t)?1:Q_(t)?2:X_(t)?3:0}function bo(t,e){return fa(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function Cj(t,e){return fa(t)===2?t.get(e):t[e]}function oA(t,e,n){var r=fa(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function aA(t,e){return t===e?t!==0||1/t==1/e:t!=t&&e!=e}function Q_(t){return Nj&&t instanceof Map}function X_(t){return Dj&&t instanceof Set}function Ji(t){return t.o||t.t}function Y_(t){if(Array.isArray(t))return Array.prototype.slice.call(t);var e=uA(t);delete e[ze];for(var n=No(e),r=0;r<n.length;r++){var i=n[r],s=e[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(e[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:t[i]})}return Object.create(Object.getPrototypeOf(t),e)}function J_(t,e){return e===void 0&&(e=!1),Z_(t)||ji(t)||!Gr(t)||(fa(t)>1&&(t.set=t.add=t.clear=t.delete=Rj),Object.freeze(t),e&&bs(t,function(n,r){return J_(r,!0)},!0)),t}function Rj(){zn(2)}function Z_(t){return t==null||typeof t!="object"||Object.isFrozen(t)}function pr(t){var e=hy[t];return e||zn(18,t),e}function xj(t,e){hy[t]||(hy[t]=e)}function ly(){return nu}function fm(t,e){e&&(pr("Patches"),t.u=[],t.s=[],t.v=e)}function vd(t){uy(t),t.p.forEach(Aj),t.p=null}function uy(t){t===nu&&(nu=t.l)}function bE(t){return nu={p:[],l:nu,h:t,m:!0,_:0}}function Aj(t){var e=t[ze];e.i===0||e.i===1?e.j():e.g=!0}function pm(t,e){e._=e.p.length;var n=e.p[0],r=t!==void 0&&t!==n;return e.h.O||pr("ES5").S(e,t,r),r?(n[ze].P&&(vd(e),zn(4)),Gr(t)&&(t=_d(e,t),e.l||wd(e,t)),e.u&&pr("Patches").M(n[ze].t,t,e.u,e.s)):t=_d(e,n,[]),vd(e),e.u&&e.v(e.u,e.s),t!==lA?t:void 0}function _d(t,e,n){if(Z_(e))return e;var r=e[ze];if(!r)return bs(e,function(a,l){return NE(t,r,e,a,l,n)},!0),e;if(r.A!==t)return e;if(!r.P)return wd(t,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=Y_(r.k):r.o,s=i,o=!1;r.i===3&&(s=new Set(i),i.clear(),o=!0),bs(s,function(a,l){return NE(t,r,i,a,l,n,o)}),wd(t,i,!1),n&&t.u&&pr("Patches").N(r,n,t.u,t.s)}return r.o}function NE(t,e,n,r,i,s,o){if(ji(i)){var a=_d(t,i,s&&e&&e.i!==3&&!bo(e.R,r)?s.concat(r):void 0);if(oA(n,r,a),!ji(a))return;t.m=!1}else o&&n.add(i);if(Gr(i)&&!Z_(i)){if(!t.h.D&&t._<1)return;_d(t,i),e&&e.A.l||wd(t,i)}}function wd(t,e,n){n===void 0&&(n=!1),!t.l&&t.h.D&&t.m&&J_(e,n)}function mm(t,e){var n=t[ze];return(n?Ji(n):t)[e]}function DE(t,e){if(e in t)for(var n=Object.getPrototypeOf(t);n;){var r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Object.getPrototypeOf(n)}}function hi(t){t.P||(t.P=!0,t.l&&hi(t.l))}function gm(t){t.o||(t.o=Y_(t.t))}function cy(t,e,n){var r=Q_(e)?pr("MapSet").F(e,n):X_(e)?pr("MapSet").T(e,n):t.O?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:ly(),P:!1,I:!1,R:{},l:s,t:i,k:null,o:null,j:null,C:!1},l=a,u=ru;o&&(l=[a],u=Xa);var c=Proxy.revocable(l,u),d=c.revoke,h=c.proxy;return a.k=h,a.j=d,h}(e,n):pr("ES5").J(e,n);return(n?n.A:ly()).p.push(r),r}function Pj(t){return ji(t)||zn(22,t),function e(n){if(!Gr(n))return n;var r,i=n[ze],s=fa(n);if(i){if(!i.P&&(i.i<4||!pr("ES5").K(i)))return i.t;i.I=!0,r=OE(n,s),i.I=!1}else r=OE(n,s);return bs(r,function(o,a){i&&Cj(i.t,o)===a||oA(r,o,e(a))}),s===3?new Set(r):r}(t)}function OE(t,e){switch(e){case 2:return new Map(t);case 3:return Array.from(t)}return Y_(t)}function bj(){function t(s,o){var a=i[s];return a?a.enumerable=o:i[s]=a={configurable:!0,enumerable:o,get:function(){var l=this[ze];return ru.get(l,s)},set:function(l){var u=this[ze];ru.set(u,s,l)}},a}function e(s){for(var o=s.length-1;o>=0;o--){var a=s[o][ze];if(!a.P)switch(a.i){case 5:r(a)&&hi(a);break;case 4:n(a)&&hi(a)}}}function n(s){for(var o=s.t,a=s.k,l=No(a),u=l.length-1;u>=0;u--){var c=l[u];if(c!==ze){var d=o[c];if(d===void 0&&!bo(o,c))return!0;var h=a[c],f=h&&h[ze];if(f?f.t!==d:!aA(h,d))return!0}}var g=!!o[ze];return l.length!==No(o).length+(g?0:1)}function r(s){var o=s.k;if(o.length!==s.t.length)return!0;var a=Object.getOwnPropertyDescriptor(o,o.length-1);if(a&&!a.get)return!0;for(var l=0;l<o.length;l++)if(!o.hasOwnProperty(l))return!0;return!1}var i={};xj("ES5",{J:function(s,o){var a=Array.isArray(s),l=function(c,d){if(c){for(var h=Array(d.length),f=0;f<d.length;f++)Object.defineProperty(h,""+f,t(f,!0));return h}var g=uA(d);delete g[ze];for(var w=No(g),E=0;E<w.length;E++){var v=w[E];g[v]=t(v,c||!!g[v].enumerable)}return Object.create(Object.getPrototypeOf(d),g)}(a,s),u={i:a?5:4,A:o?o.A:ly(),P:!1,I:!1,R:{},l:o,t:s,k:l,o:null,g:!1,C:!1};return Object.defineProperty(l,ze,{value:u,writable:!0}),l},S:function(s,o,a){a?ji(o)&&o[ze].A===s&&e(s.p):(s.u&&function l(u){if(u&&typeof u=="object"){var c=u[ze];if(c){var d=c.t,h=c.k,f=c.R,g=c.i;if(g===4)bs(h,function(_){_!==ze&&(d[_]!==void 0||bo(d,_)?f[_]||l(h[_]):(f[_]=!0,hi(c)))}),bs(d,function(_){h[_]!==void 0||bo(h,_)||(f[_]=!1,hi(c))});else if(g===5){if(r(c)&&(hi(c),f.length=!0),h.length<d.length)for(var w=h.length;w<d.length;w++)f[w]=!1;else for(var E=d.length;E<h.length;E++)f[E]=!0;for(var v=Math.min(h.length,d.length),p=0;p<v;p++)h.hasOwnProperty(p)||(f[p]=!0),f[p]===void 0&&l(h[p])}}}}(s.p[0]),e(s.p))},K:function(s){return s.i===4?n(s):r(s)}})}var LE,nu,e0=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",Nj=typeof Map<"u",Dj=typeof Set<"u",ME=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",lA=e0?Symbol.for("immer-nothing"):((LE={})["immer-nothing"]=!0,LE),VE=e0?Symbol.for("immer-draftable"):"__$immer_draftable",ze=e0?Symbol.for("immer-state"):"__$immer_state",Oj=""+Object.prototype.constructor,No=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames,uA=Object.getOwnPropertyDescriptors||function(t){var e={};return No(t).forEach(function(n){e[n]=Object.getOwnPropertyDescriptor(t,n)}),e},hy={},ru={get:function(t,e){if(e===ze)return t;var n=Ji(t);if(!bo(n,e))return function(i,s,o){var a,l=DE(s,o);return l?"value"in l?l.value:(a=l.get)===null||a===void 0?void 0:a.call(i.k):void 0}(t,n,e);var r=n[e];return t.I||!Gr(r)?r:r===mm(t.t,e)?(gm(t),t.o[e]=cy(t.A.h,r,t)):r},has:function(t,e){return e in Ji(t)},ownKeys:function(t){return Reflect.ownKeys(Ji(t))},set:function(t,e,n){var r=DE(Ji(t),e);if(r!=null&&r.set)return r.set.call(t.k,n),!0;if(!t.P){var i=mm(Ji(t),e),s=i==null?void 0:i[ze];if(s&&s.t===n)return t.o[e]=n,t.R[e]=!1,!0;if(aA(n,i)&&(n!==void 0||bo(t.t,e)))return!0;gm(t),hi(t)}return t.o[e]===n&&(n!==void 0||e in t.o)||Number.isNaN(n)&&Number.isNaN(t.o[e])||(t.o[e]=n,t.R[e]=!0),!0},deleteProperty:function(t,e){return mm(t.t,e)!==void 0||e in t.t?(t.R[e]=!1,gm(t),hi(t)):delete t.R[e],t.o&&delete t.o[e],!0},getOwnPropertyDescriptor:function(t,e){var n=Ji(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.i!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty:function(){zn(11)},getPrototypeOf:function(t){return Object.getPrototypeOf(t.t)},setPrototypeOf:function(){zn(12)}},Xa={};bs(ru,function(t,e){Xa[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}}),Xa.deleteProperty=function(t,e){return Xa.set.call(this,t,e,void 0)},Xa.set=function(t,e,n){return ru.set.call(this,t[0],e,n,t[0])};var Lj=function(){function t(n){var r=this;this.O=ME,this.D=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var l=r;return function(w){var E=this;w===void 0&&(w=a);for(var v=arguments.length,p=Array(v>1?v-1:0),_=1;_<v;_++)p[_-1]=arguments[_];return l.produce(w,function(y){var S;return(S=s).call.apply(S,[E,y].concat(p))})}}var u;if(typeof s!="function"&&zn(6),o!==void 0&&typeof o!="function"&&zn(7),Gr(i)){var c=bE(r),d=cy(r,i,void 0),h=!0;try{u=s(d),h=!1}finally{h?vd(c):uy(c)}return typeof Promise<"u"&&u instanceof Promise?u.then(function(w){return fm(c,o),pm(w,c)},function(w){throw vd(c),w}):(fm(c,o),pm(u,c))}if(!i||typeof i!="object"){if((u=s(i))===void 0&&(u=i),u===lA&&(u=void 0),r.D&&J_(u,!0),o){var f=[],g=[];pr("Patches").M(i,u,f,g),o(f,g)}return u}zn(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(u){for(var c=arguments.length,d=Array(c>1?c-1:0),h=1;h<c;h++)d[h-1]=arguments[h];return r.produceWithPatches(u,function(f){return i.apply(void 0,[f].concat(d))})};var o,a,l=r.produce(i,s,function(u,c){o=u,a=c});return typeof Promise<"u"&&l instanceof Promise?l.then(function(u){return[u,o,a]}):[l,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var e=t.prototype;return e.createDraft=function(n){Gr(n)||zn(8),ji(n)&&(n=Pj(n));var r=bE(this),i=cy(this,n,void 0);return i[ze].C=!0,uy(r),i},e.finishDraft=function(n,r){var i=n&&n[ze],s=i.A;return fm(s,r),pm(void 0,s)},e.setAutoFreeze=function(n){this.D=n},e.setUseProxies=function(n){n&&!ME&&zn(20),this.O=n},e.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=pr("Patches").$;return ji(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},t}(),vn=new Lj,cA=vn.produce;vn.produceWithPatches.bind(vn);vn.setAutoFreeze.bind(vn);vn.setUseProxies.bind(vn);vn.applyPatches.bind(vn);vn.createDraft.bind(vn);vn.finishDraft.bind(vn);function iu(t){"@babel/helpers - typeof";return iu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},iu(t)}function Mj(t,e){if(iu(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(iu(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Vj(t){var e=Mj(t,"string");return iu(e)==="symbol"?e:String(e)}function jj(t,e,n){return e=Vj(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function FE(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?jE(Object(n),!0).forEach(function(r){jj(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jE(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function jt(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var $E=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),ym=function(){return Math.random().toString(36).substring(7).split("").join(".")},Ed={INIT:"@@redux/INIT"+ym(),REPLACE:"@@redux/REPLACE"+ym(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+ym()}};function Fj(t){if(typeof t!="object"||t===null)return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function hA(t,e,n){var r;if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(jt(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(jt(1));return n(hA)(t,e)}if(typeof t!="function")throw new Error(jt(2));var i=t,s=e,o=[],a=o,l=!1;function u(){a===o&&(a=o.slice())}function c(){if(l)throw new Error(jt(3));return s}function d(w){if(typeof w!="function")throw new Error(jt(4));if(l)throw new Error(jt(5));var E=!0;return u(),a.push(w),function(){if(E){if(l)throw new Error(jt(6));E=!1,u();var p=a.indexOf(w);a.splice(p,1),o=null}}}function h(w){if(!Fj(w))throw new Error(jt(7));if(typeof w.type>"u")throw new Error(jt(8));if(l)throw new Error(jt(9));try{l=!0,s=i(s,w)}finally{l=!1}for(var E=o=a,v=0;v<E.length;v++){var p=E[v];p()}return w}function f(w){if(typeof w!="function")throw new Error(jt(10));i=w,h({type:Ed.REPLACE})}function g(){var w,E=d;return w={subscribe:function(p){if(typeof p!="object"||p===null)throw new Error(jt(11));function _(){p.next&&p.next(c())}_();var y=E(_);return{unsubscribe:y}}},w[$E]=function(){return this},w}return h({type:Ed.INIT}),r={dispatch:h,subscribe:d,getState:c,replaceReducer:f},r[$E]=g,r}function $j(t){Object.keys(t).forEach(function(e){var n=t[e],r=n(void 0,{type:Ed.INIT});if(typeof r>"u")throw new Error(jt(12));if(typeof n(void 0,{type:Ed.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(jt(13))})}function Uj(t){for(var e=Object.keys(t),n={},r=0;r<e.length;r++){var i=e[r];typeof t[i]=="function"&&(n[i]=t[i])}var s=Object.keys(n),o;try{$j(n)}catch(a){o=a}return function(l,u){if(l===void 0&&(l={}),o)throw o;for(var c=!1,d={},h=0;h<s.length;h++){var f=s[h],g=n[f],w=l[f],E=g(w,u);if(typeof E>"u")throw u&&u.type,new Error(jt(14));d[f]=E,c=c||E!==w}return c=c||s.length!==Object.keys(l).length,c?d:l}}function Td(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.length===0?function(r){return r}:e.length===1?e[0]:e.reduce(function(r,i){return function(){return r(i.apply(void 0,arguments))}})}function Bj(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){return function(){var i=r.apply(void 0,arguments),s=function(){throw new Error(jt(15))},o={getState:i.getState,dispatch:function(){return s.apply(void 0,arguments)}},a=e.map(function(l){return l(o)});return s=Td.apply(void 0,a)(i.dispatch),FE(FE({},i),{},{dispatch:s})}}}function dA(t){var e=function(r){var i=r.dispatch,s=r.getState;return function(o){return function(a){return typeof a=="function"?a(i,s,t):o(a)}}};return e}var fA=dA();fA.withExtraArgument=dA;const UE=fA;var pA=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),zj=globalThis&&globalThis.__generator||function(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(u){return function(c){return l([u,c])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=u[0]&2?i.return:u[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,u[1])).done)return s;switch(i=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,i=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){n.label=u[1];break}if(u[0]===6&&n.label<s[1]){n.label=s[1],s=u;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(u);break}s[2]&&n.ops.pop(),n.trys.pop();continue}u=e.call(t,n)}catch(c){u=[6,c],i=0}finally{r=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},Jo=globalThis&&globalThis.__spreadArray||function(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t},Wj=Object.defineProperty,qj=Object.defineProperties,Hj=Object.getOwnPropertyDescriptors,BE=Object.getOwnPropertySymbols,Gj=Object.prototype.hasOwnProperty,Kj=Object.prototype.propertyIsEnumerable,zE=function(t,e,n){return e in t?Wj(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n},xi=function(t,e){for(var n in e||(e={}))Gj.call(e,n)&&zE(t,n,e[n]);if(BE)for(var r=0,i=BE(e);r<i.length;r++){var n=i[r];Kj.call(e,n)&&zE(t,n,e[n])}return t},vm=function(t,e){return qj(t,Hj(e))},Qj=function(t,e,n){return new Promise(function(r,i){var s=function(l){try{a(n.next(l))}catch(u){i(u)}},o=function(l){try{a(n.throw(l))}catch(u){i(u)}},a=function(l){return l.done?r(l.value):Promise.resolve(l.value).then(s,o)};a((n=n.apply(t,e)).next())})},Xj=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Td:Td.apply(null,arguments)};function Yj(t){if(typeof t!="object"||t===null)return!1;var e=Object.getPrototypeOf(t);if(e===null)return!0;for(var n=e;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return e===n}function Ai(t,e){function n(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(e){var s=e.apply(void 0,r);if(!s)throw new Error("prepareAction did not return an object");return xi(xi({type:t,payload:s.payload},"meta"in s&&{meta:s.meta}),"error"in s&&{error:s.error})}return{type:t,payload:r[0]}}return n.toString=function(){return""+t},n.type=t,n.match=function(r){return r.type===t},n}var Jj=function(t){pA(e,t);function e(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=t.apply(this,n)||this;return Object.setPrototypeOf(i,e.prototype),i}return Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t.prototype.concat.apply(this,n)},e.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(e.bind.apply(e,Jo([void 0],n[0].concat(this)))):new(e.bind.apply(e,Jo([void 0],n.concat(this))))},e}(Array),Zj=function(t){pA(e,t);function e(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=t.apply(this,n)||this;return Object.setPrototypeOf(i,e.prototype),i}return Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t.prototype.concat.apply(this,n)},e.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(e.bind.apply(e,Jo([void 0],n[0].concat(this)))):new(e.bind.apply(e,Jo([void 0],n.concat(this))))},e}(Array);function dy(t){return Gr(t)?cA(t,function(){}):t}function eF(t){return typeof t=="boolean"}function tF(){return function(e){return nF(e)}}function nF(t){t===void 0&&(t={});var e=t.thunk,n=e===void 0?!0:e;t.immutableCheck,t.serializableCheck,t.actionCreatorCheck;var r=new Jj;return n&&(eF(n)?r.push(UE):r.push(UE.withExtraArgument(n.extraArgument))),r}var rF=!0;function iF(t){var e=tF(),n=t||{},r=n.reducer,i=r===void 0?void 0:r,s=n.middleware,o=s===void 0?e():s,a=n.devTools,l=a===void 0?!0:a,u=n.preloadedState,c=u===void 0?void 0:u,d=n.enhancers,h=d===void 0?void 0:d,f;if(typeof i=="function")f=i;else if(Yj(i))f=Uj(i);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var g=o;typeof g=="function"&&(g=g(e));var w=Bj.apply(void 0,g),E=Td;l&&(E=Xj(xi({trace:!rF},typeof l=="object"&&l)));var v=new Zj(w),p=v;Array.isArray(h)?p=Jo([w],h):typeof h=="function"&&(p=h(v));var _=E.apply(void 0,p);return hA(f,c,_)}function mA(t){var e={},n=[],r,i={addCase:function(s,o){var a=typeof s=="string"?s:s.type;if(!a)throw new Error("`builder.addCase` cannot be called with an empty action type");if(a in e)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return e[a]=o,i},addMatcher:function(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase:function(s){return r=s,i}};return t(i),[e,n,r]}function sF(t){return typeof t=="function"}function oF(t,e,n,r){n===void 0&&(n=[]);var i=typeof e=="function"?mA(e):[e,n,r],s=i[0],o=i[1],a=i[2],l;if(sF(t))l=function(){return dy(t())};else{var u=dy(t);l=function(){return u}}function c(d,h){d===void 0&&(d=l());var f=Jo([s[h.type]],o.filter(function(g){var w=g.matcher;return w(h)}).map(function(g){var w=g.reducer;return w}));return f.filter(function(g){return!!g}).length===0&&(f=[a]),f.reduce(function(g,w){if(w)if(ji(g)){var E=g,v=w(E,h);return v===void 0?g:v}else{if(Gr(g))return cA(g,function(p){return w(p,h)});var v=w(g,h);if(v===void 0){if(g===null)return g;throw Error("A case reducer on a non-draftable value must not return undefined")}return v}return g},d)}return c.getInitialState=l,c}function aF(t,e){return t+"/"+e}function t0(t){var e=t.name;if(!e)throw new Error("`name` is a required option for createSlice");typeof process<"u";var n=typeof t.initialState=="function"?t.initialState:dy(t.initialState),r=t.reducers||{},i=Object.keys(r),s={},o={},a={};i.forEach(function(c){var d=r[c],h=aF(e,c),f,g;"reducer"in d?(f=d.reducer,g=d.prepare):f=d,s[c]=f,o[h]=f,a[c]=g?Ai(h,g):Ai(h)});function l(){var c=typeof t.extraReducers=="function"?mA(t.extraReducers):[t.extraReducers],d=c[0],h=d===void 0?{}:d,f=c[1],g=f===void 0?[]:f,w=c[2],E=w===void 0?void 0:w,v=xi(xi({},h),o);return oF(n,function(p){for(var _ in v)p.addCase(_,v[_]);for(var y=0,S=g;y<S.length;y++){var C=S[y];p.addMatcher(C.matcher,C.reducer)}E&&p.addDefaultCase(E)})}var u;return{name:e,reducer:function(c,d){return u||(u=l()),u(c,d)},actions:a,caseReducers:s,getInitialState:function(){return u||(u=l()),u.getInitialState()}}}var lF="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",uF=function(t){t===void 0&&(t=21);for(var e="",n=t;n--;)e+=lF[Math.random()*64|0];return e},cF=["name","message","stack","code"],_m=function(){function t(e,n){this.payload=e,this.meta=n}return t}(),WE=function(){function t(e,n){this.payload=e,this.meta=n}return t}(),hF=function(t){if(typeof t=="object"&&t!==null){for(var e={},n=0,r=cF;n<r.length;n++){var i=r[n];typeof t[i]=="string"&&(e[i]=t[i])}return e}return{message:String(t)}};(function(){function t(e,n,r){var i=Ai(e+"/fulfilled",function(u,c,d,h){return{payload:u,meta:vm(xi({},h||{}),{arg:d,requestId:c,requestStatus:"fulfilled"})}}),s=Ai(e+"/pending",function(u,c,d){return{payload:void 0,meta:vm(xi({},d||{}),{arg:c,requestId:u,requestStatus:"pending"})}}),o=Ai(e+"/rejected",function(u,c,d,h,f){return{payload:h,error:(r&&r.serializeError||hF)(u||"Rejected"),meta:vm(xi({},f||{}),{arg:d,requestId:c,rejectedWithValue:!!h,requestStatus:"rejected",aborted:(u==null?void 0:u.name)==="AbortError",condition:(u==null?void 0:u.name)==="ConditionError"})}}),a=typeof AbortController<"u"?AbortController:function(){function u(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return u.prototype.abort=function(){},u}();function l(u){return function(c,d,h){var f=r!=null&&r.idGenerator?r.idGenerator(u):uF(),g=new a,w;function E(p){w=p,g.abort()}var v=function(){return Qj(this,null,function(){var p,_,y,S,C,A,P;return zj(this,function(O){switch(O.label){case 0:return O.trys.push([0,4,,5]),S=(p=r==null?void 0:r.condition)==null?void 0:p.call(r,u,{getState:d,extra:h}),fF(S)?[4,S]:[3,2];case 1:S=O.sent(),O.label=2;case 2:if(S===!1||g.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return C=new Promise(function(M,le){return g.signal.addEventListener("abort",function(){return le({name:"AbortError",message:w||"Aborted"})})}),c(s(f,u,(_=r==null?void 0:r.getPendingMeta)==null?void 0:_.call(r,{requestId:f,arg:u},{getState:d,extra:h}))),[4,Promise.race([C,Promise.resolve(n(u,{dispatch:c,getState:d,extra:h,requestId:f,signal:g.signal,abort:E,rejectWithValue:function(M,le){return new _m(M,le)},fulfillWithValue:function(M,le){return new WE(M,le)}})).then(function(M){if(M instanceof _m)throw M;return M instanceof WE?i(M.payload,f,u,M.meta):i(M,f,u)})])];case 3:return y=O.sent(),[3,5];case 4:return A=O.sent(),y=A instanceof _m?o(null,f,u,A.payload,A.meta):o(A,f,u),[3,5];case 5:return P=r&&!r.dispatchConditionRejection&&o.match(y)&&y.meta.condition,P||c(y),[2,y]}})})}();return Object.assign(v,{abort:E,requestId:f,arg:u,unwrap:function(){return v.then(dF)}})}}return Object.assign(l,{pending:s,rejected:o,fulfilled:i,typePrefix:e})}return t.withTypes=function(){return t},t})();function dF(t){if(t.meta&&t.meta.rejectedWithValue)throw t.payload;if(t.error)throw t.error;return t.payload}function fF(t){return t!==null&&typeof t=="object"&&typeof t.then=="function"}var n0="listenerMiddleware";Ai(n0+"/add");Ai(n0+"/removeAll");Ai(n0+"/remove");var qE;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);bj();const gA=t0({name:"modalError",initialState:{message:""},reducers:{setMessage:(t,e)=>{t.message=e.payload}}}),{setMessage:pF}=gA.actions,yA=t0({name:"modalPostWithComments",initialState:{currentUser:{},post:null,urlImagePost:null,datePosted:null,commentsFirestore:[]},reducers:{setPostWithComments:(t,e)=>{t.currentUser=e.payload.currentUser,t.post=e.payload.post,t.urlImagePost=e.payload.urlImagePost,t.datePosted=e.payload.datePosted,t.commentsFirestore=e.payload.commentsFirestore}}}),{setPostWithComments:mF}=yA.actions,vA=({idPost:t,post:e,urlImagePost:n,datePosted:r,currentUser:i,ModalErrorRef:s,ModalPostWithCommentsRef:o})=>{const[a,l]=x.useState(!1),{user:u}=Vi(O=>O.auth),c=Fu(),[d,h]=x.useState(!1),[f,g]=x.useState([]),[w,E]=x.useState(!1),{handleSubmit:v,register:p,reset:_}=mu({defaultValues:{comment:""}}),[y,S]=x.useState(!1),[C,A]=x.useState(0);x.useEffect(()=>{gE({idPost:t}).then(O=>g(O))},[t]),x.useEffect(()=>{om({idPost:t}).then(O=>{l(O.reactions.includes(u.uid))})},[t,u.uid]),x.useEffect(()=>{om({idPost:t}).then(O=>A(O.reactions.length))},[a,t]);const P=async O=>{const{comment:M}=O;if(S(!0),await sA(M)){S(!1),c(pF("Este comentario no puede ser publicado por se ha dectado que es inapropiado")),s.current.showModal(),_();return}try{const Q=yx();S(!0);const Z=await kf({uid:u.uid});await p_(ks(Hr,"comments",Q),{idComment:Q,idPost:t,currentUser:Z,comment:M,dateCommeted:at.fromDate(new Date)}),h(!0),S(!1);const _e=await gE({idPost:t});g(_e),_(),setTimeout(()=>{h(!1)},3e3)}catch(Q){throw console.error(Q),new Error(Q)}};return m.jsxs(m.Fragment,{children:[m.jsxs("section",{className:"bg-neutral rounded-lg p-4 space-y-3",children:[m.jsxs("article",{className:"flex items-center",children:[m.jsxs("svg",{width:"30px",height:"30px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[m.jsx("g",{id:"SVGRepo_bgCarrier",strokeWidth:"0"}),m.jsx("g",{id:"SVGRepo_tracerCarrier",strokeLinecap:"round",strokeLinejoin:"round"}),m.jsxs("g",{id:"SVGRepo_iconCarrier",children:[" ",m.jsx("path",{d:"M5 21C5 17.134 8.13401 14 12 14C15.866 14 19 17.134 19 21M16 7C16 9.20914 14.2091 11 12 11C9.79086 11 8 9.20914 8 7C8 4.79086 9.79086 3 12 3C14.2091 3 16 4.79086 16 7Z",stroke:"#5311f3",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})," "]})]}),m.jsxs("div",{className:"ml-3 ",children:[m.jsx("span",{className:"text-sm font-semibold antialiased block leading-tight",children:`${i==null?void 0:i.name} ${i==null?void 0:i.lastName}`}),m.jsx("span",{className:"text-base-content text-xs block",children:r})]})]}),m.jsx("p",{className:"text-sm",children:e}),n?m.jsx("img",{src:n,className:"w-full block object-cover"}):null,m.jsx("article",{className:"flex items-center justify-between ",children:m.jsxs("div",{className:"flex gap-3 items-center",children:[m.jsxs("div",{className:"flex items-center gap-1",children:[m.jsx("button",{onClick:async()=>{const O=ks(Hr,"posts",t);try{E(!0);const{reactions:M}=await om({idPost:t});M.includes(u.uid)?(await Kg(O,{reactions:I3(u.uid)}),l(!1)):(await Kg(O,{reactions:S3(u.uid)}),l(!0))}catch(M){throw console.error(M),new Error(M)}finally{E(!1)}},children:a?m.jsxs("svg",{width:"30px",height:"30px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"#793ef9",children:[m.jsx("g",{id:"SVGRepo_bgCarrier",strokeWidth:"0"}),m.jsx("g",{id:"SVGRepo_tracerCarrier",strokeLinecap:"round",strokeLinejoin:"round"}),m.jsxs("g",{id:"SVGRepo_iconCarrier",children:[" ",m.jsx("path",{d:"M2 9.1371C2 14 6.01943 16.5914 8.96173 18.9109C10 19.7294 11 20.5 12 20.5C13 20.5 14 19.7294 15.0383 18.9109C17.9806 16.5914 22 14 22 9.1371C22 4.27416 16.4998 0.825464 12 5.50063C7.50016 0.825464 2 4.27416 2 9.1371Z",fill:"#793ef9",className:"transition duration-300 ease-in-out"})," "]})]}):m.jsxs("svg",{width:"30px",height:"30px",viewBox:"-2.4 -2.4 28.80 28.80",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"#793ef9",children:[m.jsx("g",{id:"SVGRepo_bgCarrier",strokeWidth:"0"}),m.jsx("g",{id:"SVGRepo_tracerCarrier",strokeLinecap:"round",strokeLinejoin:"round"}),m.jsxs("g",{id:"SVGRepo_iconCarrier",children:[" ",m.jsx("path",{d:"M2 9.1371C2 14 6.01943 16.5914 8.96173 18.9109C10 19.7294 11 20.5 12 20.5C13 20.5 14 19.7294 15.0383 18.9109C17.9806 16.5914 22 14 22 9.1371C22 4.27416 16.4998 0.825464 12 5.50063C7.50016 0.825464 2 4.27416 2 9.1371Z",fill:"#2a2e37",className:"transition duration-300 ease-in-out"})," "]})]})}),w?m.jsx("span",{className:"loading loading-bars loading-xs"}):null,C>0?m.jsxs("span",{className:"text-xs text-primary",children:["(",C,")"]}):null]}),m.jsxs("div",{className:"flex items-center gap-1",children:[m.jsx("button",{onClick:()=>{c(mF({currentUser:i,post:e,urlImagePost:n,datePosted:r,commentsFirestore:f})),o.current.showModal()},children:m.jsxs("svg",{width:"20px",height:"20px",viewBox:"0 0 32 32",version:"1.1",xmlns:"http://www.w3.org/2000/svg",fill:"#000000",children:[m.jsx("g",{id:"SVGRepo_bgCarrier",strokeWidth:"0"}),m.jsx("g",{id:"SVGRepo_tracerCarrier",strokeLinecap:"round",strokeLinejoin:"round"}),m.jsxs("g",{id:"SVGRepo_iconCarrier",children:[" ",m.jsx("title",{children:"comment-1"})," ",m.jsx("desc",{children:"Created with Sketch Beta."})," ",m.jsx("defs",{children:" "})," ",m.jsxs("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:[" ",m.jsxs("g",{id:"Icon-Set",transform:"translate(-100.000000, -255.000000)",fill:"#793ef9",children:[" ",m.jsx("path",{d:"M116,281 C114.832,281 113.704,280.864 112.62,280.633 L107.912,283.463 L107.975,278.824 C104.366,276.654 102,273.066 102,269 C102,262.373 108.268,257 116,257 C123.732,257 130,262.373 130,269 C130,275.628 123.732,281 116,281 L116,281 Z M116,255 C107.164,255 100,261.269 100,269 C100,273.419 102.345,277.354 106,279.919 L106,287 L113.009,282.747 C113.979,282.907 114.977,283 116,283 C124.836,283 132,276.732 132,269 C132,261.269 124.836,255 116,255 L116,255 Z",id:"comment-1",children:" "})," "]})," "]})," "]})]})}),f.length>0?m.jsxs("span",{className:"text-xs text-primary",children:["(",f.length,")"]}):null]})]})}),m.jsxs("form",{className:"flex items-center gap-2 ",onSubmit:v(P),autoComplete:"off",children:[m.jsxs("svg",{width:"30px",height:"30px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[m.jsx("g",{id:"SVGRepo_bgCarrier",strokeWidth:"0"}),m.jsx("g",{id:"SVGRepo_tracerCarrier",strokeLinecap:"round",strokeLinejoin:"round"}),m.jsxs("g",{id:"SVGRepo_iconCarrier",children:[" ",m.jsx("path",{d:"M5 21C5 17.134 8.13401 14 12 14C15.866 14 19 17.134 19 21M16 7C16 9.20914 14.2091 11 12 11C9.79086 11 8 9.20914 8 7C8 4.79086 9.79086 3 12 3C14.2091 3 16 4.79086 16 7Z",stroke:"#5311f3",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})," "]})]}),m.jsx("input",{disabled:y,type:"text",placeholder:"Escribe un comentario",className:"input input-bordered input-sm w-full block placeholder:text-xs",...p("comment",{required:!0}),maxLength:300,minLength:2}),m.jsx("button",{type:"submit",children:m.jsxs("svg",{width:"30px",height:"30px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[m.jsx("g",{id:"SVGRepo_bgCarrier",strokeWidth:"0"}),m.jsx("g",{id:"SVGRepo_tracerCarrier",strokeLinecap:"round",strokeLinejoin:"round"}),m.jsxs("g",{id:"SVGRepo_iconCarrier",children:[" ",m.jsx("path",{d:"M11.5003 12H5.41872M5.24634 12.7972L4.24158 15.7986C3.69128 17.4424 3.41613 18.2643 3.61359 18.7704C3.78506 19.21 4.15335 19.5432 4.6078 19.6701C5.13111 19.8161 5.92151 19.4604 7.50231 18.7491L17.6367 14.1886C19.1797 13.4942 19.9512 13.1471 20.1896 12.6648C20.3968 12.2458 20.3968 11.7541 20.1896 11.3351C19.9512 10.8529 19.1797 10.5057 17.6367 9.81135L7.48483 5.24303C5.90879 4.53382 5.12078 4.17921 4.59799 4.32468C4.14397 4.45101 3.77572 4.78336 3.60365 5.22209C3.40551 5.72728 3.67772 6.54741 4.22215 8.18767L5.24829 11.2793C5.34179 11.561 5.38855 11.7019 5.407 11.8459C5.42338 11.9738 5.42321 12.1032 5.40651 12.231C5.38768 12.375 5.34057 12.5157 5.24634 12.7972Z",stroke:"#000000",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"stroke-primary hover:stroke-primary-focus "})," "]})]})}),y?m.jsx("span",{className:"loading loading-bars loading-xs"}):null]})]}),d?m.jsx("div",{className:"toast text-xs lg:text-sm",children:m.jsx("div",{className:"alert alert-info py-2 px-4",children:m.jsx("span",{children:"Comentario publicado."})})}):null]})};vA.propTypes={idPost:Je.any,post:Je.any,urlImagePost:Je.any,datePosted:Je.any,currentUser:Je.object,ModalErrorRef:Je.any,ModalPostWithCommentsRef:Je.any};const fy=({children:t,toredirect:e})=>{const{user:n}=Vi(r=>r.auth);return n?t:m.jsx(SI,{to:e})};fy.propTypes={children:Je.any,toredirect:Je.string};const su=({ModalErrorRef:t,message:e})=>m.jsx(m.Fragment,{children:m.jsx("dialog",{ref:t,id:"error_modal",className:"modal",children:m.jsxs("div",{className:"modal-box text-error",children:[m.jsx("form",{method:"dialog",children:m.jsx("button",{className:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2 border-none outline-none text-error",children:""})}),m.jsx("div",{className:"flex justify-center items-center mb-2",children:m.jsxs("svg",{height:64,width:64,fill:"#ff6b6b",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",stroke:"#ff6b6b",children:[m.jsx("g",{id:"SVGRepo_bgCarrier",strokeWidth:"0"}),m.jsx("g",{id:"SVGRepo_tracerCarrier",strokeLinecap:"round",strokeLinejoin:"round"}),m.jsx("g",{id:"SVGRepo_iconCarrier",children:m.jsx("path",{d:"M520.741 163.801a10.234 10.234 0 00-3.406-3.406c-4.827-2.946-11.129-1.421-14.075 3.406L80.258 856.874a10.236 10.236 0 00-1.499 5.335c0 5.655 4.585 10.24 10.24 10.24h846.004c1.882 0 3.728-.519 5.335-1.499 4.827-2.946 6.352-9.248 3.406-14.075L520.742 163.802zm43.703-26.674L987.446 830.2c17.678 28.964 8.528 66.774-20.436 84.452a61.445 61.445 0 01-32.008 8.996H88.998c-33.932 0-61.44-27.508-61.44-61.44a61.445 61.445 0 018.996-32.008l423.002-693.073c17.678-28.964 55.488-38.113 84.452-20.436a61.438 61.438 0 0120.436 20.436zM512 778.24c22.622 0 40.96-18.338 40.96-40.96s-18.338-40.96-40.96-40.96-40.96 18.338-40.96 40.96 18.338 40.96 40.96 40.96zm0-440.32c-22.622 0-40.96 18.338-40.96 40.96v225.28c0 22.622 18.338 40.96 40.96 40.96s40.96-18.338 40.96-40.96V378.88c0-22.622-18.338-40.96-40.96-40.96z"})})]})}),m.jsx("h3",{className:"font-bold text-base text-center lg:text-lg",children:"Error!"}),m.jsx("p",{className:"py-4 text-center text-sm lg:text-base",children:e})]})})});su.propTypes={ModalErrorRef:Je.any,message:Je.string};const Kc=({children:t,toredirect:e})=>{const{user:n}=Vi(r=>r.auth);return n?m.jsx(SI,{to:e}):t};Kc.propTypes={children:Je.any,toredirect:Je.any};const _A=t0({name:"auth",initialState:{user:JSON.parse(localStorage.getItem(sm))||null},reducers:{login:(t,e)=>{t.user=e.payload,localStorage.setItem(sm,JSON.stringify(t.user))},logout:t=>{t.user=null,localStorage.removeItem(sm)},test:(t,e)=>{console.log(t,"state"),console.log(e)}}}),{login:r0,logout:gF,test:jF}=_A.actions,HE=()=>{var f,g;const t=sa(),e=Fu(),[n,r]=x.useState(!1),[i,s]=x.useState(!1),[o,a]=x.useState(""),l=x.useRef(null),{register:u,formState:{errors:c},handleSubmit:d}=mu({defaultValues:{email:"",password:""}}),h=async({email:w="",password:E=""})=>{r(!0);try{const p=(await CM(P_,w,E)).user,{name:_,lastName:y,phone:S}=await kf({uid:p.uid});e(r0({uid:p.uid,name:_,lastName:y,phone:S,email:w})),t("/")}catch(v){const p=v.code,_=v.message;p===gx.errorCredentials&&(a("Tu correo electrnico o contrasea son incorrectas"),l.current.showModal()),console.error({errorCode:p,errorMessage:_})}finally{r(!1)}};return m.jsxs("main",{className:"flex flex-col min-h-screen items-center justify-start lg:justify-center",children:[m.jsxs("header",{className:"text-center pb-6 pt-6 lg:pt-0",children:[m.jsxs("h1",{className:"text-primary font-bold text-2xl lg:text-4xl mb-2 lg:mb-4",children:["Hola ",m.jsx("span",{className:"text-secondary",children:"Bienvenido!"})]}),m.jsx("h2",{className:"text-primary italic",children:"Inicia Sesin"})]}),m.jsxs("form",{className:"w-full lg:w-6/12 py-12 px-6 border border-secondary rounded-xl shadow-lg shadow-secondary space-y-6",onSubmit:d(h),children:[m.jsxs("div",{className:"",children:[m.jsxs("article",{className:"flex items-center gap-4",children:[m.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[m.jsx("g",{id:"SVGRepo_bgCarrier",strokeWidth:"0"}),m.jsx("g",{id:"SVGRepo_tracerCarrier",strokeLinecap:"round",strokeLinejoin:"round"}),m.jsxs("g",{id:"SVGRepo_iconCarrier",children:[" ",m.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.75 5.25L3 6V18L3.75 18.75H20.25L21 18V6L20.25 5.25H3.75ZM4.5 7.6955V17.25H19.5V7.69525L11.9999 14.5136L4.5 7.6955ZM18.3099 6.75H5.68986L11.9999 12.4864L18.3099 6.75Z",fill:"#570df8"})," "]})]}),m.jsx("input",{id:"emal",type:"email",...u("email",{required:"Este campo es obligatorio",pattern:{value:/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,message:"Este NO es un correo electrnico vlido"}}),placeholder:"Correo Electrnico",className:"input input-bordered input-primary block w-full placeholder:text-xs text-xs lg:text-sm lg:placeholder:text-sm"})]}),((f=c==null?void 0:c.email)==null?void 0:f.type)==="required"?m.jsx(Rn,{children:c.email.message}):null]}),m.jsx(su,{ModalErrorRef:l,message:o}),m.jsxs("div",{className:"",children:[m.jsxs("article",{className:"flex items-center gap-4",children:[m.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[m.jsx("g",{id:"SVGRepo_bgCarrier",strokeWidth:"0"}),m.jsx("g",{id:"SVGRepo_tracerCarrier",strokeLinecap:"round",strokeLinejoin:"round"}),m.jsxs("g",{id:"SVGRepo_iconCarrier",children:[" ",m.jsx("path",{d:"M14 6V5C14 3.89543 13.1046 3 12 3C10.8954 3 10 3.89543 10 5V6M9 11H15C15.5523 11 16 10.5523 16 10V7C16 6.44772 15.5523 6 15 6H9C8.44772 6 8 6.44772 8 7V10C8 10.5523 8.44772 11 9 11ZM5 21H19C20.1046 21 21 20.1046 21 19V16C21 14.8954 20.1046 14 19 14H5C3.89543 14 3 14.8954 3 16V19C3 20.1046 3.89543 21 5 21Z",stroke:"#4506cb",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})," ",m.jsx("circle",{cx:"7.5",cy:"17.5",r:"1.5",fill:"#4506cb"})," ",m.jsx("circle",{cx:"12",cy:"17.5",r:"1.5",fill:"#4506cb"})," ",m.jsx("circle",{cx:"16.5",cy:"17.5",r:"1.5",fill:"#4506cb"})," "]})]}),m.jsx("input",{id:"password",type:i?"text":"password",...u("password",{required:"Este campo es obligatorio"}),placeholder:"Contrasea",className:"input input-bordered input-primary block w-full placeholder:text-xs text-xs lg:text-sm lg:placeholder:text-sm"})]}),((g=c==null?void 0:c.password)==null?void 0:g.type)==="required"?m.jsx(Rn,{children:c.password.message}):null]}),m.jsxs("label",{className:"relative inline-flex items-center mb-4 cursor-pointer",children:[m.jsx("input",{type:"checkbox",className:"sr-only peer",onChange:w=>s(w.target.checked)}),m.jsx("div",{className:"w-11 h-6 bg-gray-200 rounded-full peer peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-primary"}),m.jsx("span",{className:"ml-3 text-xs lg:text-sm font-medium ",children:"Mostrar Contrasea"})]}),m.jsxs("button",{type:"submit",disabled:n,className:"btn btn-secondary flex items-center gap-2 w-full text-xs lg:text-sm",children:["Iniciar Sesin",n?m.jsx("span",{className:"loading loading-bars loading-md"}):null]}),m.jsxs("p",{className:"text-center text-sm lg:text-sm",children:["No tienes una cuenta? ",m.jsx($o,{className:"text-secondary font-bold",to:"/auth/register",children:"Create una cuenta"})]}),m.jsxs("p",{className:"text-center text-sm lg:text-sm",children:["Olvidaste tu contrasea? ",m.jsx($o,{className:"text-secondary font-bold",to:"/auth/register",children:"Recuperar contrasea"})]})]})]})},yF=()=>{var f,g,w,E,v,p,_,y,S,C,A,P;const t=sa(),e=Fu(),[n,r]=x.useState(!1),{register:i,formState:{errors:s},handleSubmit:o}=mu({defaultValues:{name:"",lastName:"",phone:"",email:"",password:""}}),[a,l]=x.useState(!1),u=x.useRef(),[c,d]=x.useState(!1),h=async O=>{try{l(!0);const{user:M}=await kM(P_,O.email,O.password);await p_(ks(Hr,"users",M.uid),{uid:M.uid,name:O.name,lastName:O.lastName,phone:O.phone,email:O.email}),e(r0({uid:M.uid,name:O.name,lastName:O.lastName,phone:O.phone,email:O.email})),t("/")}catch(M){const le=M.code,Q=M.message;le===gx.emailAlreadyInUse&&(d("El correo electrnico que ingres ya est en uso"),u.current.showModal()),console.error({errorCode:le,errorMessage:Q})}finally{l(!1)}};return m.jsxs("main",{className:"flex flex-col min-h-screen items-center justify-center",children:[m.jsxs("header",{className:"text-center py-6",children:[m.jsxs("h1",{className:"text-primary font-bold text-2xl ",children:["Create una nueva ",m.jsx("span",{className:"text-secondary",children:"cuenta"})]}),m.jsx("h2",{className:"text-primary italic",children:"Crearse Cuenta"})]}),m.jsxs("form",{className:"w-full lg:w-6/12 py-12 px-6 border border-secondary rounded-xl shadow-lg shadow-secondary space-y-6",onSubmit:o(h),children:[m.jsxs("section",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 lg:gap-4",children:[m.jsxs("div",{className:"",children:[m.jsx("label",{className:"label",children:m.jsx("span",{className:"label-text text-secondary",children:"Nombre (s):"})}),m.jsx("input",{id:"name",type:"text",...i("name",{required:"Este campo es obligatorio"}),placeholder:"Nombre(s)",className:"input input-bordered input-primary block w-full placeholder:text-xs text-xs lg:text-sm lg:placeholder:text-sm",maxLength:50}),((f=s==null?void 0:s.name)==null?void 0:f.type)==="required"?m.jsx(Rn,{children:(g=s==null?void 0:s.name)==null?void 0:g.message}):null]}),m.jsxs("div",{className:"",children:[m.jsx("label",{className:"label",children:m.jsx("span",{className:"label-text text-secondary",children:"Apellido (s):"})}),m.jsx("input",{id:"lastName",type:"text",...i("lastName",{required:"Este campo es obligatorio"}),placeholder:"Apellido(s)",className:"input input-bordered input-primary block w-full placeholder:text-xs text-xs lg:text-sm lg:placeholder:text-sm",maxLength:50}),((w=s==null?void 0:s.lastName)==null?void 0:w.type)==="required"?m.jsx(Rn,{children:(E=s==null?void 0:s.name)==null?void 0:E.message}):null]})]}),m.jsxs("div",{className:"",children:[m.jsx("label",{className:"label",children:m.jsx("span",{className:"label-text text-secondary",children:"Telfono:"})}),m.jsx("input",{id:"phone",type:"tel",...i("phone",{required:"Este campo es obligatorio",minLength:{value:10,message:"El telefono debe contener solo 10 digitos"},maxLength:{value:10,message:"El telefono debe contener solo solo 10 digitos"}}),minLength:10,maxLength:10,placeholder:"Telefono",className:"input input-bordered input-primary block w-full placeholder:text-xs text-xs lg:text-sm lg:placeholder:text-sm"}),((v=s==null?void 0:s.phone)==null?void 0:v.type)==="required"?m.jsx(Rn,{children:(p=s==null?void 0:s.phone)==null?void 0:p.message}):null]}),m.jsxs("div",{className:"",children:[m.jsx("label",{className:"label",children:m.jsx("span",{className:"label-text text-secondary",children:"Correo electronico"})}),m.jsx("input",{id:"email",type:"email",...i("email",{required:"Este campo es obligatorio",pattern:{value:/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,message:"Este NO es un correo electrnico vlido"}}),placeholder:"Correo Electrnico",className:"input input-bordered input-primary block w-full placeholder:text-xs text-xs lg:text-sm lg:placeholder:text-sm",maxLength:100}),((_=s==null?void 0:s.email)==null?void 0:_.type)==="required"?m.jsx(Rn,{children:(y=s==null?void 0:s.email)==null?void 0:y.message}):null]}),m.jsxs("div",{className:"",children:[m.jsx("label",{className:"label",children:m.jsx("span",{className:"label-text text-secondary",children:"Contrasea:"})}),m.jsx("input",{id:"password",type:n?"text":"password",...i("password",{required:"Este campo es obligatorio",minLength:{value:8,message:"La contrasea debe contener minimo 8 o ms caracteres"}}),placeholder:"Contrasea",minLength:8,className:"input input-bordered input-primary block w-full placeholder:text-xs text-xs lg:text-sm lg:placeholder:text-sm",maxLength:200}),((S=s==null?void 0:s.password)==null?void 0:S.type)==="required"?m.jsx(Rn,{children:(C=s==null?void 0:s.password)==null?void 0:C.message}):null,((A=s==null?void 0:s.password)==null?void 0:A.type)==="minLength"?m.jsx(Rn,{children:(P=s==null?void 0:s.password)==null?void 0:P.message}):null]}),m.jsxs("label",{className:"relative inline-flex items-center mb-4 cursor-pointer",children:[m.jsx("input",{type:"checkbox",className:"sr-only peer",onChange:O=>r(O.target.checked)}),m.jsx("div",{className:"w-11 h-6 bg-gray-200 rounded-full peer peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-primary"}),m.jsx("span",{className:"ml-3 text-xs lg:text-sm font-medium ",children:"Mostrar Contrasea"})]}),m.jsxs("button",{type:"submit",disabled:a,className:"btn btn-secondary flex items-center gap-3 w-full ",children:["Crear Cuenta",a?m.jsx("span",{className:"loading loading-bars loading-md"}):null]}),m.jsxs("p",{className:"text-center text-sm lg:text-sm",children:["Ya tienes una cuenta? ",m.jsx($o,{className:"text-secondary font-bold",to:"/auth/login",children:"Inicia Sesin"})]})]}),m.jsx(su,{ModalErrorRef:u,message:c})]})},wA=({ModalPostWithCommentsRef:t})=>{const{currentUser:e,post:n,urlImagePost:r,datePosted:i,commentsFirestore:s}=Vi(o=>o.modalPostWithComments);return m.jsx(m.Fragment,{children:m.jsxs("dialog",{className:"modal",ref:t,children:[m.jsxs("div",{className:"modal-box space-y-3 bg-neutral ",children:[m.jsxs("section",{className:"bg-neutral rounded-lg space-y-3",children:[m.jsxs("article",{className:"flex items-center",children:[m.jsxs("svg",{width:"40px",height:"40px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[m.jsx("g",{id:"SVGRepo_bgCarrier",strokeWidth:"0"}),m.jsx("g",{id:"SVGRepo_tracerCarrier",strokeLinecap:"round",strokeLinejoin:"round"}),m.jsxs("g",{id:"SVGRepo_iconCarrier",children:[" ",m.jsx("path",{d:"M5 21C5 17.134 8.13401 14 12 14C15.866 14 19 17.134 19 21M16 7C16 9.20914 14.2091 11 12 11C9.79086 11 8 9.20914 8 7C8 4.79086 9.79086 3 12 3C14.2091 3 16 4.79086 16 7Z",stroke:"#5311f3",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})," "]})]}),m.jsxs("div",{className:"ml-3 ",children:[m.jsx("span",{className:"text-sm font-semibold antialiased block leading-tight",children:`${e==null?void 0:e.name} ${e==null?void 0:e.lastName}`}),m.jsx("span",{className:"text-base-content text-xs block",children:i})]})]}),m.jsx("p",{className:"text-xs",children:n}),r?m.jsx("img",{src:r,className:"w-full block object-cover"}):null,m.jsx("h2",{className:"border-b-2 border-b-primary text-white 2xl text-center py-2",children:"Comentarios"}),m.jsx("article",{className:"space-y-3",children:s.map(o=>{var a,l;return m.jsxs("article",{className:"flex items-center gap-1 ",children:[m.jsxs("svg",{width:"25px",height:"25px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[m.jsx("g",{id:"SVGRepo_bgCarrier",strokeWidth:"0"}),m.jsx("g",{id:"SVGRepo_tracerCarrier",strokeLinecap:"round",strokeLinejoin:"round"}),m.jsxs("g",{id:"SVGRepo_iconCarrier",children:[" ",m.jsx("path",{d:"M5 21C5 17.134 8.13401 14 12 14C15.866 14 19 17.134 19 21M16 7C16 9.20914 14.2091 11 12 11C9.79086 11 8 9.20914 8 7C8 4.79086 9.79086 3 12 3C14.2091 3 16 4.79086 16 7Z",stroke:"#5311f3",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})," "]})]}),m.jsxs("section",{className:"bg-base-100 grow text-xs p-3 rounded-md",children:[m.jsx("h6",{className:"text-primary font-bold mb-2",children:m.jsxs("div",{className:"",children:[`${(a=o==null?void 0:o.currentUser)==null?void 0:a.name} ${(l=o==null?void 0:o.currentUser)==null?void 0:l.lastName}`," ",m.jsx("span",{className:"text-base-content ml-2",children:o==null?void 0:o.dateCommeted})]})}),o==null?void 0:o.comment]})]},o.idComment)})})]}),m.jsx("form",{method:"dialog",children:m.jsx("button",{className:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2 text-error",children:""})})]}),m.jsx("div",{className:"modal-action mt-0",children:m.jsx("form",{method:"dialog",children:m.jsx("button",{className:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2",children:""})})})]})})};wA.propTypes={currentUser:Je.any,post:Je.any,urlImagePost:Je.any,isFavoritePost:Je.any,setIsFavoritePost:Je.any,datePosted:Je.any,commentsFirestore:Je.any,ModalPostWithCommentsRef:Je.any};const vF=()=>{const{user:t}=Vi(o=>o.auth),e=Fu(),[n,r]=x.useState(!1),i=sa(),s=async()=>{let o=!1;if(!o)try{o=!0,r(!0),await AM(P_),o=!1,e(gF()),i("/auth/login")}catch(a){console.error(a)}finally{r(!1)}};return m.jsx(m.Fragment,{children:m.jsxs("nav",{className:"navbar bg-primary text-white px-6",children:[m.jsx("div",{className:"navbar-start",children:m.jsx($o,{to:"/",className:"text-xl lg:text-2xl font-bold bg-gradient-to-r from-white to-pink-500 text-transparent bg-clip-text",children:"Social Media"})}),m.jsx("div",{className:"navbar-center hidden lg:flex"}),m.jsx("div",{className:"navbar-end",children:m.jsx("div",{className:"flex gap-2 lg:gap-6 items-center",children:m.jsxs("div",{className:"dropdown dropdown-end",children:[m.jsx("label",{tabIndex:0,className:"flex items-center justify-center hover:bg-primary-focus p-2 rounded-full",children:m.jsxs("svg",{width:"30",height:"30",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[m.jsx("g",{id:"SVGRepo_bgCarrier",strokeWidth:"0"}),m.jsx("g",{id:"SVGRepo_tracerCarrier",strokeLinecap:"round",strokeLinejoin:"round"}),m.jsxs("g",{id:"SVGRepo_iconCarrier",children:[" ",m.jsx("path",{d:"M5 21C5 17.134 8.13401 14 12 14C15.866 14 19 17.134 19 21M16 7C16 9.20914 14.2091 11 12 11C9.79086 11 8 9.20914 8 7C8 4.79086 9.79086 3 12 3C14.2091 3 16 4.79086 16 7Z",stroke:"#ebecf0",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})," "]})]})}),m.jsx("ul",{tabIndex:0,className:"menu menu-sm dropdown-content mt-3 z-[1] p-2 shadow bg-base-100 rounded-box w-52 cursor-default",children:m.jsxs("div",{className:"",children:[m.jsxs("li",{className:"p-2 hover:bg-base-200 rounded-md ",children:["Nombre: ",`${t==null?void 0:t.name} ${t==null?void 0:t.lastName}`]}),m.jsxs("li",{className:"p-2 hover:bg-base-200 rounded-md",children:["Correo Electrnico: ",`${t==null?void 0:t.email} `]}),m.jsxs("li",{className:"p-2 hover:bg-base-200 rounded-md",children:["Telfono: ",`${t==null?void 0:t.phone} `]}),m.jsxs($o,{to:"/edit-profile",className:"p-2 rounded-md flex items-center justify-between hover:bg-base-200",children:["Editar Perfil ",m.jsxs("svg",{width:"20px",height:"20px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[m.jsx("g",{id:"SVGRepo_bgCarrier",strokeWidth:"0"}),m.jsx("g",{id:"SVGRepo_tracerCarrier",strokeLinecap:"round",strokeLinejoin:"round"}),m.jsxs("g",{id:"SVGRepo_iconCarrier",children:[" ",m.jsx("path",{d:"M15 12C15 13.6569 13.6569 15 12 15C10.3431 15 9 13.6569 9 12C9 10.3431 10.3431 9 12 9C13.6569 9 15 10.3431 15 12Z",stroke:"#f000b8",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})," ",m.jsx("path",{d:"M12.9046 3.06005C12.6988 3 12.4659 3 12 3C11.5341 3 11.3012 3 11.0954 3.06005C10.7942 3.14794 10.5281 3.32808 10.3346 3.57511C10.2024 3.74388 10.1159 3.96016 9.94291 4.39272C9.69419 5.01452 9.00393 5.33471 8.36857 5.123L7.79779 4.93281C7.3929 4.79785 7.19045 4.73036 6.99196 4.7188C6.70039 4.70181 6.4102 4.77032 6.15701 4.9159C5.98465 5.01501 5.83376 5.16591 5.53197 5.4677C5.21122 5.78845 5.05084 5.94882 4.94896 6.13189C4.79927 6.40084 4.73595 6.70934 4.76759 7.01551C4.78912 7.2239 4.87335 7.43449 5.04182 7.85566C5.30565 8.51523 5.05184 9.26878 4.44272 9.63433L4.16521 9.80087C3.74031 10.0558 3.52786 10.1833 3.37354 10.3588C3.23698 10.5141 3.13401 10.696 3.07109 10.893C3 11.1156 3 11.3658 3 11.8663C3 12.4589 3 12.7551 3.09462 13.0088C3.17823 13.2329 3.31422 13.4337 3.49124 13.5946C3.69158 13.7766 3.96395 13.8856 4.50866 14.1035C5.06534 14.3261 5.35196 14.9441 5.16236 15.5129L4.94721 16.1584C4.79819 16.6054 4.72367 16.829 4.7169 17.0486C4.70875 17.3127 4.77049 17.5742 4.89587 17.8067C5.00015 18.0002 5.16678 18.1668 5.5 18.5C5.83323 18.8332 5.99985 18.9998 6.19325 19.1041C6.4258 19.2295 6.68733 19.2913 6.9514 19.2831C7.17102 19.2763 7.39456 19.2018 7.84164 19.0528L8.36862 18.8771C9.00393 18.6654 9.6942 18.9855 9.94291 19.6073C10.1159 20.0398 10.2024 20.2561 10.3346 20.4249C10.5281 20.6719 10.7942 20.8521 11.0954 20.94C11.3012 21 11.5341 21 12 21C12.4659 21 12.6988 21 12.9046 20.94C13.2058 20.8521 13.4719 20.6719 13.6654 20.4249C13.7976 20.2561 13.8841 20.0398 14.0571 19.6073C14.3058 18.9855 14.9961 18.6654 15.6313 18.8773L16.1579 19.0529C16.605 19.2019 16.8286 19.2764 17.0482 19.2832C17.3123 19.2913 17.5738 19.2296 17.8063 19.1042C17.9997 18.9999 18.1664 18.8333 18.4996 18.5001C18.8328 18.1669 18.9994 18.0002 19.1037 17.8068C19.2291 17.5743 19.2908 17.3127 19.2827 17.0487C19.2759 16.8291 19.2014 16.6055 19.0524 16.1584L18.8374 15.5134C18.6477 14.9444 18.9344 14.3262 19.4913 14.1035C20.036 13.8856 20.3084 13.7766 20.5088 13.5946C20.6858 13.4337 20.8218 13.2329 20.9054 13.0088C21 12.7551 21 12.4589 21 11.8663C21 11.3658 21 11.1156 20.9289 10.893C20.866 10.696 20.763 10.5141 20.6265 10.3588C20.4721 10.1833 20.2597 10.0558 19.8348 9.80087L19.5569 9.63416C18.9478 9.26867 18.6939 8.51514 18.9578 7.85558C19.1262 7.43443 19.2105 7.22383 19.232 7.01543C19.2636 6.70926 19.2003 6.40077 19.0506 6.13181C18.9487 5.94875 18.7884 5.78837 18.4676 5.46762C18.1658 5.16584 18.0149 5.01494 17.8426 4.91583C17.5894 4.77024 17.2992 4.70174 17.0076 4.71872C16.8091 4.73029 16.6067 4.79777 16.2018 4.93273L15.6314 5.12287C14.9961 5.33464 14.3058 5.0145 14.0571 4.39272C13.8841 3.96016 13.7976 3.74388 13.6654 3.57511C13.4719 3.32808 13.2058 3.14794 12.9046 3.06005Z",stroke:"#f000b8",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})," "]})]})]}),m.jsxs("li",{onClick:s,className:"p-2 hover:bg-base-200 rounded-md text-error ",children:["Cerrar Sesin ",n?m.jsx("span",{className:"loading loading-bars loading-md"}):null]})]})})]})})})]})})},_F=()=>{const[t,e]=x.useState(""),{user:n}=Vi(P=>P.auth),[r,i]=x.useState(!1),[s,o]=x.useState(!1),[a,l]=x.useState(!1),[u,c]=x.useState(null),[d,h]=x.useState([]),f=x.useRef(null),g=x.useRef(null),w=x.useRef(null),{message:E}=Vi(P=>P.modalError),{handleSubmit:v,register:p,reset:_}=mu({defaultValues:{post:"",fileImage:null}}),y=x.useRef(null),S=()=>{y.current.click()},C=P=>{const O=P.target.files[0];O&&(e(URL.createObjectURL(O)),c(O))};x.useEffect(()=>{o(!0),yE().then(P=>{h(P)}).catch(P=>{throw console.error(P),new Error(P)}).finally(()=>{o(!1)})},[]);const A=async({post:P=""})=>{try{if(i(!0),await sA(P)){i(!1),g.current.showModal(),_();return}i(!0);const M=await kf({uid:n.uid}),le=new Date().toLocaleString();let Q=null;if(u){const he=YV(r5,`${n.uid}/${n.uid}_${i5(le)}`);await QV(he,u),Q=await XV(he)}const Z=yx();await p_(ks(Hr,"posts",Z),{idPost:Z,currentUser:M,post:P,datePosted:at.fromDate(new Date),urlImagePost:Q,reactions:[]}),i(!1),_(),e(""),c(null),document.getElementById("form_post").close(),l(!0),setTimeout(()=>{l(!1)},3e3),o(!0);const _e=await yE();h(_e),o(!1)}catch(O){throw console.error(O),new Error(O)}};return m.jsxs(m.Fragment,{children:[m.jsx(vF,{}),m.jsxs("section",{className:"w-full md:w-10/12 lg:w-6/12 mx-auto mt-20",children:[m.jsxs("article",{className:"bg-neutral p-4 rounded-xl flex items-center gap-2 lg:gap-4 mb-4",children:[m.jsxs("svg",{width:"30px",height:"30px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[m.jsx("g",{id:"SVGRepo_bgCarrier",strokeWidth:"0"}),m.jsx("g",{id:"SVGRepo_tracerCarrier",strokeLinecap:"round",strokeLinejoin:"round"}),m.jsxs("g",{id:"SVGRepo_iconCarrier",children:[" ",m.jsx("path",{d:"M5 21C5 17.134 8.13401 14 12 14C15.866 14 19 17.134 19 21M16 7C16 9.20914 14.2091 11 12 11C9.79086 11 8 9.20914 8 7C8 4.79086 9.79086 3 12 3C14.2091 3 16 4.79086 16 7Z",stroke:"#5311f3",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})," "]})]}),m.jsxs("button",{className:`btn btn-active btn-neutral rounded-full grow text-start justify-start text-[10px] 
                        `,onClick:()=>document.getElementById("form_post").showModal(),children:["Que estas pensando,",m.jsxs("span",{className:"text-primary",children:[n==null?void 0:n.name,"?"]})]})]}),m.jsx("section",{className:"space-y-4",children:s?m.jsx("p",{className:"text-primary font-bold",children:"Cargando..."}):d.length===0?m.jsx("p",{className:"text-primary font-bold",children:"No hay posts..."}):d.map(P=>{const{currentUser:O="",datePosted:M="",idPost:le="",post:Q="",urlImagePost:Z=""}=P;return m.jsx(vA,{datePosted:vx(M.toDate()),post:Q,idPost:le,urlImagePost:Z,currentUser:O,ModalErrorRef:f,ModalPostWithCommentsRef:w},le)})})]}),m.jsx("dialog",{id:"form_post",className:"modal relative",children:m.jsxs("div",{className:"modal-box space-y-3",children:[m.jsx("form",{method:"dialog",children:m.jsx("button",{className:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2",onClick:()=>{_(),e(""),c(null)},children:""})}),m.jsxs("header",{className:"flex items-start gap-2",children:[m.jsxs("svg",{width:"35px",height:"35px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[m.jsx("g",{id:"SVGRepo_bgCarrier",strokeWidth:"0"}),m.jsx("g",{id:"SVGRepo_tracerCarrier",strokeLinecap:"round",strokeLinejoin:"round"}),m.jsxs("g",{id:"SVGRepo_iconCarrier",children:[" ",m.jsx("path",{d:"M5 21C5 17.134 8.13401 14 12 14C15.866 14 19 17.134 19 21M16 7C16 9.20914 14.2091 11 12 11C9.79086 11 8 9.20914 8 7C8 4.79086 9.79086 3 12 3C14.2091 3 16 4.79086 16 7Z",stroke:"#5311f3",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})," "]})]}),m.jsx("h3",{className:"font-bold text-base",children:`${n==null?void 0:n.name} ${n==null?void 0:n.lastName}`})]}),m.jsxs("form",{className:"",onSubmit:v(A),children:[m.jsx("textarea",{disabled:r,minLength:1,maxLength:300,className:"textarea block w-full text-sm placeholder:text-sm  focus:border-0",...p("post"),placeholder:`Qu estas pensando ${n==null?void 0:n.name}?`}),t?m.jsxs("div",{className:"relative mt-12",children:[m.jsx("img",{className:"block w-full object-cover",src:t}),m.jsx("button",{onClick:()=>{e("")},type:"button",className:"btn btn-sm btn-circle btn-error absolute -top-4 -right-3",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}):null,m.jsx("input",{type:"file",className:"hidden",onChange:C,ref:y,accept:".png, .jpeg, .jpg, .svg, .webp"}),m.jsxs("section",{className:"flex items-center justify-between mt-4",children:[m.jsx("article",{className:"flex items-center gap-2",children:m.jsxs("button",{type:"submit",className:"btn btn-sm btn-secondary text-xs",disabled:r,children:["crear post ",r?m.jsx("span",{className:"loading loading-bars loading-xs"}):null]})}),m.jsx("button",{type:"button",onClick:S,children:m.jsxs("svg",{width:"30px",height:"30px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[m.jsx("g",{id:"SVGRepo_bgCarrier",strokeWidth:"0"}),m.jsx("g",{id:"SVGRepo_tracerCarrier",strokeLinecap:"round",strokeLinejoin:"round"}),m.jsxs("g",{id:"SVGRepo_iconCarrier",children:[" ",m.jsx("path",{d:"M8.5 10C9.32843 10 10 9.32843 10 8.5C10 7.67157 9.32843 7 8.5 7C7.67157 7 7 7.67157 7 8.5C7 9.32843 7.67157 10 8.5 10Z",fill:"#f000b8"})," ",m.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.0055 2H12.9945C14.3805 1.99999 15.4828 1.99999 16.3716 2.0738C17.2819 2.14939 18.0575 2.30755 18.7658 2.67552C19.8617 3.24477 20.7552 4.1383 21.3245 5.23415C21.6925 5.94253 21.8506 6.71811 21.9262 7.62839C22 8.5172 22 9.61946 22 11.0054V12.9945C22 13.6854 22 14.306 21.9909 14.8646C22.0049 14.9677 22.0028 15.0726 21.9846 15.175C21.9741 15.6124 21.9563 16.0097 21.9262 16.3716C21.8506 17.2819 21.6925 18.0575 21.3245 18.7658C20.7552 19.8617 19.8617 20.7552 18.7658 21.3245C18.0575 21.6925 17.2819 21.8506 16.3716 21.9262C15.4828 22 14.3805 22 12.9946 22H11.0055C9.61955 22 8.5172 22 7.62839 21.9262C6.71811 21.8506 5.94253 21.6925 5.23415 21.3245C4.43876 20.9113 3.74996 20.3273 3.21437 19.6191C3.20423 19.6062 3.19444 19.5932 3.185 19.5799C2.99455 19.3238 2.82401 19.0517 2.67552 18.7658C2.30755 18.0575 2.14939 17.2819 2.0738 16.3716C1.99999 15.4828 1.99999 14.3805 2 12.9945V11.0055C1.99999 9.61949 1.99999 8.51721 2.0738 7.62839C2.14939 6.71811 2.30755 5.94253 2.67552 5.23415C3.24477 4.1383 4.1383 3.24477 5.23415 2.67552C5.94253 2.30755 6.71811 2.14939 7.62839 2.0738C8.51721 1.99999 9.61949 1.99999 11.0055 2ZM20 11.05V12.5118L18.613 11.065C17.8228 10.2407 16.504 10.2442 15.7182 11.0727L11.0512 15.9929L9.51537 14.1359C8.69326 13.1419 7.15907 13.1746 6.38008 14.2028L4.19042 17.0928C4.13682 16.8463 4.09606 16.5568 4.06694 16.2061C4.0008 15.4097 4 14.3905 4 12.95V11.05C4 9.60949 4.0008 8.59025 4.06694 7.79391C4.13208 7.00955 4.25538 6.53142 4.45035 6.1561C4.82985 5.42553 5.42553 4.82985 6.1561 4.45035C6.53142 4.25538 7.00955 4.13208 7.79391 4.06694C8.59025 4.0008 9.60949 4 11.05 4H12.95C14.3905 4 15.4097 4.0008 16.2061 4.06694C16.9905 4.13208 17.4686 4.25538 17.8439 4.45035C18.5745 4.82985 19.1702 5.42553 19.5497 6.1561C19.7446 6.53142 19.8679 7.00955 19.9331 7.79391C19.9992 8.59025 20 9.60949 20 11.05ZM6.1561 19.5497C5.84198 19.3865 5.55279 19.1833 5.295 18.9467L7.97419 15.4106L9.51005 17.2676C10.2749 18.1924 11.6764 18.24 12.5023 17.3693L17.1693 12.449L19.9782 15.3792C19.9683 15.6812 19.9539 15.9547 19.9331 16.2061C19.8679 16.9905 19.7446 17.4686 19.5497 17.8439C19.1702 18.5745 18.5745 19.1702 17.8439 19.5497C17.4686 19.7446 16.9905 19.8679 16.2061 19.9331C15.4097 19.9992 14.3905 20 12.95 20H11.05C9.60949 20 8.59025 19.9992 7.79391 19.9331C7.00955 19.8679 6.53142 19.7446 6.1561 19.5497Z",fill:"#f000b8",className:"hover:fill-secondary-focus"})," "]})]})})]})]})]})}),a?m.jsx("div",{className:"toast text-xs lg:text-sm",children:m.jsx("div",{className:"alert alert-info py-2 px-4",children:m.jsx("span",{children:"Post publicado."})})}):null,m.jsx(su,{ModalErrorRef:f,message:E}),m.jsx(su,{ModalErrorRef:g,message:"El post no se puede publicar porque se ha detectado que es inapropiado "}),m.jsx(wA,{ModalPostWithCommentsRef:w})]})},wF=()=>{const[t,e]=x.useState(null);return sa(),m.jsx("main",{className:"flex flex-col min-h-screen items-center justify-start",children:m.jsx("section",{className:"bg-neutral p-4 rounded-xl mt-20",children:m.jsxs("h3",{children:["Se envio un mensaje a tu correo ",m.jsx("span",{className:"text-primary font-bold",children:t==null?void 0:t.email}),", por favor verifique el correo"]})})})},EF=()=>{var c,d,h,f,g,w;const{user:t}=Vi(E=>E.auth),e=Fu(),{register:n,formState:{errors:r},handleSubmit:i}=mu({defaultValues:{name:t==null?void 0:t.name,lastName:t==null?void 0:t.lastName,phone:t==null?void 0:t.phone}}),[s,o]=x.useState(!1),[a,l]=x.useState(!1),u=async({name:E,lastName:v,phone:p})=>{try{l(!0);const _=ks(Hr,"users",t.uid);await Kg(_,{name:E,lastName:v,phone:p});const y=await kf({uid:t.uid});e(r0({...t,name:y.name,lastName:y.lastName,phone:y.phone})),o(!0),setTimeout(()=>{o(!1)},3e3)}catch(_){throw console.error(_),new Error(_)}finally{l(!1)}};return m.jsxs(m.Fragment,{children:[m.jsxs("main",{className:"flex flex-col min-h-screen justify-start items-center lg:justify-center",children:[m.jsxs("h1",{className:"text-primary font-bold text-2xl lg:text-4xl mb-2 lg:mb-4 ",children:["Actualizar ",m.jsx("span",{className:"text-secondary",children:"Perfil"})]}),m.jsx($o,{to:"/",className:"py-2 text-center mb-2 text-secondary font-bold hover:text-secondary-focus",children:"Regresar a la pgina principal"}),m.jsxs("form",{className:"w-full lg:w-6/12 py-6 px-6 border border-secondary rounded-xl shadow-lg shadow-secondary space-y-6",onSubmit:i(u),children:[m.jsxs("section",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 lg:gap-4",children:[m.jsxs("div",{className:"",children:[m.jsx("label",{className:"label",children:m.jsx("span",{className:"label-text text-secondary",children:"Nombre (s):"})}),m.jsx("input",{disabled:a,id:"name",type:"text",...n("name",{required:"Este campo es obligatorio"}),placeholder:"Nombre(s)",className:"input input-bordered input-primary block w-full placeholder:text-xs text-xs lg:text-sm lg:placeholder:text-sm",maxLength:50}),((c=r==null?void 0:r.name)==null?void 0:c.type)==="required"?m.jsx(Rn,{children:(d=r==null?void 0:r.name)==null?void 0:d.message}):null]}),m.jsxs("div",{className:"",children:[m.jsx("label",{className:"label",children:m.jsx("span",{className:"label-text text-secondary",children:"Apellido (s):"})}),m.jsx("input",{disabled:a,id:"lastName",type:"text",...n("lastName",{required:"Este campo es obligatorio"}),placeholder:"Apellido(s)",className:"input input-bordered input-primary block w-full placeholder:text-xs text-xs lg:text-sm lg:placeholder:text-sm",maxLength:50}),((h=r==null?void 0:r.lastName)==null?void 0:h.type)==="required"?m.jsx(Rn,{children:(f=r==null?void 0:r.name)==null?void 0:f.message}):null]})]}),m.jsxs("div",{className:"",children:[m.jsx("label",{className:"label",children:m.jsx("span",{className:"label-text text-secondary",children:"Telfono:"})}),m.jsx("input",{id:"phone",type:"tel",disabled:a,...n("phone",{required:"Este campo es obligatorio",minLength:{value:10,message:"El telefono debe contener solo 10 digitos"},maxLength:{value:10,message:"El telefono debe contener solo solo 10 digitos"}}),minLength:10,maxLength:10,placeholder:"Telefono",className:"input input-bordered input-primary block w-full placeholder:text-xs text-xs lg:text-sm lg:placeholder:text-sm"}),((g=r==null?void 0:r.phone)==null?void 0:g.type)==="required"?m.jsx(Rn,{children:(w=r==null?void 0:r.phone)==null?void 0:w.message}):null]}),m.jsxs("button",{type:"submit",disabled:a,className:"btn btn-secondary flex items-center gap-3 w-full ",children:["guardar cambios",a?m.jsx("span",{className:"loading loading-bars loading-md"}):null]})]})]}),s?m.jsx("div",{className:"toast text-xs lg:text-sm",children:m.jsx("div",{className:"alert alert-info py-2 px-4",children:m.jsx("span",{children:"Perfil actualizado Correctamente"})})}):null]})},TF=o4([{path:"/",element:m.jsx(fy,{toredirect:"/auth/login",children:m.jsx(_F,{})})},{path:"/edit-profile",element:m.jsx(fy,{toredirect:"/auth/login",children:m.jsx(EF,{})})},{path:"/auth/login",element:m.jsx(Kc,{toredirect:"/",children:m.jsx(HE,{})})},{path:"/auth/*",element:m.jsx(Kc,{toredirect:"/",children:m.jsx(HE,{})})},{path:"/auth/register",element:m.jsx(Kc,{toredirect:"/",children:m.jsx(yF,{})})},{path:"/auth/verify-email",element:m.jsx(wF,{})}]),SF=iF({reducer:{auth:_A.reducer,modalError:gA.reducer,modalPostWithComments:yA.reducer}});wm.createRoot(document.getElementById("root")).render(m.jsx(H5,{store:SF,children:m.jsx(f4,{router:TF})}));
